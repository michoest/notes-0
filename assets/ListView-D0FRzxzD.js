import{u as L,r as k,c as b,a as l,o,b as t,d as y,n as C,e as S,w as j,v as A,f as V,t as r,F as H,g as D,h as N,_ as R,i as T,j as _,k as B,T as E,l as z,m as K,p as q,q as F,s as U}from"./index-DBHKLKTv.js";const G={key:0,class:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J={class:"flex-1 min-w-0"},O={key:0,class:"flex gap-2"},P={key:1},Q={class:"text-xs text-surface-500 mt-1"},W=["value"],X={__name:"NoteItem",props:{item:{type:Object,required:!0}},setup(v){const n=v,i=L(),d=k(!1),p=k(""),u=k(null),g=k(!1);async function h(){var a,e;p.value=n.item.text,d.value=!0,await N(),(a=u.value)==null||a.focus(),(e=u.value)==null||e.select()}async function x(){const a=p.value.trim();a&&a!==n.item.text&&await i.updateItem(n.item.id,{text:a}),d.value=!1}function M(){d.value=!1,p.value=""}async function w(){confirm("Delete this item?")&&await i.deleteItem(n.item.id)}function c(a){const e=new Date(a),m=new Date-e;return m<6e4?"Just now":m<36e5?`${Math.floor(m/6e4)}m ago`:m<864e5?`${Math.floor(m/36e5)}h ago`:m<6048e5?`${Math.floor(m/864e5)}d ago`:e.toLocaleDateString()}const I=b(()=>i.lists.filter(a=>a.id!==n.item.listId));async function $(a){a&&await i.moveItem(n.item.id,a)}return(a,e)=>(o(),l("div",{class:C(["list-item group",v.item.completed&&"list-item-completed"]),onMouseenter:e[3]||(e[3]=s=>g.value=!0),onMouseleave:e[4]||(e[4]=s=>g.value=!1)},[t("button",{onClick:e[0]||(e[0]=s=>S(i).toggleItem(v.item.id)),class:C(["checkbox",v.item.completed&&"checkbox-checked"])},[v.item.completed?(o(),l("svg",G,[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):y("",!0)],2),t("div",J,[d.value?(o(),l("div",O,[j(t("input",{ref_key:"editInput",ref:u,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),onKeyup:[V(x,["enter"]),V(M,["escape"])],onBlur:x,type:"text",class:"input flex-1 py-1 text-sm"},null,544),[[A,p.value]])])):(o(),l("div",P,[t("p",{class:C(["text-surface-200 break-words",v.item.completed&&"line-through text-surface-500"])},r(v.item.text),3),t("p",Q,r(c(v.item.createdAt)),1)]))]),t("div",{class:C(["flex items-center gap-1 transition-opacity",g.value?"opacity-100":"opacity-0 lg:opacity-0"])},[t("button",{onClick:h,class:"p-2 text-surface-500 hover:text-surface-200 transition-colors",title:"Edit"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:w,class:"p-2 text-surface-500 hover:text-red-400 transition-colors",title:"Delete"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),t("select",{onChange:e[2]||(e[2]=s=>$(s.target.value)),class:"p-2 bg-transparent text-surface-500 hover:text-surface-200 cursor-pointer",title:"Move to..."},[e[8]||(e[8]=t("option",{value:"",disabled:"",selected:""},"Move...",-1)),(o(!0),l(H,null,D(I.value,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,W))),128))],32)],2),t("div",{class:"flex lg:hidden items-center gap-1"},[t("button",{onClick:h,class:"p-2 text-surface-500 active:text-surface-200"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:w,class:"p-2 text-surface-500 active:text-red-400"},[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])],34))}},Y={class:"max-w-2xl mx-auto p-4 lg:p-8"},Z={class:"hidden lg:block mb-8"},ee={class:"font-display font-bold text-3xl text-surface-100 mb-2"},te={class:"text-surface-400"},se={key:0},oe={key:1},ae={key:2},le={class:"card mb-6"},ne={class:"p-4 flex gap-3"},ie=["disabled"],re={key:0,class:"border-t border-surface-700 p-6"},de={key:0,class:"card"},ue={key:1,class:"text-center py-16"},ce={__name:"ListView",setup(v){const n=q(),i=L(),d=k(""),p=k(null),u=k(!1),g=b(()=>i.lists.find(e=>e.id===n.params.listId)),h=b(()=>i.listSettings[n.params.listId]??!1),x=b(()=>i.items.filter(e=>e.listId===n.params.listId&&!e.deletedAt&&(h.value||!e.completed)).sort((e,s)=>e.completed!==s.completed?e.completed?1:-1:s.createdAt-e.createdAt));function M(){i.setShowCompleted(n.params.listId,!h.value)}const w=b(()=>x.value.filter(e=>!e.completed).length),c=b(()=>x.value.filter(e=>e.completed).length);T(()=>n.params.listId,e=>{e&&i.setCurrentList(e)},{immediate:!0});async function I(){var s;const e=d.value.trim();e&&(await i.addItem(n.params.listId,e),d.value="",await N(),(s=p.value)==null||s.focus())}function $(e){e&&i.addItem(n.params.listId,e),u.value=!1}async function a(){confirm("Remove all completed items?")&&await i.clearCompleted(n.params.listId)}return(e,s)=>{var m;return o(),l("div",Y,[t("header",Z,[t("h1",ee,r(((m=g.value)==null?void 0:m.name)||"Loading..."),1),t("p",te,[w.value>0?(o(),l("span",se,r(w.value)+" item"+r(w.value!==1?"s":""),1)):(o(),l("span",oe,"No items")),c.value>0?(o(),l("span",ae," Â· "+r(c.value)+" completed",1)):y("",!0)])]),t("div",le,[t("div",ne,[j(t("input",{ref_key:"inputRef",ref:p,"onUpdate:modelValue":s[0]||(s[0]=f=>d.value=f),onKeyup:V(I,["enter"]),type:"text",placeholder:"Add a new item...",class:"input flex-1"},null,544),[[A,d.value]]),t("button",{onClick:I,disabled:!d.value.trim(),class:"btn-primary px-4"},[...s[3]||(s[3]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",{class:"hidden sm:inline"},"Add",-1)])],8,ie),t("button",{onClick:s[1]||(s[1]=f=>u.value=!u.value),class:C(["btn hidden lg:flex",u.value?"bg-red-500 text-white hover:bg-red-600":"btn-secondary"])},[...s[4]||(s[4]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1)])],2)]),_(E,{name:"slide"},{default:B(()=>[u.value?(o(),l("div",re,[_(F,{onResult:$,onCancel:s[2]||(s[2]=f=>u.value=!1),compact:!0})])):y("",!0)]),_:1})]),x.value.length>0?(o(),l("div",de,[_(z,{name:"list",tag:"div"},{default:B(()=>[(o(!0),l(H,null,D(x.value,f=>(o(),U(X,{key:f.id,item:f},null,8,["item"]))),128))]),_:1}),c.value>0&&h.value?(o(),l("button",{key:0,onClick:a,class:"w-full p-3 text-sm text-surface-500 hover:text-red-400 hover:bg-red-500/10 transition-colors border-t border-surface-700/30"}," Clear "+r(c.value)+" completed item"+r(c.value!==1?"s":""),1)):y("",!0),c.value>0?(o(),l("button",{key:1,onClick:M,class:"w-full p-3 text-sm text-surface-400 hover:text-surface-200 hover:bg-surface-700/30 transition-colors border-t border-surface-700/30"},r(h.value?"Hide":"Show")+" "+r(c.value)+" completed item"+r(c.value!==1?"s":""),1)):y("",!0)])):(o(),l("div",ue,[...s[5]||(s[5]=[K('<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-surface-800 flex items-center justify-center" data-v-e6d7bbf3><svg class="w-8 h-8 text-surface-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e6d7bbf3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-e6d7bbf3></path></svg></div><h3 class="font-display font-semibold text-surface-300 mb-1" data-v-e6d7bbf3>No items yet</h3><p class="text-surface-500 text-sm" data-v-e6d7bbf3>Add your first item above or use voice input</p>',3)])]))])}}},ve=R(ce,[["__scopeId","data-v-e6d7bbf3"]]);export{ve as default};
