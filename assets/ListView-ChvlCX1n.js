import{u as L,r as k,c as b,a as i,o as n,b as t,d as y,n as C,e as S,w as j,v as A,f as V,t as u,F as H,g as D,h as N,i as R,j as $,k as B,T,l as E,m as z,p as K,_ as q,q as F}from"./index-CUu2pI3Z.js";const O={key:0,class:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},U={class:"flex-1 min-w-0"},G={key:0,class:"flex gap-2"},J={key:1},P={class:"text-xs text-surface-500 mt-1"},Q=["value"],W={__name:"NoteItem",props:{item:{type:Object,required:!0}},setup(r){const o=r,a=L(),d=k(!1),c=k(""),m=k(null),g=k(!1);async function h(){var l,e;c.value=o.item.text,d.value=!0,await N(),(l=m.value)==null||l.focus(),(e=m.value)==null||e.select()}async function x(){const l=c.value.trim();l&&l!==o.item.text&&await a.updateItem(o.item.id,{text:l}),d.value=!1}function M(){d.value=!1,c.value=""}async function w(){confirm("Delete this item?")&&await a.deleteItem(o.item.id)}function v(l){const e=new Date(l),f=new Date-e;return f<6e4?"Just now":f<36e5?`${Math.floor(f/6e4)}m ago`:f<864e5?`${Math.floor(f/36e5)}h ago`:f<6048e5?`${Math.floor(f/864e5)}d ago`:e.toLocaleDateString()}const I=b(()=>a.lists.filter(l=>l.id!==o.item.listId));async function _(l){l&&await a.moveItem(o.item.id,l)}return(l,e)=>(n(),i("div",{class:C(["list-item group",r.item.completed&&"list-item-completed"]),onMouseenter:e[3]||(e[3]=s=>g.value=!0),onMouseleave:e[4]||(e[4]=s=>g.value=!1)},[t("button",{onClick:e[0]||(e[0]=s=>S(a).toggleItem(r.item.id)),class:C(["checkbox",r.item.completed&&"checkbox-checked"])},[r.item.completed?(n(),i("svg",O,[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):y("",!0)],2),t("div",U,[d.value?(n(),i("div",G,[j(t("input",{ref_key:"editInput",ref:m,"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),onKeyup:[V(x,["enter"]),V(M,["escape"])],onBlur:x,type:"text",class:"input flex-1 py-1 text-sm"},null,544),[[A,c.value]])])):(n(),i("div",J,[t("p",{class:C(["text-surface-200 break-words",r.item.completed&&"line-through text-surface-500"])},u(r.item.text),3),t("p",P,u(v(r.item.createdAt)),1)]))]),t("div",{class:C(["flex items-center gap-1 transition-opacity",g.value?"opacity-100":"opacity-0 lg:opacity-0"])},[t("button",{onClick:h,class:"p-2 text-surface-500 hover:text-surface-200 transition-colors",title:"Edit"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:w,class:"p-2 text-surface-500 hover:text-red-400 transition-colors",title:"Delete"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),t("select",{onChange:e[2]||(e[2]=s=>_(s.target.value)),class:"p-2 bg-transparent text-surface-500 hover:text-surface-200 cursor-pointer",title:"Move to..."},[e[8]||(e[8]=t("option",{value:"",disabled:"",selected:""},"Move...",-1)),(n(!0),i(H,null,D(I.value,s=>(n(),i("option",{key:s.id,value:s.id},u(s.name),9,Q))),128))],32)],2),t("div",{class:"flex lg:hidden items-center gap-1"},[t("button",{onClick:h,class:"p-2 text-surface-500 active:text-surface-200"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),t("button",{onClick:w,class:"p-2 text-surface-500 active:text-red-400"},[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])],34))}},X=(r,o)=>{const a=r.__vccOpts||r;for(const[d,c]of o)a[d]=c;return a},Y={class:"max-w-2xl mx-auto p-4 lg:p-8"},Z={class:"hidden lg:block mb-8"},ee={class:"font-display font-bold text-3xl text-surface-100 mb-2"},te={class:"text-surface-400"},se={key:0},oe={key:1},ae={key:2},ne={class:"card mb-6"},le={class:"p-4 flex gap-3"},ie=["disabled"],re={key:0,class:"border-t border-surface-700 p-6"},de={key:0,class:"card"},ue={key:1,class:"text-center py-16"},ce={__name:"ListView",setup(r){const o=K(),a=L(),d=k(""),c=k(null),m=k(!1),g=b(()=>a.lists.find(e=>e.id===o.params.listId)),h=b(()=>a.listSettings[o.params.listId]??!1),x=b(()=>a.items.filter(e=>e.listId===o.params.listId&&!e.deletedAt&&(h.value||!e.completed)).sort((e,s)=>e.completed!==s.completed?e.completed?1:-1:s.createdAt-e.createdAt));function M(){a.setShowCompleted(o.params.listId,!h.value)}const w=b(()=>x.value.filter(e=>!e.completed).length),v=b(()=>x.value.filter(e=>e.completed).length);R(()=>o.params.listId,e=>{e&&a.setCurrentList(e)},{immediate:!0});async function I(){var s;const e=d.value.trim();e&&(await a.addItem(o.params.listId,e),d.value="",await N(),(s=c.value)==null||s.focus())}function _(e){e&&a.addItem(o.params.listId,e),m.value=!1}async function l(){confirm("Remove all completed items?")&&await a.clearCompleted(o.params.listId)}return(e,s)=>{var f;return n(),i("div",Y,[t("header",Z,[t("h1",ee,u(((f=g.value)==null?void 0:f.name)||"Loading..."),1),t("p",te,[w.value>0?(n(),i("span",se,u(w.value)+" item"+u(w.value!==1?"s":""),1)):(n(),i("span",oe,"No items")),v.value>0?(n(),i("span",ae," Â· "+u(v.value)+" completed",1)):y("",!0)])]),t("div",ne,[t("div",le,[j(t("input",{ref_key:"inputRef",ref:c,"onUpdate:modelValue":s[0]||(s[0]=p=>d.value=p),onKeyup:V(I,["enter"]),type:"text",placeholder:"Add a new item...",class:"input flex-1"},null,544),[[A,d.value]]),t("button",{onClick:I,disabled:!d.value.trim(),class:"btn-primary px-4"},[...s[3]||(s[3]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",{class:"hidden sm:inline"},"Add",-1)])],8,ie),t("button",{onClick:s[1]||(s[1]=p=>m.value=!m.value),class:C(["btn hidden lg:flex",m.value?"bg-red-500 text-white hover:bg-red-600":"btn-secondary"])},[...s[4]||(s[4]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1)])],2)]),$(T,{name:"slide"},{default:B(()=>[m.value?(n(),i("div",re,[$(q,{onResult:_,onCancel:s[2]||(s[2]=p=>m.value=!1),compact:!0})])):y("",!0)]),_:1})]),x.value.length>0?(n(),i("div",de,[$(E,{name:"list",tag:"div"},{default:B(()=>[(n(!0),i(H,null,D(x.value,p=>(n(),F(W,{key:p.id,item:p},null,8,["item"]))),128))]),_:1}),v.value>0&&h.value?(n(),i("button",{key:0,onClick:l,class:"w-full p-3 text-sm text-surface-500 hover:text-red-400 hover:bg-red-500/10 transition-colors border-t border-surface-700/30"}," Clear "+u(v.value)+" completed item"+u(v.value!==1?"s":""),1)):y("",!0),v.value>0?(n(),i("button",{key:1,onClick:M,class:"w-full p-3 text-sm text-surface-400 hover:text-surface-200 hover:bg-surface-700/30 transition-colors border-t border-surface-700/30"},u(h.value?"Hide":"Show")+" "+u(v.value)+" completed item"+u(v.value!==1?"s":""),1)):y("",!0)])):(n(),i("div",ue,[...s[5]||(s[5]=[z('<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-surface-800 flex items-center justify-center" data-v-e6d7bbf3><svg class="w-8 h-8 text-surface-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e6d7bbf3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-e6d7bbf3></path></svg></div><h3 class="font-display font-semibold text-surface-300 mb-1" data-v-e6d7bbf3>No items yet</h3><p class="text-surface-500 text-sm" data-v-e6d7bbf3>Add your first item above or use voice input</p>',3)])]))])}}},ve=X(ce,[["__scopeId","data-v-e6d7bbf3"]]);export{ve as default};
