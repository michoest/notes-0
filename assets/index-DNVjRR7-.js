const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ListView-HCl9xz1G.js","assets/ListView-Bwaobf77.css"])))=>i.map(i=>d[i]);
function zf(n,a){for(var c=0;c<a.length;c++){const h=a[c];if(typeof h!="string"&&!Array.isArray(h)){for(const g in h)if(g!=="default"&&!(g in n)){const p=Object.getOwnPropertyDescriptor(h,g);p&&Object.defineProperty(n,g,p.get?p:{enumerable:!0,get:()=>h[g]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const p of g)if(p.type==="childList")for(const w of p.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&h(w)}).observe(document,{childList:!0,subtree:!0});function c(g){const p={};return g.integrity&&(p.integrity=g.integrity),g.referrerPolicy&&(p.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?p.credentials="include":g.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function h(g){if(g.ep)return;g.ep=!0;const p=c(g);fetch(g.href,p)}})();const Yf="modulepreload",qf=function(n){return"/"+n},Pl={},_a=function(a,c,h){let g=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),A=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));g=Promise.allSettled(c.map(E=>{if(E=qf(E),E in Pl)return;Pl[E]=!0;const b=E.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${_}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":Yf,b||(S.as="script"),S.crossOrigin="",S.href=E,A&&S.setAttribute("nonce",A),document.head.appendChild(S),b)return new Promise((k,U)=>{S.addEventListener("load",k),S.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${E}`)))})}))}function p(w){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=w,window.dispatchEvent(A),!A.defaultPrevented)throw w}return g.then(w=>{for(const A of w||[])A.status==="rejected"&&p(A.reason);return a().catch(p)})};/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hl(n){const a=Object.create(null);for(const c of n.split(","))a[c]=1;return c=>c in a}const Bt={},xs=[],Vr=()=>{},Zc=()=>!1,Jo=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),dl=n=>n.startsWith("onUpdate:"),xn=Object.assign,gl=(n,a)=>{const c=n.indexOf(a);c>-1&&n.splice(c,1)},Zf=Object.prototype.hasOwnProperty,Rt=(n,a)=>Zf.call(n,a),Ye=Array.isArray,ms=n=>oo(n)==="[object Map]",_s=n=>oo(n)==="[object Set]",Bl=n=>oo(n)==="[object Date]",nt=n=>typeof n=="function",tn=n=>typeof n=="string",Hr=n=>typeof n=="symbol",Mt=n=>n!==null&&typeof n=="object",Qc=n=>(Mt(n)||nt(n))&&nt(n.then)&&nt(n.catch),Jc=Object.prototype.toString,oo=n=>Jc.call(n),Qf=n=>oo(n).slice(8,-1),$c=n=>oo(n)==="[object Object]",$o=n=>tn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ws=hl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ea=n=>{const a=Object.create(null);return c=>a[c]||(a[c]=n(c))},Jf=/-\w/g,gr=ea(n=>n.replace(Jf,a=>a.slice(1).toUpperCase())),$f=/\B([A-Z])/g,vi=ea(n=>n.replace($f,"-$1").toLowerCase()),ta=ea(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ia=ea(n=>n?`on${ta(n)}`:""),bi=(n,a)=>!Object.is(n,a),Mo=(n,...a)=>{for(let c=0;c<n.length;c++)n[c](...a)},eu=(n,a,c,h=!1)=>{Object.defineProperty(n,a,{configurable:!0,enumerable:!1,writable:h,value:c})},na=n=>{const a=parseFloat(n);return isNaN(a)?n:a},e1=n=>{const a=tn(n)?Number(n):NaN;return isNaN(a)?n:a};let kl;const ra=()=>kl||(kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Js(n){if(Ye(n)){const a={};for(let c=0;c<n.length;c++){const h=n[c],g=tn(h)?i1(h):Js(h);if(g)for(const p in g)a[p]=g[p]}return a}else if(tn(n)||Mt(n))return n}const t1=/;(?![^(]*\))/g,n1=/:([^]+)/,r1=/\/\*[^]*?\*\//g;function i1(n){const a={};return n.replace(r1,"").split(t1).forEach(c=>{if(c){const h=c.split(n1);h.length>1&&(a[h[0].trim()]=h[1].trim())}}),a}function Ai(n){let a="";if(tn(n))a=n;else if(Ye(n))for(let c=0;c<n.length;c++){const h=Ai(n[c]);h&&(a+=h+" ")}else if(Mt(n))for(const c in n)n[c]&&(a+=c+" ");return a.trim()}const s1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o1=hl(s1);function tu(n){return!!n||n===""}function a1(n,a){if(n.length!==a.length)return!1;let c=!0;for(let h=0;c&&h<n.length;h++)c=Ki(n[h],a[h]);return c}function Ki(n,a){if(n===a)return!0;let c=Bl(n),h=Bl(a);if(c||h)return c&&h?n.getTime()===a.getTime():!1;if(c=Hr(n),h=Hr(a),c||h)return n===a;if(c=Ye(n),h=Ye(a),c||h)return c&&h?a1(n,a):!1;if(c=Mt(n),h=Mt(a),c||h){if(!c||!h)return!1;const g=Object.keys(n).length,p=Object.keys(a).length;if(g!==p)return!1;for(const w in n){const A=n.hasOwnProperty(w),E=a.hasOwnProperty(w);if(A&&!E||!A&&E||!Ki(n[w],a[w]))return!1}}return String(n)===String(a)}function pl(n,a){return n.findIndex(c=>Ki(c,a))}const nu=n=>!!(n&&n.__v_isRef===!0),Yn=n=>tn(n)?n:n==null?"":Ye(n)||Mt(n)&&(n.toString===Jc||!nt(n.toString))?nu(n)?Yn(n.value):JSON.stringify(n,ru,2):String(n),ru=(n,a)=>nu(a)?ru(n,a.value):ms(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((c,[h,g],p)=>(c[Sa(h,p)+" =>"]=g,c),{})}:_s(a)?{[`Set(${a.size})`]:[...a.values()].map(c=>Sa(c))}:Hr(a)?Sa(a):Mt(a)&&!Ye(a)&&!$c(a)?String(a):a,Sa=(n,a="")=>{var c;return Hr(n)?`Symbol(${(c=n.description)!=null?c:a})`:n};/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;class iu{constructor(a=!1){this.detached=a,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=On,!a&&On&&(this.index=(On.scopes||(On.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let a,c;if(this.scopes)for(a=0,c=this.scopes.length;a<c;a++)this.scopes[a].pause();for(a=0,c=this.effects.length;a<c;a++)this.effects[a].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let a,c;if(this.scopes)for(a=0,c=this.scopes.length;a<c;a++)this.scopes[a].resume();for(a=0,c=this.effects.length;a<c;a++)this.effects[a].resume()}}run(a){if(this._active){const c=On;try{return On=this,a()}finally{On=c}}}on(){++this._on===1&&(this.prevScope=On,On=this)}off(){this._on>0&&--this._on===0&&(On=this.prevScope,this.prevScope=void 0)}stop(a){if(this._active){this._active=!1;let c,h;for(c=0,h=this.effects.length;c<h;c++)this.effects[c].stop();for(this.effects.length=0,c=0,h=this.cleanups.length;c<h;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,h=this.scopes.length;c<h;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!a){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0}}}function su(n){return new iu(n)}function ou(){return On}function l1(n,a=!1){On&&On.cleanups.push(n)}let Ft;const Ta=new WeakSet;class au{constructor(a){this.fn=a,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,On&&On.active&&On.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ta.has(this)&&(Ta.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ll(this),uu(this);const a=Ft,c=Cr;Ft=this,Cr=!0;try{return this.fn()}finally{fu(this),Ft=a,Cr=c,this.flags&=-3}}stop(){if(this.flags&1){for(let a=this.deps;a;a=a.nextDep)wl(a);this.deps=this.depsTail=void 0,Ll(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ta.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wa(this)&&this.run()}get dirty(){return Wa(this)}}let lu=0,js,Ks;function cu(n,a=!1){if(n.flags|=8,a){n.next=Ks,Ks=n;return}n.next=js,js=n}function xl(){lu++}function ml(){if(--lu>0)return;if(Ks){let a=Ks;for(Ks=void 0;a;){const c=a.next;a.next=void 0,a.flags&=-9,a=c}}let n;for(;js;){let a=js;for(js=void 0;a;){const c=a.next;if(a.next=void 0,a.flags&=-9,a.flags&1)try{a.trigger()}catch(h){n||(n=h)}a=c}}if(n)throw n}function uu(n){for(let a=n.deps;a;a=a.nextDep)a.version=-1,a.prevActiveLink=a.dep.activeLink,a.dep.activeLink=a}function fu(n){let a,c=n.depsTail,h=c;for(;h;){const g=h.prevDep;h.version===-1?(h===c&&(c=g),wl(h),c1(h)):a=h,h.dep.activeLink=h.prevActiveLink,h.prevActiveLink=void 0,h=g}n.deps=a,n.depsTail=c}function Wa(n){for(let a=n.deps;a;a=a.nextDep)if(a.dep.version!==a.version||a.dep.computed&&(hu(a.dep.computed)||a.dep.version!==a.version))return!0;return!!n._dirty}function hu(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===$s)||(n.globalVersion=$s,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Wa(n))))return;n.flags|=2;const a=n.dep,c=Ft,h=Cr;Ft=n,Cr=!0;try{uu(n);const g=n.fn(n._value);(a.version===0||bi(g,n._value))&&(n.flags|=128,n._value=g,a.version++)}catch(g){throw a.version++,g}finally{Ft=c,Cr=h,fu(n),n.flags&=-3}}function wl(n,a=!1){const{dep:c,prevSub:h,nextSub:g}=n;if(h&&(h.nextSub=g,n.prevSub=void 0),g&&(g.prevSub=h,n.nextSub=void 0),c.subs===n&&(c.subs=h,!h&&c.computed)){c.computed.flags&=-5;for(let p=c.computed.deps;p;p=p.nextDep)wl(p,!0)}!a&&!--c.sc&&c.map&&c.map.delete(c.key)}function c1(n){const{prevDep:a,nextDep:c}=n;a&&(a.nextDep=c,n.prevDep=void 0),c&&(c.prevDep=a,n.nextDep=void 0)}let Cr=!0;const du=[];function ii(){du.push(Cr),Cr=!1}function si(){const n=du.pop();Cr=n===void 0?!0:n}function Ll(n){const{cleanup:a}=n;if(n.cleanup=void 0,a){const c=Ft;Ft=void 0;try{a()}finally{Ft=c}}}let $s=0;class u1{constructor(a,c){this.sub=a,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yl{constructor(a){this.computed=a,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(a){if(!Ft||!Cr||Ft===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==Ft)c=this.activeLink=new u1(Ft,this),Ft.deps?(c.prevDep=Ft.depsTail,Ft.depsTail.nextDep=c,Ft.depsTail=c):Ft.deps=Ft.depsTail=c,gu(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const h=c.nextDep;h.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=h),c.prevDep=Ft.depsTail,c.nextDep=void 0,Ft.depsTail.nextDep=c,Ft.depsTail=c,Ft.deps===c&&(Ft.deps=h)}return c}trigger(a){this.version++,$s++,this.notify(a)}notify(a){xl();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{ml()}}}function gu(n){if(n.dep.sc++,n.sub.flags&4){const a=n.dep.computed;if(a&&!n.dep.subs){a.flags|=20;for(let h=a.deps;h;h=h.nextDep)gu(h)}const c=n.dep.subs;c!==n&&(n.prevSub=c,c&&(c.nextSub=n)),n.dep.subs=n}}const Fo=new WeakMap,Wi=Symbol(""),ja=Symbol(""),eo=Symbol("");function Rn(n,a,c){if(Cr&&Ft){let h=Fo.get(n);h||Fo.set(n,h=new Map);let g=h.get(c);g||(h.set(c,g=new yl),g.map=h,g.key=c),g.track()}}function ei(n,a,c,h,g,p){const w=Fo.get(n);if(!w){$s++;return}const A=E=>{E&&E.trigger()};if(xl(),a==="clear")w.forEach(A);else{const E=Ye(n),b=E&&$o(c);if(E&&c==="length"){const _=Number(h);w.forEach((S,k)=>{(k==="length"||k===eo||!Hr(k)&&k>=_)&&A(S)})}else switch((c!==void 0||w.has(void 0))&&A(w.get(c)),b&&A(w.get(eo)),a){case"add":E?b&&A(w.get("length")):(A(w.get(Wi)),ms(n)&&A(w.get(ja)));break;case"delete":E||(A(w.get(Wi)),ms(n)&&A(w.get(ja)));break;case"set":ms(n)&&A(w.get(Wi));break}}ml()}function f1(n,a){const c=Fo.get(n);return c&&c.get(a)}function us(n){const a=mt(n);return a===n?a:(Rn(a,"iterate",eo),sr(n)?a:a.map(vr))}function ia(n){return Rn(n=mt(n),"iterate",eo),n}function xi(n,a){return oi(n)?ri(n)?bs(vr(a)):bs(a):vr(a)}const h1={__proto__:null,[Symbol.iterator](){return Oa(this,Symbol.iterator,n=>xi(this,n))},concat(...n){return us(this).concat(...n.map(a=>Ye(a)?us(a):a))},entries(){return Oa(this,"entries",n=>(n[1]=xi(this,n[1]),n))},every(n,a){return qr(this,"every",n,a,void 0,arguments)},filter(n,a){return qr(this,"filter",n,a,c=>c.map(h=>xi(this,h)),arguments)},find(n,a){return qr(this,"find",n,a,c=>xi(this,c),arguments)},findIndex(n,a){return qr(this,"findIndex",n,a,void 0,arguments)},findLast(n,a){return qr(this,"findLast",n,a,c=>xi(this,c),arguments)},findLastIndex(n,a){return qr(this,"findLastIndex",n,a,void 0,arguments)},forEach(n,a){return qr(this,"forEach",n,a,void 0,arguments)},includes(...n){return Ra(this,"includes",n)},indexOf(...n){return Ra(this,"indexOf",n)},join(n){return us(this).join(n)},lastIndexOf(...n){return Ra(this,"lastIndexOf",n)},map(n,a){return qr(this,"map",n,a,void 0,arguments)},pop(){return Ls(this,"pop")},push(...n){return Ls(this,"push",n)},reduce(n,...a){return Fl(this,"reduce",n,a)},reduceRight(n,...a){return Fl(this,"reduceRight",n,a)},shift(){return Ls(this,"shift")},some(n,a){return qr(this,"some",n,a,void 0,arguments)},splice(...n){return Ls(this,"splice",n)},toReversed(){return us(this).toReversed()},toSorted(n){return us(this).toSorted(n)},toSpliced(...n){return us(this).toSpliced(...n)},unshift(...n){return Ls(this,"unshift",n)},values(){return Oa(this,"values",n=>xi(this,n))}};function Oa(n,a,c){const h=ia(n),g=h[a]();return h!==n&&!sr(n)&&(g._next=g.next,g.next=()=>{const p=g._next();return p.done||(p.value=c(p.value)),p}),g}const d1=Array.prototype;function qr(n,a,c,h,g,p){const w=ia(n),A=w!==n&&!sr(n),E=w[a];if(E!==d1[a]){const S=E.apply(n,p);return A?vr(S):S}let b=c;w!==n&&(A?b=function(S,k){return c.call(this,xi(n,S),k,n)}:c.length>2&&(b=function(S,k){return c.call(this,S,k,n)}));const _=E.call(w,b,h);return A&&g?g(_):_}function Fl(n,a,c,h){const g=ia(n);let p=c;return g!==n&&(sr(n)?c.length>3&&(p=function(w,A,E){return c.call(this,w,A,E,n)}):p=function(w,A,E){return c.call(this,w,xi(n,A),E,n)}),g[a](p,...h)}function Ra(n,a,c){const h=mt(n);Rn(h,"iterate",eo);const g=h[a](...c);return(g===-1||g===!1)&&sa(c[0])?(c[0]=mt(c[0]),h[a](...c)):g}function Ls(n,a,c=[]){ii(),xl();const h=mt(n)[a].apply(n,c);return ml(),si(),h}const g1=hl("__proto__,__v_isRef,__isVue"),pu=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Hr));function p1(n){Hr(n)||(n=String(n));const a=mt(this);return Rn(a,"has",n),a.hasOwnProperty(n)}class xu{constructor(a=!1,c=!1){this._isReadonly=a,this._isShallow=c}get(a,c,h){if(c==="__v_skip")return a.__v_skip;const g=this._isReadonly,p=this._isShallow;if(c==="__v_isReactive")return!g;if(c==="__v_isReadonly")return g;if(c==="__v_isShallow")return p;if(c==="__v_raw")return h===(g?p?_1:bu:p?yu:wu).get(a)||Object.getPrototypeOf(a)===Object.getPrototypeOf(h)?a:void 0;const w=Ye(a);if(!g){let E;if(w&&(E=h1[c]))return E;if(c==="hasOwnProperty")return p1}const A=Reflect.get(a,c,en(a)?a:h);if((Hr(c)?pu.has(c):g1(c))||(g||Rn(a,"get",c),p))return A;if(en(A)){const E=w&&$o(c)?A:A.value;return g&&Mt(E)?Xa(E):E}return Mt(A)?g?Xa(A):ao(A):A}}class mu extends xu{constructor(a=!1){super(!1,a)}set(a,c,h,g){let p=a[c];const w=Ye(a)&&$o(c);if(!this._isShallow){const b=oi(p);if(!sr(h)&&!oi(h)&&(p=mt(p),h=mt(h)),!w&&en(p)&&!en(h))return b||(p.value=h),!0}const A=w?Number(c)<a.length:Rt(a,c),E=Reflect.set(a,c,h,en(a)?a:g);return a===mt(g)&&(A?bi(h,p)&&ei(a,"set",c,h):ei(a,"add",c,h)),E}deleteProperty(a,c){const h=Rt(a,c);a[c];const g=Reflect.deleteProperty(a,c);return g&&h&&ei(a,"delete",c,void 0),g}has(a,c){const h=Reflect.has(a,c);return(!Hr(c)||!pu.has(c))&&Rn(a,"has",c),h}ownKeys(a){return Rn(a,"iterate",Ye(a)?"length":Wi),Reflect.ownKeys(a)}}class x1 extends xu{constructor(a=!1){super(!0,a)}set(a,c){return!0}deleteProperty(a,c){return!0}}const m1=new mu,w1=new x1,y1=new mu(!0);const Ka=n=>n,_o=n=>Reflect.getPrototypeOf(n);function b1(n,a,c){return function(...h){const g=this.__v_raw,p=mt(g),w=ms(p),A=n==="entries"||n===Symbol.iterator&&w,E=n==="keys"&&w,b=g[n](...h),_=c?Ka:a?bs:vr;return!a&&Rn(p,"iterate",E?ja:Wi),{next(){const{value:S,done:k}=b.next();return k?{value:S,done:k}:{value:A?[_(S[0]),_(S[1])]:_(S),done:k}},[Symbol.iterator](){return this}}}}function Io(n){return function(...a){return n==="delete"?!1:n==="clear"?void 0:this}}function A1(n,a){const c={get(g){const p=this.__v_raw,w=mt(p),A=mt(g);n||(bi(g,A)&&Rn(w,"get",g),Rn(w,"get",A));const{has:E}=_o(w),b=a?Ka:n?bs:vr;if(E.call(w,g))return b(p.get(g));if(E.call(w,A))return b(p.get(A));p!==w&&p.get(g)},get size(){const g=this.__v_raw;return!n&&Rn(mt(g),"iterate",Wi),g.size},has(g){const p=this.__v_raw,w=mt(p),A=mt(g);return n||(bi(g,A)&&Rn(w,"has",g),Rn(w,"has",A)),g===A?p.has(g):p.has(g)||p.has(A)},forEach(g,p){const w=this,A=w.__v_raw,E=mt(A),b=a?Ka:n?bs:vr;return!n&&Rn(E,"iterate",Wi),A.forEach((_,S)=>g.call(p,b(_),b(S),w))}};return xn(c,n?{add:Io("add"),set:Io("set"),delete:Io("delete"),clear:Io("clear")}:{add(g){!a&&!sr(g)&&!oi(g)&&(g=mt(g));const p=mt(this);return _o(p).has.call(p,g)||(p.add(g),ei(p,"add",g,g)),this},set(g,p){!a&&!sr(p)&&!oi(p)&&(p=mt(p));const w=mt(this),{has:A,get:E}=_o(w);let b=A.call(w,g);b||(g=mt(g),b=A.call(w,g));const _=E.call(w,g);return w.set(g,p),b?bi(p,_)&&ei(w,"set",g,p):ei(w,"add",g,p),this},delete(g){const p=mt(this),{has:w,get:A}=_o(p);let E=w.call(p,g);E||(g=mt(g),E=w.call(p,g)),A&&A.call(p,g);const b=p.delete(g);return E&&ei(p,"delete",g,void 0),b},clear(){const g=mt(this),p=g.size!==0,w=g.clear();return p&&ei(g,"clear",void 0,void 0),w}}),["keys","values","entries",Symbol.iterator].forEach(g=>{c[g]=b1(g,n,a)}),c}function bl(n,a){const c=A1(n,a);return(h,g,p)=>g==="__v_isReactive"?!n:g==="__v_isReadonly"?n:g==="__v_raw"?h:Reflect.get(Rt(c,g)&&g in h?c:h,g,p)}const E1={get:bl(!1,!1)},C1={get:bl(!1,!0)},v1={get:bl(!0,!1)};const wu=new WeakMap,yu=new WeakMap,bu=new WeakMap,_1=new WeakMap;function I1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S1(n){return n.__v_skip||!Object.isExtensible(n)?0:I1(Qf(n))}function ao(n){return oi(n)?n:Al(n,!1,m1,E1,wu)}function Au(n){return Al(n,!1,y1,C1,yu)}function Xa(n){return Al(n,!0,w1,v1,bu)}function Al(n,a,c,h,g){if(!Mt(n)||n.__v_raw&&!(a&&n.__v_isReactive))return n;const p=S1(n);if(p===0)return n;const w=g.get(n);if(w)return w;const A=new Proxy(n,p===2?h:c);return g.set(n,A),A}function ri(n){return oi(n)?ri(n.__v_raw):!!(n&&n.__v_isReactive)}function oi(n){return!!(n&&n.__v_isReadonly)}function sr(n){return!!(n&&n.__v_isShallow)}function sa(n){return n?!!n.__v_raw:!1}function mt(n){const a=n&&n.__v_raw;return a?mt(a):n}function El(n){return!Rt(n,"__v_skip")&&Object.isExtensible(n)&&eu(n,"__v_skip",!0),n}const vr=n=>Mt(n)?ao(n):n,bs=n=>Mt(n)?Xa(n):n;function en(n){return n?n.__v_isRef===!0:!1}function Nt(n){return Eu(n,!1)}function T1(n){return Eu(n,!0)}function Eu(n,a){return en(n)?n:new O1(n,a)}class O1{constructor(a,c){this.dep=new yl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?a:mt(a),this._value=c?a:vr(a),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(a){const c=this._rawValue,h=this.__v_isShallow||sr(a)||oi(a);a=h?a:mt(a),bi(a,c)&&(this._rawValue=a,this._value=h?a:vr(a),this.dep.trigger())}}function qn(n){return en(n)?n.value:n}const R1={get:(n,a,c)=>a==="__v_raw"?n:qn(Reflect.get(n,a,c)),set:(n,a,c,h)=>{const g=n[a];return en(g)&&!en(c)?(g.value=c,!0):Reflect.set(n,a,c,h)}};function Cu(n){return ri(n)?n:new Proxy(n,R1)}function N1(n){const a=Ye(n)?new Array(n.length):{};for(const c in n)a[c]=M1(n,c);return a}class D1{constructor(a,c,h){this._object=a,this._key=c,this._defaultValue=h,this.__v_isRef=!0,this._value=void 0,this._raw=mt(a);let g=!0,p=a;if(!Ye(a)||!$o(String(c)))do g=!sa(p)||sr(p);while(g&&(p=p.__v_raw));this._shallow=g}get value(){let a=this._object[this._key];return this._shallow&&(a=qn(a)),this._value=a===void 0?this._defaultValue:a}set value(a){if(this._shallow&&en(this._raw[this._key])){const c=this._object[this._key];if(en(c)){c.value=a;return}}this._object[this._key]=a}get dep(){return f1(this._raw,this._key)}}function M1(n,a,c){return new D1(n,a,c)}class P1{constructor(a,c,h){this.fn=a,this.setter=c,this._value=void 0,this.dep=new yl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$s-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=h}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return cu(this,!0),!0}get value(){const a=this.dep.track();return hu(this),a&&(a.version=this.dep.version),this._value}set value(a){this.setter&&this.setter(a)}}function B1(n,a,c=!1){let h,g;return nt(n)?h=n:(h=n.get,g=n.set),new P1(h,g,c)}const So={},Uo=new WeakMap;let Li;function k1(n,a=!1,c=Li){if(c){let h=Uo.get(c);h||Uo.set(c,h=[]),h.push(n)}}function L1(n,a,c=Bt){const{immediate:h,deep:g,once:p,scheduler:w,augmentJob:A,call:E}=c,b=J=>g?J:sr(J)||g===!1||g===0?ti(J,1):ti(J);let _,S,k,U,se=!1,ee=!1;if(en(n)?(S=()=>n.value,se=sr(n)):ri(n)?(S=()=>b(n),se=!0):Ye(n)?(ee=!0,se=n.some(J=>ri(J)||sr(J)),S=()=>n.map(J=>{if(en(J))return J.value;if(ri(J))return b(J);if(nt(J))return E?E(J,2):J()})):nt(n)?a?S=E?()=>E(n,2):n:S=()=>{if(k){ii();try{k()}finally{si()}}const J=Li;Li=_;try{return E?E(n,3,[U]):n(U)}finally{Li=J}}:S=Vr,a&&g){const J=S,Fe=g===!0?1/0:g;S=()=>ti(J(),Fe)}const me=ou(),ye=()=>{_.stop(),me&&me.active&&gl(me.effects,_)};if(p&&a){const J=a;a=(...Fe)=>{J(...Fe),ye()}}let fe=ee?new Array(n.length).fill(So):So;const ae=J=>{if(!(!(_.flags&1)||!_.dirty&&!J))if(a){const Fe=_.run();if(g||se||(ee?Fe.some((ve,K)=>bi(ve,fe[K])):bi(Fe,fe))){k&&k();const ve=Li;Li=_;try{const K=[Fe,fe===So?void 0:ee&&fe[0]===So?[]:fe,U];fe=Fe,E?E(a,3,K):a(...K)}finally{Li=ve}}}else _.run()};return A&&A(ae),_=new au(S),_.scheduler=w?()=>w(ae,!1):ae,U=J=>k1(J,!1,_),k=_.onStop=()=>{const J=Uo.get(_);if(J){if(E)E(J,4);else for(const Fe of J)Fe();Uo.delete(_)}},a?h?ae(!0):fe=_.run():w?w(ae.bind(null,!0),!0):_.run(),ye.pause=_.pause.bind(_),ye.resume=_.resume.bind(_),ye.stop=ye,ye}function ti(n,a=1/0,c){if(a<=0||!Mt(n)||n.__v_skip||(c=c||new Map,(c.get(n)||0)>=a))return n;if(c.set(n,a),a--,en(n))ti(n.value,a,c);else if(Ye(n))for(let h=0;h<n.length;h++)ti(n[h],a,c);else if(_s(n)||ms(n))n.forEach(h=>{ti(h,a,c)});else if($c(n)){for(const h in n)ti(n[h],a,c);for(const h of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,h)&&ti(n[h],a,c)}return n}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lo(n,a,c,h){try{return h?n(...h):n()}catch(g){oa(g,a,c)}}function _r(n,a,c,h){if(nt(n)){const g=lo(n,a,c,h);return g&&Qc(g)&&g.catch(p=>{oa(p,a,c)}),g}if(Ye(n)){const g=[];for(let p=0;p<n.length;p++)g.push(_r(n[p],a,c,h));return g}}function oa(n,a,c,h=!0){const g=a?a.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:w}=a&&a.appContext.config||Bt;if(a){let A=a.parent;const E=a.proxy,b=`https://vuejs.org/error-reference/#runtime-${c}`;for(;A;){const _=A.ec;if(_){for(let S=0;S<_.length;S++)if(_[S](n,E,b)===!1)return}A=A.parent}if(p){ii(),lo(p,null,10,[n,E,b]),si();return}}F1(n,c,g,h,w)}function F1(n,a,c,h=!0,g=!1){if(g)throw n;console.error(n)}const Vn=[];let Fr=-1;const ws=[];let mi=null,hs=0;const vu=Promise.resolve();let Vo=null;function aa(n){const a=Vo||vu;return n?a.then(this?n.bind(this):n):a}function U1(n){let a=Fr+1,c=Vn.length;for(;a<c;){const h=a+c>>>1,g=Vn[h],p=to(g);p<n||p===n&&g.flags&2?a=h+1:c=h}return a}function Cl(n){if(!(n.flags&1)){const a=to(n),c=Vn[Vn.length-1];!c||!(n.flags&2)&&a>=to(c)?Vn.push(n):Vn.splice(U1(a),0,n),n.flags|=1,_u()}}function _u(){Vo||(Vo=vu.then(Su))}function V1(n){Ye(n)?ws.push(...n):mi&&n.id===-1?mi.splice(hs+1,0,n):n.flags&1||(ws.push(n),n.flags|=1),_u()}function Ul(n,a,c=Fr+1){for(;c<Vn.length;c++){const h=Vn[c];if(h&&h.flags&2){if(n&&h.id!==n.uid)continue;Vn.splice(c,1),c--,h.flags&4&&(h.flags&=-2),h(),h.flags&4||(h.flags&=-2)}}}function Iu(n){if(ws.length){const a=[...new Set(ws)].sort((c,h)=>to(c)-to(h));if(ws.length=0,mi){mi.push(...a);return}for(mi=a,hs=0;hs<mi.length;hs++){const c=mi[hs];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}mi=null,hs=0}}const to=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Su(n){try{for(Fr=0;Fr<Vn.length;Fr++){const a=Vn[Fr];a&&!(a.flags&8)&&(a.flags&4&&(a.flags&=-2),lo(a,a.i,a.i?15:14),a.flags&4||(a.flags&=-2))}}finally{for(;Fr<Vn.length;Fr++){const a=Vn[Fr];a&&(a.flags&=-2)}Fr=-1,Vn.length=0,Iu(),Vo=null,(Vn.length||ws.length)&&Su()}}let rr=null,Tu=null;function Ho(n){const a=rr;return rr=n,Tu=n&&n.type.__scopeId||null,a}function Fi(n,a=rr,c){if(!a||n._n)return n;const h=(...g)=>{h._d&&jo(-1);const p=Ho(a);let w;try{w=n(...g)}finally{Ho(p),h._d&&jo(1)}return w};return h._n=!0,h._c=!0,h._d=!0,h}function Ou(n,a){if(rr===null)return n;const c=ga(rr),h=n.dirs||(n.dirs=[]);for(let g=0;g<a.length;g++){let[p,w,A,E=Bt]=a[g];p&&(nt(p)&&(p={mounted:p,updated:p}),p.deep&&ti(w),h.push({dir:p,instance:c,value:w,oldValue:void 0,arg:A,modifiers:E}))}return n}function Pi(n,a,c,h){const g=n.dirs,p=a&&a.dirs;for(let w=0;w<g.length;w++){const A=g[w];p&&(A.oldValue=p[w].value);let E=A.dir[h];E&&(ii(),_r(E,c,8,[n.el,A,n,a]),si())}}const H1=Symbol("_vte"),Ru=n=>n.__isTeleport,$r=Symbol("_leaveCb"),To=Symbol("_enterCb");function Nu(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ua(()=>{n.isMounted=!0}),Vu(()=>{n.isUnmounting=!0}),n}const ur=[Function,Array],Du={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ur,onEnter:ur,onAfterEnter:ur,onEnterCancelled:ur,onBeforeLeave:ur,onLeave:ur,onAfterLeave:ur,onLeaveCancelled:ur,onBeforeAppear:ur,onAppear:ur,onAfterAppear:ur,onAppearCancelled:ur},Mu=n=>{const a=n.subTree;return a.component?Mu(a.component):a},G1={name:"BaseTransition",props:Du,setup(n,{slots:a}){const c=da(),h=Nu();return()=>{const g=a.default&&vl(a.default(),!0);if(!g||!g.length)return;const p=Pu(g),w=mt(n),{mode:A}=w;if(h.isLeaving)return Na(p);const E=Vl(p);if(!E)return Na(p);let b=no(E,w,h,c,S=>b=S);E.type!==Hn&&Xi(E,b);let _=c.subTree&&Vl(c.subTree);if(_&&_.type!==Hn&&!Ui(_,E)&&Mu(c).type!==Hn){let S=no(_,w,h,c);if(Xi(_,S),A==="out-in"&&E.type!==Hn)return h.isLeaving=!0,S.afterLeave=()=>{h.isLeaving=!1,c.job.flags&8||c.update(),delete S.afterLeave,_=void 0},Na(p);A==="in-out"&&E.type!==Hn?S.delayLeave=(k,U,se)=>{const ee=Bu(h,_);ee[String(_.key)]=_,k[$r]=()=>{U(),k[$r]=void 0,delete b.delayedLeave,_=void 0},b.delayedLeave=()=>{se(),delete b.delayedLeave,_=void 0}}:_=void 0}else _&&(_=void 0);return p}}};function Pu(n){let a=n[0];if(n.length>1){for(const c of n)if(c.type!==Hn){a=c;break}}return a}const W1=G1;function Bu(n,a){const{leavingVNodes:c}=n;let h=c.get(a.type);return h||(h=Object.create(null),c.set(a.type,h)),h}function no(n,a,c,h,g){const{appear:p,mode:w,persisted:A=!1,onBeforeEnter:E,onEnter:b,onAfterEnter:_,onEnterCancelled:S,onBeforeLeave:k,onLeave:U,onAfterLeave:se,onLeaveCancelled:ee,onBeforeAppear:me,onAppear:ye,onAfterAppear:fe,onAppearCancelled:ae}=a,J=String(n.key),Fe=Bu(c,n),ve=(V,he)=>{V&&_r(V,h,9,he)},K=(V,he)=>{const Ne=he[1];ve(V,he),Ye(V)?V.every($=>$.length<=1)&&Ne():V.length<=1&&Ne()},Q={mode:w,persisted:A,beforeEnter(V){let he=E;if(!c.isMounted)if(p)he=me||E;else return;V[$r]&&V[$r](!0);const Ne=Fe[J];Ne&&Ui(n,Ne)&&Ne.el[$r]&&Ne.el[$r](),ve(he,[V])},enter(V){let he=b,Ne=_,$=S;if(!c.isMounted)if(p)he=ye||b,Ne=fe||_,$=ae||S;else return;let Oe=!1;const Je=V[To]=Z=>{Oe||(Oe=!0,Z?ve($,[V]):ve(Ne,[V]),Q.delayedLeave&&Q.delayedLeave(),V[To]=void 0)};he?K(he,[V,Je]):Je()},leave(V,he){const Ne=String(n.key);if(V[To]&&V[To](!0),c.isUnmounting)return he();ve(k,[V]);let $=!1;const Oe=V[$r]=Je=>{$||($=!0,he(),Je?ve(ee,[V]):ve(se,[V]),V[$r]=void 0,Fe[Ne]===n&&delete Fe[Ne])};Fe[Ne]=n,U?K(U,[V,Oe]):Oe()},clone(V){const he=no(V,a,c,h,g);return g&&g(he),he}};return Q}function Na(n){if(la(n))return n=Ei(n),n.children=null,n}function Vl(n){if(!la(n))return Ru(n.type)&&n.children?Pu(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:a,children:c}=n;if(c){if(a&16)return c[0];if(a&32&&nt(c.default))return c.default()}}function Xi(n,a){n.shapeFlag&6&&n.component?(n.transition=a,Xi(n.component.subTree,a)):n.shapeFlag&128?(n.ssContent.transition=a.clone(n.ssContent),n.ssFallback.transition=a.clone(n.ssFallback)):n.transition=a}function vl(n,a=!1,c){let h=[],g=0;for(let p=0;p<n.length;p++){let w=n[p];const A=c==null?w.key:String(c)+String(w.key!=null?w.key:p);w.type===zn?(w.patchFlag&128&&g++,h=h.concat(vl(w.children,a,A))):(a||w.type!==Hn)&&h.push(A!=null?Ei(w,{key:A}):w)}if(g>1)for(let p=0;p<h.length;p++)h[p].patchFlag=-2;return h}function ku(n,a){return nt(n)?xn({name:n.name},a,{setup:n}):n}function Lu(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Go=new WeakMap;function Xs(n,a,c,h,g=!1){if(Ye(n)){n.forEach((se,ee)=>Xs(se,a&&(Ye(a)?a[ee]:a),c,h,g));return}if(zs(h)&&!g){h.shapeFlag&512&&h.type.__asyncResolved&&h.component.subTree.component&&Xs(n,a,c,h.component.subTree);return}const p=h.shapeFlag&4?ga(h.component):h.el,w=g?null:p,{i:A,r:E}=n,b=a&&a.r,_=A.refs===Bt?A.refs={}:A.refs,S=A.setupState,k=mt(S),U=S===Bt?Zc:se=>Rt(k,se);if(b!=null&&b!==E){if(Hl(a),tn(b))_[b]=null,U(b)&&(S[b]=null);else if(en(b)){b.value=null;const se=a;se.k&&(_[se.k]=null)}}if(nt(E))lo(E,A,12,[w,_]);else{const se=tn(E),ee=en(E);if(se||ee){const me=()=>{if(n.f){const ye=se?U(E)?S[E]:_[E]:E.value;if(g)Ye(ye)&&gl(ye,p);else if(Ye(ye))ye.includes(p)||ye.push(p);else if(se)_[E]=[p],U(E)&&(S[E]=_[E]);else{const fe=[p];E.value=fe,n.k&&(_[n.k]=fe)}}else se?(_[E]=w,U(E)&&(S[E]=w)):ee&&(E.value=w,n.k&&(_[n.k]=w))};if(w){const ye=()=>{me(),Go.delete(n)};ye.id=-1,Go.set(n,ye),tr(ye,c)}else Hl(n),me()}}}function Hl(n){const a=Go.get(n);a&&(a.flags|=8,Go.delete(n))}ra().requestIdleCallback;ra().cancelIdleCallback;const zs=n=>!!n.type.__asyncLoader,la=n=>n.type.__isKeepAlive;function j1(n,a){Fu(n,"a",a)}function K1(n,a){Fu(n,"da",a)}function Fu(n,a,c=Nn){const h=n.__wdc||(n.__wdc=()=>{let g=c;for(;g;){if(g.isDeactivated)return;g=g.parent}return n()});if(ca(a,h,c),c){let g=c.parent;for(;g&&g.parent;)la(g.parent.vnode)&&X1(h,a,c,g),g=g.parent}}function X1(n,a,c,h){const g=ca(a,n,h,!0);co(()=>{gl(h[a],g)},c)}function ca(n,a,c=Nn,h=!1){if(c){const g=c[n]||(c[n]=[]),p=a.__weh||(a.__weh=(...w)=>{ii();const A=uo(c),E=_r(a,c,n,w);return A(),si(),E});return h?g.unshift(p):g.push(p),p}}const ai=n=>(a,c=Nn)=>{(!io||n==="sp")&&ca(n,(...h)=>a(...h),c)},z1=ai("bm"),ua=ai("m"),Y1=ai("bu"),Uu=ai("u"),Vu=ai("bum"),co=ai("um"),q1=ai("sp"),Z1=ai("rtg"),Q1=ai("rtc");function J1(n,a=Nn){ca("ec",n,a)}const Hu="components";function Gu(n,a){return ju(Hu,n,!0,a)||n}const Wu=Symbol.for("v-ndc");function $1(n){return tn(n)?ju(Hu,n,!1)||n:n||Wu}function ju(n,a,c=!0,h=!1){const g=rr||Nn;if(g){const p=g.type;{const A=H0(p,!1);if(A&&(A===a||A===gr(a)||A===ta(gr(a))))return p}const w=Gl(g[n]||p[n],a)||Gl(g.appContext[n],a);return!w&&h?p:w}}function Gl(n,a){return n&&(n[a]||n[gr(a)]||n[ta(gr(a))])}function Ku(n,a,c,h){let g;const p=c,w=Ye(n);if(w||tn(n)){const A=w&&ri(n);let E=!1,b=!1;A&&(E=!sr(n),b=oi(n),n=ia(n)),g=new Array(n.length);for(let _=0,S=n.length;_<S;_++)g[_]=a(E?b?bs(vr(n[_])):vr(n[_]):n[_],_,void 0,p)}else if(typeof n=="number"){g=new Array(n);for(let A=0;A<n;A++)g[A]=a(A+1,A,void 0,p)}else if(Mt(n))if(n[Symbol.iterator])g=Array.from(n,(A,E)=>a(A,E,void 0,p));else{const A=Object.keys(n);g=new Array(A.length);for(let E=0,b=A.length;E<b;E++){const _=A[E];g[E]=a(n[_],_,E,p)}}else g=[];return g}const za=n=>n?df(n)?ga(n):za(n.parent):null,Ys=xn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>za(n.parent),$root:n=>za(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>zu(n),$forceUpdate:n=>n.f||(n.f=()=>{Cl(n.update)}),$nextTick:n=>n.n||(n.n=aa.bind(n.proxy)),$watch:n=>f0.bind(n)}),Da=(n,a)=>n!==Bt&&!n.__isScriptSetup&&Rt(n,a),e0={get({_:n},a){if(a==="__v_skip")return!0;const{ctx:c,setupState:h,data:g,props:p,accessCache:w,type:A,appContext:E}=n;if(a[0]!=="$"){const k=w[a];if(k!==void 0)switch(k){case 1:return h[a];case 2:return g[a];case 4:return c[a];case 3:return p[a]}else{if(Da(h,a))return w[a]=1,h[a];if(g!==Bt&&Rt(g,a))return w[a]=2,g[a];if(Rt(p,a))return w[a]=3,p[a];if(c!==Bt&&Rt(c,a))return w[a]=4,c[a];Ya&&(w[a]=0)}}const b=Ys[a];let _,S;if(b)return a==="$attrs"&&Rn(n.attrs,"get",""),b(n);if((_=A.__cssModules)&&(_=_[a]))return _;if(c!==Bt&&Rt(c,a))return w[a]=4,c[a];if(S=E.config.globalProperties,Rt(S,a))return S[a]},set({_:n},a,c){const{data:h,setupState:g,ctx:p}=n;return Da(g,a)?(g[a]=c,!0):h!==Bt&&Rt(h,a)?(h[a]=c,!0):Rt(n.props,a)||a[0]==="$"&&a.slice(1)in n?!1:(p[a]=c,!0)},has({_:{data:n,setupState:a,accessCache:c,ctx:h,appContext:g,props:p,type:w}},A){let E;return!!(c[A]||n!==Bt&&A[0]!=="$"&&Rt(n,A)||Da(a,A)||Rt(p,A)||Rt(h,A)||Rt(Ys,A)||Rt(g.config.globalProperties,A)||(E=w.__cssModules)&&E[A])},defineProperty(n,a,c){return c.get!=null?n._.accessCache[a]=0:Rt(c,"value")&&this.set(n,a,c.value,null),Reflect.defineProperty(n,a,c)}};function Wl(n){return Ye(n)?n.reduce((a,c)=>(a[c]=null,a),{}):n}let Ya=!0;function t0(n){const a=zu(n),c=n.proxy,h=n.ctx;Ya=!1,a.beforeCreate&&jl(a.beforeCreate,n,"bc");const{data:g,computed:p,methods:w,watch:A,provide:E,inject:b,created:_,beforeMount:S,mounted:k,beforeUpdate:U,updated:se,activated:ee,deactivated:me,beforeDestroy:ye,beforeUnmount:fe,destroyed:ae,unmounted:J,render:Fe,renderTracked:ve,renderTriggered:K,errorCaptured:Q,serverPrefetch:V,expose:he,inheritAttrs:Ne,components:$,directives:Oe,filters:Je}=a;if(b&&n0(b,h,null),w)for(const _e in w){const et=w[_e];nt(et)&&(h[_e]=et.bind(c))}if(g){const _e=g.call(c,c);Mt(_e)&&(n.data=ao(_e))}if(Ya=!0,p)for(const _e in p){const et=p[_e],Ut=nt(et)?et.bind(c,c):nt(et.get)?et.get.bind(c,c):Vr,Pt=!nt(et)&&nt(et.set)?et.set.bind(c):Vr,yn=En({get:Ut,set:Pt});Object.defineProperty(h,_e,{enumerable:!0,configurable:!0,get:()=>yn.value,set:bt=>yn.value=bt})}if(A)for(const _e in A)Xu(A[_e],h,c,_e);if(E){const _e=nt(E)?E.call(c):E;Reflect.ownKeys(_e).forEach(et=>{Po(et,_e[et])})}_&&jl(_,n,"c");function qe(_e,et){Ye(et)?et.forEach(Ut=>_e(Ut.bind(c))):et&&_e(et.bind(c))}if(qe(z1,S),qe(ua,k),qe(Y1,U),qe(Uu,se),qe(j1,ee),qe(K1,me),qe(J1,Q),qe(Q1,ve),qe(Z1,K),qe(Vu,fe),qe(co,J),qe(q1,V),Ye(he))if(he.length){const _e=n.exposed||(n.exposed={});he.forEach(et=>{Object.defineProperty(_e,et,{get:()=>c[et],set:Ut=>c[et]=Ut,enumerable:!0})})}else n.exposed||(n.exposed={});Fe&&n.render===Vr&&(n.render=Fe),Ne!=null&&(n.inheritAttrs=Ne),$&&(n.components=$),Oe&&(n.directives=Oe),V&&Lu(n)}function n0(n,a,c=Vr){Ye(n)&&(n=qa(n));for(const h in n){const g=n[h];let p;Mt(g)?"default"in g?p=hr(g.from||h,g.default,!0):p=hr(g.from||h):p=hr(g),en(p)?Object.defineProperty(a,h,{enumerable:!0,configurable:!0,get:()=>p.value,set:w=>p.value=w}):a[h]=p}}function jl(n,a,c){_r(Ye(n)?n.map(h=>h.bind(a.proxy)):n.bind(a.proxy),a,c)}function Xu(n,a,c,h){let g=h.includes(".")?Zu(c,h):()=>c[h];if(tn(n)){const p=a[n];nt(p)&&ys(g,p)}else if(nt(n))ys(g,n.bind(c));else if(Mt(n))if(Ye(n))n.forEach(p=>Xu(p,a,c,h));else{const p=nt(n.handler)?n.handler.bind(c):a[n.handler];nt(p)&&ys(g,p,n)}}function zu(n){const a=n.type,{mixins:c,extends:h}=a,{mixins:g,optionsCache:p,config:{optionMergeStrategies:w}}=n.appContext,A=p.get(a);let E;return A?E=A:!g.length&&!c&&!h?E=a:(E={},g.length&&g.forEach(b=>Wo(E,b,w,!0)),Wo(E,a,w)),Mt(a)&&p.set(a,E),E}function Wo(n,a,c,h=!1){const{mixins:g,extends:p}=a;p&&Wo(n,p,c,!0),g&&g.forEach(w=>Wo(n,w,c,!0));for(const w in a)if(!(h&&w==="expose")){const A=r0[w]||c&&c[w];n[w]=A?A(n[w],a[w]):a[w]}return n}const r0={data:Kl,props:Xl,emits:Xl,methods:Gs,computed:Gs,beforeCreate:Fn,created:Fn,beforeMount:Fn,mounted:Fn,beforeUpdate:Fn,updated:Fn,beforeDestroy:Fn,beforeUnmount:Fn,destroyed:Fn,unmounted:Fn,activated:Fn,deactivated:Fn,errorCaptured:Fn,serverPrefetch:Fn,components:Gs,directives:Gs,watch:s0,provide:Kl,inject:i0};function Kl(n,a){return a?n?function(){return xn(nt(n)?n.call(this,this):n,nt(a)?a.call(this,this):a)}:a:n}function i0(n,a){return Gs(qa(n),qa(a))}function qa(n){if(Ye(n)){const a={};for(let c=0;c<n.length;c++)a[n[c]]=n[c];return a}return n}function Fn(n,a){return n?[...new Set([].concat(n,a))]:a}function Gs(n,a){return n?xn(Object.create(null),n,a):a}function Xl(n,a){return n?Ye(n)&&Ye(a)?[...new Set([...n,...a])]:xn(Object.create(null),Wl(n),Wl(a??{})):a}function s0(n,a){if(!n)return a;if(!a)return n;const c=xn(Object.create(null),n);for(const h in a)c[h]=Fn(n[h],a[h]);return c}function Yu(){return{app:null,config:{isNativeTag:Zc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let o0=0;function a0(n,a){return function(h,g=null){nt(h)||(h=xn({},h)),g!=null&&!Mt(g)&&(g=null);const p=Yu(),w=new WeakSet,A=[];let E=!1;const b=p.app={_uid:o0++,_component:h,_props:g,_container:null,_context:p,_instance:null,version:W0,get config(){return p.config},set config(_){},use(_,...S){return w.has(_)||(_&&nt(_.install)?(w.add(_),_.install(b,...S)):nt(_)&&(w.add(_),_(b,...S))),b},mixin(_){return p.mixins.includes(_)||p.mixins.push(_),b},component(_,S){return S?(p.components[_]=S,b):p.components[_]},directive(_,S){return S?(p.directives[_]=S,b):p.directives[_]},mount(_,S,k){if(!E){const U=b._ceVNode||qt(h,g);return U.appContext=p,k===!0?k="svg":k===!1&&(k=void 0),n(U,_,k),E=!0,b._container=_,_.__vue_app__=b,ga(U.component)}},onUnmount(_){A.push(_)},unmount(){E&&(_r(A,b._instance,16),n(null,b._container),delete b._container.__vue_app__)},provide(_,S){return p.provides[_]=S,b},runWithContext(_){const S=ji;ji=b;try{return _()}finally{ji=S}}};return b}}let ji=null;function Po(n,a){if(Nn){let c=Nn.provides;const h=Nn.parent&&Nn.parent.provides;h===c&&(c=Nn.provides=Object.create(h)),c[n]=a}}function hr(n,a,c=!1){const h=da();if(h||ji){let g=ji?ji._context.provides:h?h.parent==null||h.ce?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:void 0;if(g&&n in g)return g[n];if(arguments.length>1)return c&&nt(a)?a.call(h&&h.proxy):a}}function l0(){return!!(da()||ji)}const c0=Symbol.for("v-scx"),u0=()=>hr(c0);function ys(n,a,c){return qu(n,a,c)}function qu(n,a,c=Bt){const{immediate:h,deep:g,flush:p,once:w}=c,A=xn({},c),E=a&&h||!a&&p!=="post";let b;if(io){if(p==="sync"){const U=u0();b=U.__watcherHandles||(U.__watcherHandles=[])}else if(!E){const U=()=>{};return U.stop=Vr,U.resume=Vr,U.pause=Vr,U}}const _=Nn;A.call=(U,se,ee)=>_r(U,_,se,ee);let S=!1;p==="post"?A.scheduler=U=>{tr(U,_&&_.suspense)}:p!=="sync"&&(S=!0,A.scheduler=(U,se)=>{se?U():Cl(U)}),A.augmentJob=U=>{a&&(U.flags|=4),S&&(U.flags|=2,_&&(U.id=_.uid,U.i=_))};const k=L1(n,a,A);return io&&(b?b.push(k):E&&k()),k}function f0(n,a,c){const h=this.proxy,g=tn(n)?n.includes(".")?Zu(h,n):()=>h[n]:n.bind(h,h);let p;nt(a)?p=a:(p=a.handler,c=a);const w=uo(this),A=qu(g,p.bind(h),c);return w(),A}function Zu(n,a){const c=a.split(".");return()=>{let h=n;for(let g=0;g<c.length&&h;g++)h=h[c[g]];return h}}const h0=(n,a)=>a==="modelValue"||a==="model-value"?n.modelModifiers:n[`${a}Modifiers`]||n[`${gr(a)}Modifiers`]||n[`${vi(a)}Modifiers`];function d0(n,a,...c){if(n.isUnmounted)return;const h=n.vnode.props||Bt;let g=c;const p=a.startsWith("update:"),w=p&&h0(h,a.slice(7));w&&(w.trim&&(g=c.map(_=>tn(_)?_.trim():_)),w.number&&(g=c.map(na)));let A,E=h[A=Ia(a)]||h[A=Ia(gr(a))];!E&&p&&(E=h[A=Ia(vi(a))]),E&&_r(E,n,6,g);const b=h[A+"Once"];if(b){if(!n.emitted)n.emitted={};else if(n.emitted[A])return;n.emitted[A]=!0,_r(b,n,6,g)}}const g0=new WeakMap;function Qu(n,a,c=!1){const h=c?g0:a.emitsCache,g=h.get(n);if(g!==void 0)return g;const p=n.emits;let w={},A=!1;if(!nt(n)){const E=b=>{const _=Qu(b,a,!0);_&&(A=!0,xn(w,_))};!c&&a.mixins.length&&a.mixins.forEach(E),n.extends&&E(n.extends),n.mixins&&n.mixins.forEach(E)}return!p&&!A?(Mt(n)&&h.set(n,null),null):(Ye(p)?p.forEach(E=>w[E]=null):xn(w,p),Mt(n)&&h.set(n,w),w)}function fa(n,a){return!n||!Jo(a)?!1:(a=a.slice(2).replace(/Once$/,""),Rt(n,a[0].toLowerCase()+a.slice(1))||Rt(n,vi(a))||Rt(n,a))}function zl(n){const{type:a,vnode:c,proxy:h,withProxy:g,propsOptions:[p],slots:w,attrs:A,emit:E,render:b,renderCache:_,props:S,data:k,setupState:U,ctx:se,inheritAttrs:ee}=n,me=Ho(n);let ye,fe;try{if(c.shapeFlag&4){const J=g||h,Fe=J;ye=Ur(b.call(Fe,J,_,S,U,k,se)),fe=A}else{const J=a;ye=Ur(J.length>1?J(S,{attrs:A,slots:w,emit:E}):J(S,null)),fe=a.props?A:p0(A)}}catch(J){qs.length=0,oa(J,n,1),ye=qt(Hn)}let ae=ye;if(fe&&ee!==!1){const J=Object.keys(fe),{shapeFlag:Fe}=ae;J.length&&Fe&7&&(p&&J.some(dl)&&(fe=x0(fe,p)),ae=Ei(ae,fe,!1,!0))}return c.dirs&&(ae=Ei(ae,null,!1,!0),ae.dirs=ae.dirs?ae.dirs.concat(c.dirs):c.dirs),c.transition&&Xi(ae,c.transition),ye=ae,Ho(me),ye}const p0=n=>{let a;for(const c in n)(c==="class"||c==="style"||Jo(c))&&((a||(a={}))[c]=n[c]);return a},x0=(n,a)=>{const c={};for(const h in n)(!dl(h)||!(h.slice(9)in a))&&(c[h]=n[h]);return c};function m0(n,a,c){const{props:h,children:g,component:p}=n,{props:w,children:A,patchFlag:E}=a,b=p.emitsOptions;if(a.dirs||a.transition)return!0;if(c&&E>=0){if(E&1024)return!0;if(E&16)return h?Yl(h,w,b):!!w;if(E&8){const _=a.dynamicProps;for(let S=0;S<_.length;S++){const k=_[S];if(w[k]!==h[k]&&!fa(b,k))return!0}}}else return(g||A)&&(!A||!A.$stable)?!0:h===w?!1:h?w?Yl(h,w,b):!0:!!w;return!1}function Yl(n,a,c){const h=Object.keys(a);if(h.length!==Object.keys(n).length)return!0;for(let g=0;g<h.length;g++){const p=h[g];if(a[p]!==n[p]&&!fa(c,p))return!0}return!1}function w0({vnode:n,parent:a},c){for(;a;){const h=a.subTree;if(h.suspense&&h.suspense.activeBranch===n&&(h.el=n.el),h===n)(n=a.vnode).el=c,a=a.parent;else break}}const Ju={},$u=()=>Object.create(Ju),ef=n=>Object.getPrototypeOf(n)===Ju;function y0(n,a,c,h=!1){const g={},p=$u();n.propsDefaults=Object.create(null),tf(n,a,g,p);for(const w in n.propsOptions[0])w in g||(g[w]=void 0);c?n.props=h?g:Au(g):n.type.props?n.props=g:n.props=p,n.attrs=p}function b0(n,a,c,h){const{props:g,attrs:p,vnode:{patchFlag:w}}=n,A=mt(g),[E]=n.propsOptions;let b=!1;if((h||w>0)&&!(w&16)){if(w&8){const _=n.vnode.dynamicProps;for(let S=0;S<_.length;S++){let k=_[S];if(fa(n.emitsOptions,k))continue;const U=a[k];if(E)if(Rt(p,k))U!==p[k]&&(p[k]=U,b=!0);else{const se=gr(k);g[se]=Za(E,A,se,U,n,!1)}else U!==p[k]&&(p[k]=U,b=!0)}}}else{tf(n,a,g,p)&&(b=!0);let _;for(const S in A)(!a||!Rt(a,S)&&((_=vi(S))===S||!Rt(a,_)))&&(E?c&&(c[S]!==void 0||c[_]!==void 0)&&(g[S]=Za(E,A,S,void 0,n,!0)):delete g[S]);if(p!==A)for(const S in p)(!a||!Rt(a,S))&&(delete p[S],b=!0)}b&&ei(n.attrs,"set","")}function tf(n,a,c,h){const[g,p]=n.propsOptions;let w=!1,A;if(a)for(let E in a){if(Ws(E))continue;const b=a[E];let _;g&&Rt(g,_=gr(E))?!p||!p.includes(_)?c[_]=b:(A||(A={}))[_]=b:fa(n.emitsOptions,E)||(!(E in h)||b!==h[E])&&(h[E]=b,w=!0)}if(p){const E=mt(c),b=A||Bt;for(let _=0;_<p.length;_++){const S=p[_];c[S]=Za(g,E,S,b[S],n,!Rt(b,S))}}return w}function Za(n,a,c,h,g,p){const w=n[c];if(w!=null){const A=Rt(w,"default");if(A&&h===void 0){const E=w.default;if(w.type!==Function&&!w.skipFactory&&nt(E)){const{propsDefaults:b}=g;if(c in b)h=b[c];else{const _=uo(g);h=b[c]=E.call(null,a),_()}}else h=E;g.ce&&g.ce._setProp(c,h)}w[0]&&(p&&!A?h=!1:w[1]&&(h===""||h===vi(c))&&(h=!0))}return h}const A0=new WeakMap;function nf(n,a,c=!1){const h=c?A0:a.propsCache,g=h.get(n);if(g)return g;const p=n.props,w={},A=[];let E=!1;if(!nt(n)){const _=S=>{E=!0;const[k,U]=nf(S,a,!0);xn(w,k),U&&A.push(...U)};!c&&a.mixins.length&&a.mixins.forEach(_),n.extends&&_(n.extends),n.mixins&&n.mixins.forEach(_)}if(!p&&!E)return Mt(n)&&h.set(n,xs),xs;if(Ye(p))for(let _=0;_<p.length;_++){const S=gr(p[_]);ql(S)&&(w[S]=Bt)}else if(p)for(const _ in p){const S=gr(_);if(ql(S)){const k=p[_],U=w[S]=Ye(k)||nt(k)?{type:k}:xn({},k),se=U.type;let ee=!1,me=!0;if(Ye(se))for(let ye=0;ye<se.length;++ye){const fe=se[ye],ae=nt(fe)&&fe.name;if(ae==="Boolean"){ee=!0;break}else ae==="String"&&(me=!1)}else ee=nt(se)&&se.name==="Boolean";U[0]=ee,U[1]=me,(ee||Rt(U,"default"))&&A.push(S)}}const b=[w,A];return Mt(n)&&h.set(n,b),b}function ql(n){return n[0]!=="$"&&!Ws(n)}const _l=n=>n==="_"||n==="_ctx"||n==="$stable",Il=n=>Ye(n)?n.map(Ur):[Ur(n)],E0=(n,a,c)=>{if(a._n)return a;const h=Fi((...g)=>Il(a(...g)),c);return h._c=!1,h},rf=(n,a,c)=>{const h=n._ctx;for(const g in n){if(_l(g))continue;const p=n[g];if(nt(p))a[g]=E0(g,p,h);else if(p!=null){const w=Il(p);a[g]=()=>w}}},sf=(n,a)=>{const c=Il(a);n.slots.default=()=>c},of=(n,a,c)=>{for(const h in a)(c||!_l(h))&&(n[h]=a[h])},C0=(n,a,c)=>{const h=n.slots=$u();if(n.vnode.shapeFlag&32){const g=a._;g?(of(h,a,c),c&&eu(h,"_",g,!0)):rf(a,h)}else a&&sf(n,a)},v0=(n,a,c)=>{const{vnode:h,slots:g}=n;let p=!0,w=Bt;if(h.shapeFlag&32){const A=a._;A?c&&A===1?p=!1:of(g,a,c):(p=!a.$stable,rf(a,g)),w=a}else a&&(sf(n,a),w={default:1});if(p)for(const A in g)!_l(A)&&w[A]==null&&delete g[A]},tr=O0;function _0(n){return I0(n)}function I0(n,a){const c=ra();c.__VUE__=!0;const{insert:h,remove:g,patchProp:p,createElement:w,createText:A,createComment:E,setText:b,setElementText:_,parentNode:S,nextSibling:k,setScopeId:U=Vr,insertStaticContent:se}=n,ee=(M,B,W,re=null,ce=null,te=null,de=void 0,le=null,we=!!B.dynamicChildren)=>{if(M===B)return;M&&!Ui(M,B)&&(re=oe(M),bt(M,ce,te,!0),M=null),B.patchFlag===-2&&(we=!1,B.dynamicChildren=null);const{type:j,ref:He,shapeFlag:Te}=B;switch(j){case ha:me(M,B,W,re);break;case Hn:ye(M,B,W,re);break;case Bo:M==null&&fe(B,W,re,de);break;case zn:$(M,B,W,re,ce,te,de,le,we);break;default:Te&1?Fe(M,B,W,re,ce,te,de,le,we):Te&6?Oe(M,B,W,re,ce,te,de,le,we):(Te&64||Te&128)&&j.process(M,B,W,re,ce,te,de,le,we,Ue)}He!=null&&ce?Xs(He,M&&M.ref,te,B||M,!B):He==null&&M&&M.ref!=null&&Xs(M.ref,null,te,M,!0)},me=(M,B,W,re)=>{if(M==null)h(B.el=A(B.children),W,re);else{const ce=B.el=M.el;B.children!==M.children&&b(ce,B.children)}},ye=(M,B,W,re)=>{M==null?h(B.el=E(B.children||""),W,re):B.el=M.el},fe=(M,B,W,re)=>{[M.el,M.anchor]=se(M.children,B,W,re,M.el,M.anchor)},ae=({el:M,anchor:B},W,re)=>{let ce;for(;M&&M!==B;)ce=k(M),h(M,W,re),M=ce;h(B,W,re)},J=({el:M,anchor:B})=>{let W;for(;M&&M!==B;)W=k(M),g(M),M=W;g(B)},Fe=(M,B,W,re,ce,te,de,le,we)=>{if(B.type==="svg"?de="svg":B.type==="math"&&(de="mathml"),M==null)ve(B,W,re,ce,te,de,le,we);else{const j=M.el&&M.el._isVueCE?M.el:null;try{j&&j._beginPatch(),V(M,B,ce,te,de,le,we)}finally{j&&j._endPatch()}}},ve=(M,B,W,re,ce,te,de,le)=>{let we,j;const{props:He,shapeFlag:Te,transition:Le,dirs:je}=M;if(we=M.el=w(M.type,te,He&&He.is,He),Te&8?_(we,M.children):Te&16&&Q(M.children,we,null,re,ce,Ma(M,te),de,le),je&&Pi(M,null,re,"created"),K(we,M,M.scopeId,de,re),He){for(const ht in He)ht!=="value"&&!Ws(ht)&&p(we,ht,null,He[ht],te,re);"value"in He&&p(we,"value",null,He.value,te),(j=He.onVnodeBeforeMount)&&kr(j,re,M)}je&&Pi(M,null,re,"beforeMount");const ze=S0(ce,Le);ze&&Le.beforeEnter(we),h(we,B,W),((j=He&&He.onVnodeMounted)||ze||je)&&tr(()=>{j&&kr(j,re,M),ze&&Le.enter(we),je&&Pi(M,null,re,"mounted")},ce)},K=(M,B,W,re,ce)=>{if(W&&U(M,W),re)for(let te=0;te<re.length;te++)U(M,re[te]);if(ce){let te=ce.subTree;if(B===te||cf(te.type)&&(te.ssContent===B||te.ssFallback===B)){const de=ce.vnode;K(M,de,de.scopeId,de.slotScopeIds,ce.parent)}}},Q=(M,B,W,re,ce,te,de,le,we=0)=>{for(let j=we;j<M.length;j++){const He=M[j]=le?wi(M[j]):Ur(M[j]);ee(null,He,B,W,re,ce,te,de,le)}},V=(M,B,W,re,ce,te,de)=>{const le=B.el=M.el;let{patchFlag:we,dynamicChildren:j,dirs:He}=B;we|=M.patchFlag&16;const Te=M.props||Bt,Le=B.props||Bt;let je;if(W&&Bi(W,!1),(je=Le.onVnodeBeforeUpdate)&&kr(je,W,B,M),He&&Pi(B,M,W,"beforeUpdate"),W&&Bi(W,!0),(Te.innerHTML&&Le.innerHTML==null||Te.textContent&&Le.textContent==null)&&_(le,""),j?he(M.dynamicChildren,j,le,W,re,Ma(B,ce),te):de||et(M,B,le,null,W,re,Ma(B,ce),te,!1),we>0){if(we&16)Ne(le,Te,Le,W,ce);else if(we&2&&Te.class!==Le.class&&p(le,"class",null,Le.class,ce),we&4&&p(le,"style",Te.style,Le.style,ce),we&8){const ze=B.dynamicProps;for(let ht=0;ht<ze.length;ht++){const it=ze[ht],dt=Te[it],rn=Le[it];(rn!==dt||it==="value")&&p(le,it,dt,rn,ce,W)}}we&1&&M.children!==B.children&&_(le,B.children)}else!de&&j==null&&Ne(le,Te,Le,W,ce);((je=Le.onVnodeUpdated)||He)&&tr(()=>{je&&kr(je,W,B,M),He&&Pi(B,M,W,"updated")},re)},he=(M,B,W,re,ce,te,de)=>{for(let le=0;le<B.length;le++){const we=M[le],j=B[le],He=we.el&&(we.type===zn||!Ui(we,j)||we.shapeFlag&198)?S(we.el):W;ee(we,j,He,null,re,ce,te,de,!0)}},Ne=(M,B,W,re,ce)=>{if(B!==W){if(B!==Bt)for(const te in B)!Ws(te)&&!(te in W)&&p(M,te,B[te],null,ce,re);for(const te in W){if(Ws(te))continue;const de=W[te],le=B[te];de!==le&&te!=="value"&&p(M,te,le,de,ce,re)}"value"in W&&p(M,"value",B.value,W.value,ce)}},$=(M,B,W,re,ce,te,de,le,we)=>{const j=B.el=M?M.el:A(""),He=B.anchor=M?M.anchor:A("");let{patchFlag:Te,dynamicChildren:Le,slotScopeIds:je}=B;je&&(le=le?le.concat(je):je),M==null?(h(j,W,re),h(He,W,re),Q(B.children||[],W,He,ce,te,de,le,we)):Te>0&&Te&64&&Le&&M.dynamicChildren?(he(M.dynamicChildren,Le,W,ce,te,de,le),(B.key!=null||ce&&B===ce.subTree)&&af(M,B,!0)):et(M,B,W,He,ce,te,de,le,we)},Oe=(M,B,W,re,ce,te,de,le,we)=>{B.slotScopeIds=le,M==null?B.shapeFlag&512?ce.ctx.activate(B,W,re,de,we):Je(B,W,re,ce,te,de,we):Z(M,B,we)},Je=(M,B,W,re,ce,te,de)=>{const le=M.component=k0(M,re,ce);if(la(M)&&(le.ctx.renderer=Ue),L0(le,!1,de),le.asyncDep){if(ce&&ce.registerDep(le,qe,de),!M.el){const we=le.subTree=qt(Hn);ye(null,we,B,W),M.placeholder=we.el}}else qe(le,M,B,W,ce,te,de)},Z=(M,B,W)=>{const re=B.component=M.component;if(m0(M,B,W))if(re.asyncDep&&!re.asyncResolved){_e(re,B,W);return}else re.next=B,re.update();else B.el=M.el,re.vnode=B},qe=(M,B,W,re,ce,te,de)=>{const le=()=>{if(M.isMounted){let{next:Te,bu:Le,u:je,parent:ze,vnode:ht}=M;{const cn=lf(M);if(cn){Te&&(Te.el=ht.el,_e(M,Te,de)),cn.asyncDep.then(()=>{M.isUnmounted||le()});return}}let it=Te,dt;Bi(M,!1),Te?(Te.el=ht.el,_e(M,Te,de)):Te=ht,Le&&Mo(Le),(dt=Te.props&&Te.props.onVnodeBeforeUpdate)&&kr(dt,ze,Te,ht),Bi(M,!0);const rn=zl(M),ln=M.subTree;M.subTree=rn,ee(ln,rn,S(ln.el),oe(ln),M,ce,te),Te.el=rn.el,it===null&&w0(M,rn.el),je&&tr(je,ce),(dt=Te.props&&Te.props.onVnodeUpdated)&&tr(()=>kr(dt,ze,Te,ht),ce)}else{let Te;const{el:Le,props:je}=B,{bm:ze,m:ht,parent:it,root:dt,type:rn}=M,ln=zs(B);Bi(M,!1),ze&&Mo(ze),!ln&&(Te=je&&je.onVnodeBeforeMount)&&kr(Te,it,B),Bi(M,!0);{dt.ce&&dt.ce._def.shadowRoot!==!1&&dt.ce._injectChildStyle(rn);const cn=M.subTree=zl(M);ee(null,cn,W,re,M,ce,te),B.el=cn.el}if(ht&&tr(ht,ce),!ln&&(Te=je&&je.onVnodeMounted)){const cn=B;tr(()=>kr(Te,it,cn),ce)}(B.shapeFlag&256||it&&zs(it.vnode)&&it.vnode.shapeFlag&256)&&M.a&&tr(M.a,ce),M.isMounted=!0,B=W=re=null}};M.scope.on();const we=M.effect=new au(le);M.scope.off();const j=M.update=we.run.bind(we),He=M.job=we.runIfDirty.bind(we);He.i=M,He.id=M.uid,we.scheduler=()=>Cl(He),Bi(M,!0),j()},_e=(M,B,W)=>{B.component=M;const re=M.vnode.props;M.vnode=B,M.next=null,b0(M,B.props,re,W),v0(M,B.children,W),ii(),Ul(M),si()},et=(M,B,W,re,ce,te,de,le,we=!1)=>{const j=M&&M.children,He=M?M.shapeFlag:0,Te=B.children,{patchFlag:Le,shapeFlag:je}=B;if(Le>0){if(Le&128){Pt(j,Te,W,re,ce,te,de,le,we);return}else if(Le&256){Ut(j,Te,W,re,ce,te,de,le,we);return}}je&8?(He&16&&Me(j,ce,te),Te!==j&&_(W,Te)):He&16?je&16?Pt(j,Te,W,re,ce,te,de,le,we):Me(j,ce,te,!0):(He&8&&_(W,""),je&16&&Q(Te,W,re,ce,te,de,le,we))},Ut=(M,B,W,re,ce,te,de,le,we)=>{M=M||xs,B=B||xs;const j=M.length,He=B.length,Te=Math.min(j,He);let Le;for(Le=0;Le<Te;Le++){const je=B[Le]=we?wi(B[Le]):Ur(B[Le]);ee(M[Le],je,W,null,ce,te,de,le,we)}j>He?Me(M,ce,te,!0,!1,Te):Q(B,W,re,ce,te,de,le,we,Te)},Pt=(M,B,W,re,ce,te,de,le,we)=>{let j=0;const He=B.length;let Te=M.length-1,Le=He-1;for(;j<=Te&&j<=Le;){const je=M[j],ze=B[j]=we?wi(B[j]):Ur(B[j]);if(Ui(je,ze))ee(je,ze,W,null,ce,te,de,le,we);else break;j++}for(;j<=Te&&j<=Le;){const je=M[Te],ze=B[Le]=we?wi(B[Le]):Ur(B[Le]);if(Ui(je,ze))ee(je,ze,W,null,ce,te,de,le,we);else break;Te--,Le--}if(j>Te){if(j<=Le){const je=Le+1,ze=je<He?B[je].el:re;for(;j<=Le;)ee(null,B[j]=we?wi(B[j]):Ur(B[j]),W,ze,ce,te,de,le,we),j++}}else if(j>Le)for(;j<=Te;)bt(M[j],ce,te,!0),j++;else{const je=j,ze=j,ht=new Map;for(j=ze;j<=Le;j++){const st=B[j]=we?wi(B[j]):Ur(B[j]);st.key!=null&&ht.set(st.key,j)}let it,dt=0;const rn=Le-ze+1;let ln=!1,cn=0;const It=new Array(rn);for(j=0;j<rn;j++)It[j]=0;for(j=je;j<=Te;j++){const st=M[j];if(dt>=rn){bt(st,ce,te,!0);continue}let xe;if(st.key!=null)xe=ht.get(st.key);else for(it=ze;it<=Le;it++)if(It[it-ze]===0&&Ui(st,B[it])){xe=it;break}xe===void 0?bt(st,ce,te,!0):(It[xe-ze]=j+1,xe>=cn?cn=xe:ln=!0,ee(st,B[xe],W,null,ce,te,de,le,we),dt++)}const be=ln?T0(It):xs;for(it=be.length-1,j=rn-1;j>=0;j--){const st=ze+j,xe=B[st],St=B[st+1],vn=st+1<He?St.el||St.placeholder:re;It[j]===0?ee(null,xe,W,vn,ce,te,de,le,we):ln&&(it<0||j!==be[it]?yn(xe,W,vn,2):it--)}}},yn=(M,B,W,re,ce=null)=>{const{el:te,type:de,transition:le,children:we,shapeFlag:j}=M;if(j&6){yn(M.component.subTree,B,W,re);return}if(j&128){M.suspense.move(B,W,re);return}if(j&64){de.move(M,B,W,Ue);return}if(de===zn){h(te,B,W);for(let Te=0;Te<we.length;Te++)yn(we[Te],B,W,re);h(M.anchor,B,W);return}if(de===Bo){ae(M,B,W);return}if(re!==2&&j&1&&le)if(re===0)le.beforeEnter(te),h(te,B,W),tr(()=>le.enter(te),ce);else{const{leave:Te,delayLeave:Le,afterLeave:je}=le,ze=()=>{M.ctx.isUnmounted?g(te):h(te,B,W)},ht=()=>{te._isLeaving&&te[$r](!0),Te(te,()=>{ze(),je&&je()})};Le?Le(te,ze,ht):ht()}else h(te,B,W)},bt=(M,B,W,re=!1,ce=!1)=>{const{type:te,props:de,ref:le,children:we,dynamicChildren:j,shapeFlag:He,patchFlag:Te,dirs:Le,cacheIndex:je}=M;if(Te===-2&&(ce=!1),le!=null&&(ii(),Xs(le,null,W,M,!0),si()),je!=null&&(B.renderCache[je]=void 0),He&256){B.ctx.deactivate(M);return}const ze=He&1&&Le,ht=!zs(M);let it;if(ht&&(it=de&&de.onVnodeBeforeUnmount)&&kr(it,B,M),He&6)Cn(M.component,W,re);else{if(He&128){M.suspense.unmount(W,re);return}ze&&Pi(M,null,B,"beforeUnmount"),He&64?M.type.remove(M,B,W,Ue,re):j&&!j.hasOnce&&(te!==zn||Te>0&&Te&64)?Me(j,B,W,!1,!0):(te===zn&&Te&384||!ce&&He&16)&&Me(we,B,W),re&&nn(M)}(ht&&(it=de&&de.onVnodeUnmounted)||ze)&&tr(()=>{it&&kr(it,B,M),ze&&Pi(M,null,B,"unmounted")},W)},nn=M=>{const{type:B,el:W,anchor:re,transition:ce}=M;if(B===zn){Vt(W,re);return}if(B===Bo){J(M);return}const te=()=>{g(W),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(M.shapeFlag&1&&ce&&!ce.persisted){const{leave:de,delayLeave:le}=ce,we=()=>de(W,te);le?le(M.el,te,we):we()}else te()},Vt=(M,B)=>{let W;for(;M!==B;)W=k(M),g(M),M=W;g(B)},Cn=(M,B,W)=>{const{bum:re,scope:ce,job:te,subTree:de,um:le,m:we,a:j}=M;Zl(we),Zl(j),re&&Mo(re),ce.stop(),te&&(te.flags|=8,bt(de,M,B,W)),le&&tr(le,B),tr(()=>{M.isUnmounted=!0},B)},Me=(M,B,W,re=!1,ce=!1,te=0)=>{for(let de=te;de<M.length;de++)bt(M[de],B,W,re,ce)},oe=M=>{if(M.shapeFlag&6)return oe(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const B=k(M.anchor||M.el),W=B&&B[H1];return W?k(W):B};let Ce=!1;const ne=(M,B,W)=>{M==null?B._vnode&&bt(B._vnode,null,null,!0):ee(B._vnode||null,M,B,null,null,null,W),B._vnode=M,Ce||(Ce=!0,Ul(),Iu(),Ce=!1)},Ue={p:ee,um:bt,m:yn,r:nn,mt:Je,mc:Q,pc:et,pbc:he,n:oe,o:n};return{render:ne,hydrate:void 0,createApp:a0(ne)}}function Ma({type:n,props:a},c){return c==="svg"&&n==="foreignObject"||c==="mathml"&&n==="annotation-xml"&&a&&a.encoding&&a.encoding.includes("html")?void 0:c}function Bi({effect:n,job:a},c){c?(n.flags|=32,a.flags|=4):(n.flags&=-33,a.flags&=-5)}function S0(n,a){return(!n||n&&!n.pendingBranch)&&a&&!a.persisted}function af(n,a,c=!1){const h=n.children,g=a.children;if(Ye(h)&&Ye(g))for(let p=0;p<h.length;p++){const w=h[p];let A=g[p];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=g[p]=wi(g[p]),A.el=w.el),!c&&A.patchFlag!==-2&&af(w,A)),A.type===ha&&A.patchFlag!==-1&&(A.el=w.el),A.type===Hn&&!A.el&&(A.el=w.el)}}function T0(n){const a=n.slice(),c=[0];let h,g,p,w,A;const E=n.length;for(h=0;h<E;h++){const b=n[h];if(b!==0){if(g=c[c.length-1],n[g]<b){a[h]=g,c.push(h);continue}for(p=0,w=c.length-1;p<w;)A=p+w>>1,n[c[A]]<b?p=A+1:w=A;b<n[c[p]]&&(p>0&&(a[h]=c[p-1]),c[p]=h)}}for(p=c.length,w=c[p-1];p-- >0;)c[p]=w,w=a[w];return c}function lf(n){const a=n.subTree.component;if(a)return a.asyncDep&&!a.asyncResolved?a:lf(a)}function Zl(n){if(n)for(let a=0;a<n.length;a++)n[a].flags|=8}const cf=n=>n.__isSuspense;function O0(n,a){a&&a.pendingBranch?Ye(n)?a.effects.push(...n):a.effects.push(n):V1(n)}const zn=Symbol.for("v-fgt"),ha=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),Bo=Symbol.for("v-stc"),qs=[];let ir=null;function xt(n=!1){qs.push(ir=n?null:[])}function R0(){qs.pop(),ir=qs[qs.length-1]||null}let ro=1;function jo(n,a=!1){ro+=n,n<0&&ir&&a&&(ir.hasOnce=!0)}function uf(n){return n.dynamicChildren=ro>0?ir||xs:null,R0(),ro>0&&ir&&ir.push(n),n}function _t(n,a,c,h,g,p){return uf(Pe(n,a,c,h,g,p,!0))}function Qa(n,a,c,h,g){return uf(qt(n,a,c,h,g,!0))}function Ko(n){return n?n.__v_isVNode===!0:!1}function Ui(n,a){return n.type===a.type&&n.key===a.key}const ff=({key:n})=>n??null,ko=({ref:n,ref_key:a,ref_for:c})=>(typeof n=="number"&&(n=""+n),n!=null?tn(n)||en(n)||nt(n)?{i:rr,r:n,k:a,f:!!c}:n:null);function Pe(n,a=null,c=null,h=0,g=null,p=n===zn?0:1,w=!1,A=!1){const E={__v_isVNode:!0,__v_skip:!0,type:n,props:a,key:a&&ff(a),ref:a&&ko(a),scopeId:Tu,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:h,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:rr};return A?(Tl(E,c),p&128&&n.normalize(E)):c&&(E.shapeFlag|=tn(c)?8:16),ro>0&&!w&&ir&&(E.patchFlag>0||p&6)&&E.patchFlag!==32&&ir.push(E),E}const qt=N0;function N0(n,a=null,c=null,h=0,g=null,p=!1){if((!n||n===Wu)&&(n=Hn),Ko(n)){const A=Ei(n,a,!0);return c&&Tl(A,c),ro>0&&!p&&ir&&(A.shapeFlag&6?ir[ir.indexOf(n)]=A:ir.push(A)),A.patchFlag=-2,A}if(G0(n)&&(n=n.__vccOpts),a){a=D0(a);let{class:A,style:E}=a;A&&!tn(A)&&(a.class=Ai(A)),Mt(E)&&(sa(E)&&!Ye(E)&&(E=xn({},E)),a.style=Js(E))}const w=tn(n)?1:cf(n)?128:Ru(n)?64:Mt(n)?4:nt(n)?2:0;return Pe(n,a,c,h,g,w,p,!0)}function D0(n){return n?sa(n)||ef(n)?xn({},n):n:null}function Ei(n,a,c=!1,h=!1){const{props:g,ref:p,patchFlag:w,children:A,transition:E}=n,b=a?M0(g||{},a):g,_={__v_isVNode:!0,__v_skip:!0,type:n.type,props:b,key:b&&ff(b),ref:a&&a.ref?c&&p?Ye(p)?p.concat(ko(a)):[p,ko(a)]:ko(a):p,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:A,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:a&&n.type!==zn?w===-1?16:w|16:w,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:E,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ei(n.ssContent),ssFallback:n.ssFallback&&Ei(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return E&&h&&Xi(_,E.clone(_)),_}function Sl(n=" ",a=0){return qt(ha,null,n,a)}function hf(n,a){const c=qt(Bo,null,n);return c.staticCount=a,c}function fr(n="",a=!1){return a?(xt(),Qa(Hn,null,n)):qt(Hn,null,n)}function Ur(n){return n==null||typeof n=="boolean"?qt(Hn):Ye(n)?qt(zn,null,n.slice()):Ko(n)?wi(n):qt(ha,null,String(n))}function wi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ei(n)}function Tl(n,a){let c=0;const{shapeFlag:h}=n;if(a==null)a=null;else if(Ye(a))c=16;else if(typeof a=="object")if(h&65){const g=a.default;g&&(g._c&&(g._d=!1),Tl(n,g()),g._c&&(g._d=!0));return}else{c=32;const g=a._;!g&&!ef(a)?a._ctx=rr:g===3&&rr&&(rr.slots._===1?a._=1:(a._=2,n.patchFlag|=1024))}else nt(a)?(a={default:a,_ctx:rr},c=32):(a=String(a),h&64?(c=16,a=[Sl(a)]):c=8);n.children=a,n.shapeFlag|=c}function M0(...n){const a={};for(let c=0;c<n.length;c++){const h=n[c];for(const g in h)if(g==="class")a.class!==h.class&&(a.class=Ai([a.class,h.class]));else if(g==="style")a.style=Js([a.style,h.style]);else if(Jo(g)){const p=a[g],w=h[g];w&&p!==w&&!(Ye(p)&&p.includes(w))&&(a[g]=p?[].concat(p,w):w)}else g!==""&&(a[g]=h[g])}return a}function kr(n,a,c,h=null){_r(n,a,7,[c,h])}const P0=Yu();let B0=0;function k0(n,a,c){const h=n.type,g=(a?a.appContext:n.appContext)||P0,p={uid:B0++,vnode:n,type:h,parent:a,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new iu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(g.provides),ids:a?a.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nf(h,g),emitsOptions:Qu(h,g),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:h.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=a?a.root:p,p.emit=d0.bind(null,p),n.ce&&n.ce(p),p}let Nn=null;const da=()=>Nn||rr;let Xo,Ja;{const n=ra(),a=(c,h)=>{let g;return(g=n[c])||(g=n[c]=[]),g.push(h),p=>{g.length>1?g.forEach(w=>w(p)):g[0](p)}};Xo=a("__VUE_INSTANCE_SETTERS__",c=>Nn=c),Ja=a("__VUE_SSR_SETTERS__",c=>io=c)}const uo=n=>{const a=Nn;return Xo(n),n.scope.on(),()=>{n.scope.off(),Xo(a)}},Ql=()=>{Nn&&Nn.scope.off(),Xo(null)};function df(n){return n.vnode.shapeFlag&4}let io=!1;function L0(n,a=!1,c=!1){a&&Ja(a);const{props:h,children:g}=n.vnode,p=df(n);y0(n,h,p,a),C0(n,g,c||a);const w=p?F0(n,a):void 0;return a&&Ja(!1),w}function F0(n,a){const c=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,e0);const{setup:h}=c;if(h){ii();const g=n.setupContext=h.length>1?V0(n):null,p=uo(n),w=lo(h,n,0,[n.props,g]),A=Qc(w);if(si(),p(),(A||n.sp)&&!zs(n)&&Lu(n),A){if(w.then(Ql,Ql),a)return w.then(E=>{Jl(n,E)}).catch(E=>{oa(E,n,0)});n.asyncDep=w}else Jl(n,w)}else gf(n)}function Jl(n,a,c){nt(a)?n.type.__ssrInlineRender?n.ssrRender=a:n.render=a:Mt(a)&&(n.setupState=Cu(a)),gf(n)}function gf(n,a,c){const h=n.type;n.render||(n.render=h.render||Vr);{const g=uo(n);ii();try{t0(n)}finally{si(),g()}}}const U0={get(n,a){return Rn(n,"get",""),n[a]}};function V0(n){const a=c=>{n.exposed=c||{}};return{attrs:new Proxy(n.attrs,U0),slots:n.slots,emit:n.emit,expose:a}}function ga(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Cu(El(n.exposed)),{get(a,c){if(c in a)return a[c];if(c in Ys)return Ys[c](n)},has(a,c){return c in a||c in Ys}})):n.proxy}function H0(n,a=!0){return nt(n)?n.displayName||n.name:n.name||a&&n.__name}function G0(n){return nt(n)&&"__vccOpts"in n}const En=(n,a)=>B1(n,a,io);function Ol(n,a,c){try{jo(-1);const h=arguments.length;return h===2?Mt(a)&&!Ye(a)?Ko(a)?qt(n,null,[a]):qt(n,a):qt(n,null,a):(h>3?c=Array.prototype.slice.call(arguments,2):h===3&&Ko(c)&&(c=[c]),qt(n,a,c))}finally{jo(1)}}const W0="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $a;const $l=typeof window<"u"&&window.trustedTypes;if($l)try{$a=$l.createPolicy("vue",{createHTML:n=>n})}catch{}const pf=$a?n=>$a.createHTML(n):n=>n,j0="http://www.w3.org/2000/svg",K0="http://www.w3.org/1998/Math/MathML",Jr=typeof document<"u"?document:null,ec=Jr&&Jr.createElement("template"),X0={insert:(n,a,c)=>{a.insertBefore(n,c||null)},remove:n=>{const a=n.parentNode;a&&a.removeChild(n)},createElement:(n,a,c,h)=>{const g=a==="svg"?Jr.createElementNS(j0,n):a==="mathml"?Jr.createElementNS(K0,n):c?Jr.createElement(n,{is:c}):Jr.createElement(n);return n==="select"&&h&&h.multiple!=null&&g.setAttribute("multiple",h.multiple),g},createText:n=>Jr.createTextNode(n),createComment:n=>Jr.createComment(n),setText:(n,a)=>{n.nodeValue=a},setElementText:(n,a)=>{n.textContent=a},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Jr.querySelector(n),setScopeId(n,a){n.setAttribute(a,"")},insertStaticContent(n,a,c,h,g,p){const w=c?c.previousSibling:a.lastChild;if(g&&(g===p||g.nextSibling))for(;a.insertBefore(g.cloneNode(!0),c),!(g===p||!(g=g.nextSibling)););else{ec.innerHTML=pf(h==="svg"?`<svg>${n}</svg>`:h==="mathml"?`<math>${n}</math>`:n);const A=ec.content;if(h==="svg"||h==="mathml"){const E=A.firstChild;for(;E.firstChild;)A.appendChild(E.firstChild);A.removeChild(E)}a.insertBefore(A,c)}return[w?w.nextSibling:a.firstChild,c?c.previousSibling:a.lastChild]}},fi="transition",Fs="animation",As=Symbol("_vtc"),xf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},mf=xn({},Du,xf),z0=n=>(n.displayName="Transition",n.props=mf,n),Oo=z0((n,{slots:a})=>Ol(W1,wf(n),a)),ki=(n,a=[])=>{Ye(n)?n.forEach(c=>c(...a)):n&&n(...a)},tc=n=>n?Ye(n)?n.some(a=>a.length>1):n.length>1:!1;function wf(n){const a={};for(const $ in n)$ in xf||(a[$]=n[$]);if(n.css===!1)return a;const{name:c="v",type:h,duration:g,enterFromClass:p=`${c}-enter-from`,enterActiveClass:w=`${c}-enter-active`,enterToClass:A=`${c}-enter-to`,appearFromClass:E=p,appearActiveClass:b=w,appearToClass:_=A,leaveFromClass:S=`${c}-leave-from`,leaveActiveClass:k=`${c}-leave-active`,leaveToClass:U=`${c}-leave-to`}=n,se=Y0(g),ee=se&&se[0],me=se&&se[1],{onBeforeEnter:ye,onEnter:fe,onEnterCancelled:ae,onLeave:J,onLeaveCancelled:Fe,onBeforeAppear:ve=ye,onAppear:K=fe,onAppearCancelled:Q=ae}=a,V=($,Oe,Je,Z)=>{$._enterCancelled=Z,gi($,Oe?_:A),gi($,Oe?b:w),Je&&Je()},he=($,Oe)=>{$._isLeaving=!1,gi($,S),gi($,U),gi($,k),Oe&&Oe()},Ne=$=>(Oe,Je)=>{const Z=$?K:fe,qe=()=>V(Oe,$,Je);ki(Z,[Oe,qe]),nc(()=>{gi(Oe,$?E:p),Lr(Oe,$?_:A),tc(Z)||rc(Oe,h,ee,qe)})};return xn(a,{onBeforeEnter($){ki(ye,[$]),Lr($,p),Lr($,w)},onBeforeAppear($){ki(ve,[$]),Lr($,E),Lr($,b)},onEnter:Ne(!1),onAppear:Ne(!0),onLeave($,Oe){$._isLeaving=!0;const Je=()=>he($,Oe);Lr($,S),$._enterCancelled?(Lr($,k),el($)):(el($),Lr($,k)),nc(()=>{$._isLeaving&&(gi($,S),Lr($,U),tc(J)||rc($,h,me,Je))}),ki(J,[$,Je])},onEnterCancelled($){V($,!1,void 0,!0),ki(ae,[$])},onAppearCancelled($){V($,!0,void 0,!0),ki(Q,[$])},onLeaveCancelled($){he($),ki(Fe,[$])}})}function Y0(n){if(n==null)return null;if(Mt(n))return[Pa(n.enter),Pa(n.leave)];{const a=Pa(n);return[a,a]}}function Pa(n){return e1(n)}function Lr(n,a){a.split(/\s+/).forEach(c=>c&&n.classList.add(c)),(n[As]||(n[As]=new Set)).add(a)}function gi(n,a){a.split(/\s+/).forEach(h=>h&&n.classList.remove(h));const c=n[As];c&&(c.delete(a),c.size||(n[As]=void 0))}function nc(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let q0=0;function rc(n,a,c,h){const g=n._endId=++q0,p=()=>{g===n._endId&&h()};if(c!=null)return setTimeout(p,c);const{type:w,timeout:A,propCount:E}=yf(n,a);if(!w)return h();const b=w+"end";let _=0;const S=()=>{n.removeEventListener(b,k),p()},k=U=>{U.target===n&&++_>=E&&S()};setTimeout(()=>{_<E&&S()},A+1),n.addEventListener(b,k)}function yf(n,a){const c=window.getComputedStyle(n),h=se=>(c[se]||"").split(", "),g=h(`${fi}Delay`),p=h(`${fi}Duration`),w=ic(g,p),A=h(`${Fs}Delay`),E=h(`${Fs}Duration`),b=ic(A,E);let _=null,S=0,k=0;a===fi?w>0&&(_=fi,S=w,k=p.length):a===Fs?b>0&&(_=Fs,S=b,k=E.length):(S=Math.max(w,b),_=S>0?w>b?fi:Fs:null,k=_?_===fi?p.length:E.length:0);const U=_===fi&&/\b(?:transform|all)(?:,|$)/.test(h(`${fi}Property`).toString());return{type:_,timeout:S,propCount:k,hasTransform:U}}function ic(n,a){for(;n.length<a.length;)n=n.concat(n);return Math.max(...a.map((c,h)=>sc(c)+sc(n[h])))}function sc(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function el(n){return(n?n.ownerDocument:document).body.offsetHeight}function Z0(n,a,c){const h=n[As];h&&(a=(a?[a,...h]:[...h]).join(" ")),a==null?n.removeAttribute("class"):c?n.setAttribute("class",a):n.className=a}const oc=Symbol("_vod"),Q0=Symbol("_vsh"),J0=Symbol(""),$0=/(?:^|;)\s*display\s*:/;function eh(n,a,c){const h=n.style,g=tn(c);let p=!1;if(c&&!g){if(a)if(tn(a))for(const w of a.split(";")){const A=w.slice(0,w.indexOf(":")).trim();c[A]==null&&Lo(h,A,"")}else for(const w in a)c[w]==null&&Lo(h,w,"");for(const w in c)w==="display"&&(p=!0),Lo(h,w,c[w])}else if(g){if(a!==c){const w=h[J0];w&&(c+=";"+w),h.cssText=c,p=$0.test(c)}}else a&&n.removeAttribute("style");oc in n&&(n[oc]=p?h.display:"",n[Q0]&&(h.display="none"))}const ac=/\s*!important$/;function Lo(n,a,c){if(Ye(c))c.forEach(h=>Lo(n,a,h));else if(c==null&&(c=""),a.startsWith("--"))n.setProperty(a,c);else{const h=th(n,a);ac.test(c)?n.setProperty(vi(h),c.replace(ac,""),"important"):n[h]=c}}const lc=["Webkit","Moz","ms"],Ba={};function th(n,a){const c=Ba[a];if(c)return c;let h=gr(a);if(h!=="filter"&&h in n)return Ba[a]=h;h=ta(h);for(let g=0;g<lc.length;g++){const p=lc[g]+h;if(p in n)return Ba[a]=p}return a}const cc="http://www.w3.org/1999/xlink";function uc(n,a,c,h,g,p=o1(a)){h&&a.startsWith("xlink:")?c==null?n.removeAttributeNS(cc,a.slice(6,a.length)):n.setAttributeNS(cc,a,c):c==null||p&&!tu(c)?n.removeAttribute(a):n.setAttribute(a,p?"":Hr(c)?String(c):c)}function fc(n,a,c,h,g){if(a==="innerHTML"||a==="textContent"){c!=null&&(n[a]=a==="innerHTML"?pf(c):c);return}const p=n.tagName;if(a==="value"&&p!=="PROGRESS"&&!p.includes("-")){const A=p==="OPTION"?n.getAttribute("value")||"":n.value,E=c==null?n.type==="checkbox"?"on":"":String(c);(A!==E||!("_value"in n))&&(n.value=E),c==null&&n.removeAttribute(a),n._value=c;return}let w=!1;if(c===""||c==null){const A=typeof n[a];A==="boolean"?c=tu(c):c==null&&A==="string"?(c="",w=!0):A==="number"&&(c=0,w=!0)}try{n[a]=c}catch{}w&&n.removeAttribute(g||a)}function ni(n,a,c,h){n.addEventListener(a,c,h)}function nh(n,a,c,h){n.removeEventListener(a,c,h)}const hc=Symbol("_vei");function rh(n,a,c,h,g=null){const p=n[hc]||(n[hc]={}),w=p[a];if(h&&w)w.value=h;else{const[A,E]=ih(a);if(h){const b=p[a]=ah(h,g);ni(n,A,b,E)}else w&&(nh(n,A,w,E),p[a]=void 0)}}const dc=/(?:Once|Passive|Capture)$/;function ih(n){let a;if(dc.test(n)){a={};let h;for(;h=n.match(dc);)n=n.slice(0,n.length-h[0].length),a[h[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):vi(n.slice(2)),a]}let ka=0;const sh=Promise.resolve(),oh=()=>ka||(sh.then(()=>ka=0),ka=Date.now());function ah(n,a){const c=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=c.attached)return;_r(lh(h,c.value),a,5,[h])};return c.value=n,c.attached=oh(),c}function lh(n,a){if(Ye(a)){const c=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{c.call(n),n._stopped=!0},a.map(h=>g=>!g._stopped&&h&&h(g))}else return a}const gc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,ch=(n,a,c,h,g,p)=>{const w=g==="svg";a==="class"?Z0(n,h,w):a==="style"?eh(n,c,h):Jo(a)?dl(a)||rh(n,a,c,h,p):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):uh(n,a,h,w))?(fc(n,a,h),!n.tagName.includes("-")&&(a==="value"||a==="checked"||a==="selected")&&uc(n,a,h,w,p,a!=="value")):n._isVueCE&&(/[A-Z]/.test(a)||!tn(h))?fc(n,gr(a),h,p,a):(a==="true-value"?n._trueValue=h:a==="false-value"&&(n._falseValue=h),uc(n,a,h,w))};function uh(n,a,c,h){if(h)return!!(a==="innerHTML"||a==="textContent"||a in n&&gc(a)&&nt(c));if(a==="spellcheck"||a==="draggable"||a==="translate"||a==="autocorrect"||a==="sandbox"&&n.tagName==="IFRAME"||a==="form"||a==="list"&&n.tagName==="INPUT"||a==="type"&&n.tagName==="TEXTAREA")return!1;if(a==="width"||a==="height"){const g=n.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return gc(a)&&tn(c)?!1:a in n}const bf=new WeakMap,Af=new WeakMap,zo=Symbol("_moveCb"),pc=Symbol("_enterCb"),fh=n=>(delete n.props.mode,n),hh=fh({name:"TransitionGroup",props:xn({},mf,{tag:String,moveClass:String}),setup(n,{slots:a}){const c=da(),h=Nu();let g,p;return Uu(()=>{if(!g.length)return;const w=n.moveClass||`${n.name||"v"}-move`;if(!xh(g[0].el,c.vnode.el,w)){g=[];return}g.forEach(dh),g.forEach(gh);const A=g.filter(ph);el(c.vnode.el),A.forEach(E=>{const b=E.el,_=b.style;Lr(b,w),_.transform=_.webkitTransform=_.transitionDuration="";const S=b[zo]=k=>{k&&k.target!==b||(!k||k.propertyName.endsWith("transform"))&&(b.removeEventListener("transitionend",S),b[zo]=null,gi(b,w))};b.addEventListener("transitionend",S)}),g=[]}),()=>{const w=mt(n),A=wf(w);let E=w.tag||zn;if(g=[],p)for(let b=0;b<p.length;b++){const _=p[b];_.el&&_.el instanceof Element&&(g.push(_),Xi(_,no(_,A,h,c)),bf.set(_,{left:_.el.offsetLeft,top:_.el.offsetTop}))}p=a.default?vl(a.default()):[];for(let b=0;b<p.length;b++){const _=p[b];_.key!=null&&Xi(_,no(_,A,h,c))}return qt(E,null,p)}}}),g2=hh;function dh(n){const a=n.el;a[zo]&&a[zo](),a[pc]&&a[pc]()}function gh(n){Af.set(n,{left:n.el.offsetLeft,top:n.el.offsetTop})}function ph(n){const a=bf.get(n),c=Af.get(n),h=a.left-c.left,g=a.top-c.top;if(h||g){const p=n.el.style;return p.transform=p.webkitTransform=`translate(${h}px,${g}px)`,p.transitionDuration="0s",n}}function xh(n,a,c){const h=n.cloneNode(),g=n[As];g&&g.forEach(A=>{A.split(/\s+/).forEach(E=>E&&h.classList.remove(E))}),c.split(/\s+/).forEach(A=>A&&h.classList.add(A)),h.style.display="none";const p=a.nodeType===1?a:a.parentNode;p.appendChild(h);const{hasTransform:w}=yf(h);return p.removeChild(h),w}const Ci=n=>{const a=n.props["onUpdate:modelValue"]||!1;return Ye(a)?c=>Mo(a,c):a};function mh(n){n.target.composing=!0}function xc(n){const a=n.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const dr=Symbol("_assign");function mc(n,a,c){return a&&(n=n.trim()),c&&(n=na(n)),n}const tl={created(n,{modifiers:{lazy:a,trim:c,number:h}},g){n[dr]=Ci(g);const p=h||g.props&&g.props.type==="number";ni(n,a?"change":"input",w=>{w.target.composing||n[dr](mc(n.value,c,p))}),(c||p)&&ni(n,"change",()=>{n.value=mc(n.value,c,p)}),a||(ni(n,"compositionstart",mh),ni(n,"compositionend",xc),ni(n,"change",xc))},mounted(n,{value:a}){n.value=a??""},beforeUpdate(n,{value:a,oldValue:c,modifiers:{lazy:h,trim:g,number:p}},w){if(n[dr]=Ci(w),n.composing)return;const A=(p||n.type==="number")&&!/^0\d/.test(n.value)?na(n.value):n.value,E=a??"";A!==E&&(document.activeElement===n&&n.type!=="range"&&(h&&a===c||g&&n.value.trim()===E)||(n.value=E))}},wh={deep:!0,created(n,a,c){n[dr]=Ci(c),ni(n,"change",()=>{const h=n._modelValue,g=Es(n),p=n.checked,w=n[dr];if(Ye(h)){const A=pl(h,g),E=A!==-1;if(p&&!E)w(h.concat(g));else if(!p&&E){const b=[...h];b.splice(A,1),w(b)}}else if(_s(h)){const A=new Set(h);p?A.add(g):A.delete(g),w(A)}else w(Cf(n,p))})},mounted:wc,beforeUpdate(n,a,c){n[dr]=Ci(c),wc(n,a,c)}};function wc(n,{value:a,oldValue:c},h){n._modelValue=a;let g;if(Ye(a))g=pl(a,h.props.value)>-1;else if(_s(a))g=a.has(h.props.value);else{if(a===c)return;g=Ki(a,Cf(n,!0))}n.checked!==g&&(n.checked=g)}const yh={created(n,{value:a},c){n.checked=Ki(a,c.props.value),n[dr]=Ci(c),ni(n,"change",()=>{n[dr](Es(n))})},beforeUpdate(n,{value:a,oldValue:c},h){n[dr]=Ci(h),a!==c&&(n.checked=Ki(a,h.props.value))}},Ef={deep:!0,created(n,{value:a,modifiers:{number:c}},h){const g=_s(a);ni(n,"change",()=>{const p=Array.prototype.filter.call(n.options,w=>w.selected).map(w=>c?na(Es(w)):Es(w));n[dr](n.multiple?g?new Set(p):p:p[0]),n._assigning=!0,aa(()=>{n._assigning=!1})}),n[dr]=Ci(h)},mounted(n,{value:a}){yc(n,a)},beforeUpdate(n,a,c){n[dr]=Ci(c)},updated(n,{value:a}){n._assigning||yc(n,a)}};function yc(n,a){const c=n.multiple,h=Ye(a);if(!(c&&!h&&!_s(a))){for(let g=0,p=n.options.length;g<p;g++){const w=n.options[g],A=Es(w);if(c)if(h){const E=typeof A;E==="string"||E==="number"?w.selected=a.some(b=>String(b)===String(A)):w.selected=pl(a,A)>-1}else w.selected=a.has(A);else if(Ki(Es(w),a)){n.selectedIndex!==g&&(n.selectedIndex=g);return}}!c&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Es(n){return"_value"in n?n._value:n.value}function Cf(n,a){const c=a?"_trueValue":"_falseValue";return c in n?n[c]:a}const p2={created(n,a,c){Ro(n,a,c,null,"created")},mounted(n,a,c){Ro(n,a,c,null,"mounted")},beforeUpdate(n,a,c,h){Ro(n,a,c,h,"beforeUpdate")},updated(n,a,c,h){Ro(n,a,c,h,"updated")}};function bh(n,a){switch(n){case"SELECT":return Ef;case"TEXTAREA":return tl;default:switch(a){case"checkbox":return wh;case"radio":return yh;default:return tl}}}function Ro(n,a,c,h,g){const w=bh(n.tagName,c.props&&c.props.type)[g];w&&w(n,a,c,h)}const Ah={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Eh=(n,a)=>{const c=n._withKeys||(n._withKeys={}),h=a.join(".");return c[h]||(c[h]=g=>{if(!("key"in g))return;const p=vi(g.key);if(a.some(w=>w===p||Ah[w]===p))return n(g)})},Ch=xn({patchProp:ch},X0);let bc;function vh(){return bc||(bc=_0(Ch))}const _h=(...n)=>{const a=vh().createApp(...n),{mount:c}=a;return a.mount=h=>{const g=Sh(h);if(!g)return;const p=a._component;!nt(p)&&!p.render&&!p.template&&(p.template=g.innerHTML),g.nodeType===1&&(g.textContent="");const w=c(g,!1,Ih(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),w},a};function Ih(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Sh(n){return tn(n)?document.querySelector(n):n}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let vf;const pa=n=>vf=n,_f=Symbol();function nl(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Zs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Zs||(Zs={}));function Th(){const n=su(!0),a=n.run(()=>Nt({}));let c=[],h=[];const g=El({install(p){pa(g),g._a=p,p.provide(_f,g),p.config.globalProperties.$pinia=g,h.forEach(w=>c.push(w)),h=[]},use(p){return this._a?c.push(p):h.push(p),this},_p:c,_a:null,_e:n,_s:new Map,state:a});return g}const If=()=>{};function Ac(n,a,c,h=If){n.push(a);const g=()=>{const p=n.indexOf(a);p>-1&&(n.splice(p,1),h())};return!c&&ou()&&l1(g),g}function fs(n,...a){n.slice().forEach(c=>{c(...a)})}const Oh=n=>n(),Ec=Symbol(),La=Symbol();function rl(n,a){n instanceof Map&&a instanceof Map?a.forEach((c,h)=>n.set(h,c)):n instanceof Set&&a instanceof Set&&a.forEach(n.add,n);for(const c in a){if(!a.hasOwnProperty(c))continue;const h=a[c],g=n[c];nl(g)&&nl(h)&&n.hasOwnProperty(c)&&!en(h)&&!ri(h)?n[c]=rl(g,h):n[c]=h}return n}const Rh=Symbol();function Nh(n){return!nl(n)||!n.hasOwnProperty(Rh)}const{assign:pi}=Object;function Dh(n){return!!(en(n)&&n.effect)}function Mh(n,a,c,h){const{state:g,actions:p,getters:w}=a,A=c.state.value[n];let E;function b(){A||(c.state.value[n]=g?g():{});const _=N1(c.state.value[n]);return pi(_,p,Object.keys(w||{}).reduce((S,k)=>(S[k]=El(En(()=>{pa(c);const U=c._s.get(n);return w[k].call(U,U)})),S),{}))}return E=Sf(n,b,a,c,h,!0),E}function Sf(n,a,c={},h,g,p){let w;const A=pi({actions:{}},c),E={deep:!0};let b,_,S=[],k=[],U;const se=h.state.value[n];!p&&!se&&(h.state.value[n]={}),Nt({});let ee;function me(Q){let V;b=_=!1,typeof Q=="function"?(Q(h.state.value[n]),V={type:Zs.patchFunction,storeId:n,events:U}):(rl(h.state.value[n],Q),V={type:Zs.patchObject,payload:Q,storeId:n,events:U});const he=ee=Symbol();aa().then(()=>{ee===he&&(b=!0)}),_=!0,fs(S,V,h.state.value[n])}const ye=p?function(){const{state:V}=c,he=V?V():{};this.$patch(Ne=>{pi(Ne,he)})}:If;function fe(){w.stop(),S=[],k=[],h._s.delete(n)}const ae=(Q,V="")=>{if(Ec in Q)return Q[La]=V,Q;const he=function(){pa(h);const Ne=Array.from(arguments),$=[],Oe=[];function Je(_e){$.push(_e)}function Z(_e){Oe.push(_e)}fs(k,{args:Ne,name:he[La],store:Fe,after:Je,onError:Z});let qe;try{qe=Q.apply(this&&this.$id===n?this:Fe,Ne)}catch(_e){throw fs(Oe,_e),_e}return qe instanceof Promise?qe.then(_e=>(fs($,_e),_e)).catch(_e=>(fs(Oe,_e),Promise.reject(_e))):(fs($,qe),qe)};return he[Ec]=!0,he[La]=V,he},J={_p:h,$id:n,$onAction:Ac.bind(null,k),$patch:me,$reset:ye,$subscribe(Q,V={}){const he=Ac(S,Q,V.detached,()=>Ne()),Ne=w.run(()=>ys(()=>h.state.value[n],$=>{(V.flush==="sync"?_:b)&&Q({storeId:n,type:Zs.direct,events:U},$)},pi({},E,V)));return he},$dispose:fe},Fe=ao(J);h._s.set(n,Fe);const K=(h._a&&h._a.runWithContext||Oh)(()=>h._e.run(()=>(w=su()).run(()=>a({action:ae}))));for(const Q in K){const V=K[Q];if(en(V)&&!Dh(V)||ri(V))p||(se&&Nh(V)&&(en(V)?V.value=se[Q]:rl(V,se[Q])),h.state.value[n][Q]=V);else if(typeof V=="function"){const he=ae(V,Q);K[Q]=he,A.actions[Q]=V}}return pi(Fe,K),pi(mt(Fe),K),Object.defineProperty(Fe,"$state",{get:()=>h.state.value[n],set:Q=>{me(V=>{pi(V,Q)})}}),h._p.forEach(Q=>{pi(Fe,w.run(()=>Q({store:Fe,app:h._a,pinia:h,options:A})))}),se&&p&&c.hydrate&&c.hydrate(Fe.$state,se),b=!0,_=!0,Fe}/*! #__NO_SIDE_EFFECTS__ */function Ph(n,a,c){let h,g;const p=typeof a=="function";h=n,g=p?c:a;function w(A,E){const b=l0();return A=A||(b?hr(_f,null):null),A&&pa(A),A=vf,A._s.has(h)||(p?Sf(h,a,g,A):Mh(h,g,A)),A._s.get(h)}return w.$id=h,w}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ds=typeof document<"u";function Tf(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Bh(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Tf(n.default)}const Ot=Object.assign;function Fa(n,a){const c={};for(const h in a){const g=a[h];c[h]=Ir(g)?g.map(n):n(g)}return c}const Qs=()=>{},Ir=Array.isArray;function Cc(n,a){const c={};for(const h in n)c[h]=h in a?a[h]:n[h];return c}const Of=/#/g,kh=/&/g,Lh=/\//g,Fh=/=/g,Uh=/\?/g,Rf=/\+/g,Vh=/%5B/g,Hh=/%5D/g,Nf=/%5E/g,Gh=/%60/g,Df=/%7B/g,Wh=/%7C/g,Mf=/%7D/g,jh=/%20/g;function Rl(n){return n==null?"":encodeURI(""+n).replace(Wh,"|").replace(Vh,"[").replace(Hh,"]")}function Kh(n){return Rl(n).replace(Df,"{").replace(Mf,"}").replace(Nf,"^")}function il(n){return Rl(n).replace(Rf,"%2B").replace(jh,"+").replace(Of,"%23").replace(kh,"%26").replace(Gh,"`").replace(Df,"{").replace(Mf,"}").replace(Nf,"^")}function Xh(n){return il(n).replace(Fh,"%3D")}function zh(n){return Rl(n).replace(Of,"%23").replace(Uh,"%3F")}function Yh(n){return zh(n).replace(Lh,"%2F")}function so(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const qh=/\/$/,Zh=n=>n.replace(qh,"");function Ua(n,a,c="/"){let h,g={},p="",w="";const A=a.indexOf("#");let E=a.indexOf("?");return E=A>=0&&E>A?-1:E,E>=0&&(h=a.slice(0,E),p=a.slice(E,A>0?A:a.length),g=n(p.slice(1))),A>=0&&(h=h||a.slice(0,A),w=a.slice(A,a.length)),h=ed(h??a,c),{fullPath:h+p+w,path:h,query:g,hash:so(w)}}function Qh(n,a){const c=a.query?n(a.query):"";return a.path+(c&&"?")+c+(a.hash||"")}function vc(n,a){return!a||!n.toLowerCase().startsWith(a.toLowerCase())?n:n.slice(a.length)||"/"}function Jh(n,a,c){const h=a.matched.length-1,g=c.matched.length-1;return h>-1&&h===g&&Cs(a.matched[h],c.matched[g])&&Pf(a.params,c.params)&&n(a.query)===n(c.query)&&a.hash===c.hash}function Cs(n,a){return(n.aliasOf||n)===(a.aliasOf||a)}function Pf(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const c in n)if(!$h(n[c],a[c]))return!1;return!0}function $h(n,a){return Ir(n)?_c(n,a):Ir(a)?_c(a,n):n===a}function _c(n,a){return Ir(a)?n.length===a.length&&n.every((c,h)=>c===a[h]):n.length===1&&n[0]===a}function ed(n,a){if(n.startsWith("/"))return n;if(!n)return a;const c=a.split("/"),h=n.split("/"),g=h[h.length-1];(g===".."||g===".")&&h.push("");let p=c.length-1,w,A;for(w=0;w<h.length;w++)if(A=h[w],A!==".")if(A==="..")p>1&&p--;else break;return c.slice(0,p).join("/")+"/"+h.slice(w).join("/")}const hi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let sl=function(n){return n.pop="pop",n.push="push",n}({}),Va=function(n){return n.back="back",n.forward="forward",n.unknown="",n}({});function td(n){if(!n)if(ds){const a=document.querySelector("base");n=a&&a.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Zh(n)}const nd=/^[^#]+#/;function rd(n,a){return n.replace(nd,"#")+a}function id(n,a){const c=document.documentElement.getBoundingClientRect(),h=n.getBoundingClientRect();return{behavior:a.behavior,left:h.left-c.left-(a.left||0),top:h.top-c.top-(a.top||0)}}const xa=()=>({left:window.scrollX,top:window.scrollY});function sd(n){let a;if("el"in n){const c=n.el,h=typeof c=="string"&&c.startsWith("#"),g=typeof c=="string"?h?document.getElementById(c.slice(1)):document.querySelector(c):c;if(!g)return;a=id(g,n)}else a=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(a):window.scrollTo(a.left!=null?a.left:window.scrollX,a.top!=null?a.top:window.scrollY)}function Ic(n,a){return(history.state?history.state.position-a:-1)+n}const ol=new Map;function od(n,a){ol.set(n,a)}function ad(n){const a=ol.get(n);return ol.delete(n),a}function ld(n){return typeof n=="string"||n&&typeof n=="object"}function Bf(n){return typeof n=="string"||typeof n=="symbol"}let Jt=function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n}({});const kf=Symbol("");Jt.MATCHER_NOT_FOUND+"",Jt.NAVIGATION_GUARD_REDIRECT+"",Jt.NAVIGATION_ABORTED+"",Jt.NAVIGATION_CANCELLED+"",Jt.NAVIGATION_DUPLICATED+"";function vs(n,a){return Ot(new Error,{type:n,[kf]:!0},a)}function Zr(n,a){return n instanceof Error&&kf in n&&(a==null||!!(n.type&a))}const cd=["params","query","hash"];function ud(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const a={};for(const c of cd)c in n&&(a[c]=n[c]);return JSON.stringify(a,null,2)}function fd(n){const a={};if(n===""||n==="?")return a;const c=(n[0]==="?"?n.slice(1):n).split("&");for(let h=0;h<c.length;++h){const g=c[h].replace(Rf," "),p=g.indexOf("="),w=so(p<0?g:g.slice(0,p)),A=p<0?null:so(g.slice(p+1));if(w in a){let E=a[w];Ir(E)||(E=a[w]=[E]),E.push(A)}else a[w]=A}return a}function Sc(n){let a="";for(let c in n){const h=n[c];if(c=Xh(c),h==null){h!==void 0&&(a+=(a.length?"&":"")+c);continue}(Ir(h)?h.map(g=>g&&il(g)):[h&&il(h)]).forEach(g=>{g!==void 0&&(a+=(a.length?"&":"")+c,g!=null&&(a+="="+g))})}return a}function hd(n){const a={};for(const c in n){const h=n[c];h!==void 0&&(a[c]=Ir(h)?h.map(g=>g==null?null:""+g):h==null?h:""+h)}return a}const dd=Symbol(""),Tc=Symbol(""),ma=Symbol(""),Nl=Symbol(""),al=Symbol("");function Us(){let n=[];function a(h){return n.push(h),()=>{const g=n.indexOf(h);g>-1&&n.splice(g,1)}}function c(){n=[]}return{add:a,list:()=>n.slice(),reset:c}}function yi(n,a,c,h,g,p=w=>w()){const w=h&&(h.enterCallbacks[g]=h.enterCallbacks[g]||[]);return()=>new Promise((A,E)=>{const b=k=>{k===!1?E(vs(Jt.NAVIGATION_ABORTED,{from:c,to:a})):k instanceof Error?E(k):ld(k)?E(vs(Jt.NAVIGATION_GUARD_REDIRECT,{from:a,to:k})):(w&&h.enterCallbacks[g]===w&&typeof k=="function"&&w.push(k),A())},_=p(()=>n.call(h&&h.instances[g],a,c,b));let S=Promise.resolve(_);n.length<3&&(S=S.then(b)),S.catch(k=>E(k))})}function Ha(n,a,c,h,g=p=>p()){const p=[];for(const w of n)for(const A in w.components){let E=w.components[A];if(!(a!=="beforeRouteEnter"&&!w.instances[A]))if(Tf(E)){const b=(E.__vccOpts||E)[a];b&&p.push(yi(b,c,h,w,A,g))}else{let b=E();p.push(()=>b.then(_=>{if(!_)throw new Error(`Couldn't resolve component "${A}" at "${w.path}"`);const S=Bh(_)?_.default:_;w.mods[A]=_,w.components[A]=S;const k=(S.__vccOpts||S)[a];return k&&yi(k,c,h,w,A,g)()}))}}return p}function gd(n,a){const c=[],h=[],g=[],p=Math.max(a.matched.length,n.matched.length);for(let w=0;w<p;w++){const A=a.matched[w];A&&(n.matched.find(b=>Cs(b,A))?h.push(A):c.push(A));const E=n.matched[w];E&&(a.matched.find(b=>Cs(b,E))||g.push(E))}return[c,h,g]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let pd=()=>location.protocol+"//"+location.host;function Lf(n,a){const{pathname:c,search:h,hash:g}=a,p=n.indexOf("#");if(p>-1){let w=g.includes(n.slice(p))?n.slice(p).length:1,A=g.slice(w);return A[0]!=="/"&&(A="/"+A),vc(A,"")}return vc(c,n)+h+g}function xd(n,a,c,h){let g=[],p=[],w=null;const A=({state:k})=>{const U=Lf(n,location),se=c.value,ee=a.value;let me=0;if(k){if(c.value=U,a.value=k,w&&w===se){w=null;return}me=ee?k.position-ee.position:0}else h(U);g.forEach(ye=>{ye(c.value,se,{delta:me,type:sl.pop,direction:me?me>0?Va.forward:Va.back:Va.unknown})})};function E(){w=c.value}function b(k){g.push(k);const U=()=>{const se=g.indexOf(k);se>-1&&g.splice(se,1)};return p.push(U),U}function _(){if(document.visibilityState==="hidden"){const{history:k}=window;if(!k.state)return;k.replaceState(Ot({},k.state,{scroll:xa()}),"")}}function S(){for(const k of p)k();p=[],window.removeEventListener("popstate",A),window.removeEventListener("pagehide",_),document.removeEventListener("visibilitychange",_)}return window.addEventListener("popstate",A),window.addEventListener("pagehide",_),document.addEventListener("visibilitychange",_),{pauseListeners:E,listen:b,destroy:S}}function Oc(n,a,c,h=!1,g=!1){return{back:n,current:a,forward:c,replaced:h,position:window.history.length,scroll:g?xa():null}}function md(n){const{history:a,location:c}=window,h={value:Lf(n,c)},g={value:a.state};g.value||p(h.value,{back:null,current:h.value,forward:null,position:a.length-1,replaced:!0,scroll:null},!0);function p(E,b,_){const S=n.indexOf("#"),k=S>-1?(c.host&&document.querySelector("base")?n:n.slice(S))+E:pd()+n+E;try{a[_?"replaceState":"pushState"](b,"",k),g.value=b}catch(U){console.error(U),c[_?"replace":"assign"](k)}}function w(E,b){p(E,Ot({},a.state,Oc(g.value.back,E,g.value.forward,!0),b,{position:g.value.position}),!0),h.value=E}function A(E,b){const _=Ot({},g.value,a.state,{forward:E,scroll:xa()});p(_.current,_,!0),p(E,Ot({},Oc(h.value,E,null),{position:_.position+1},b),!1),h.value=E}return{location:h,state:g,push:A,replace:w}}function wd(n){n=td(n);const a=md(n),c=xd(n,a.state,a.location,a.replace);function h(p,w=!0){w||c.pauseListeners(),history.go(p)}const g=Ot({location:"",base:n,go:h,createHref:rd.bind(null,n)},a,c);return Object.defineProperty(g,"location",{enumerable:!0,get:()=>a.location.value}),Object.defineProperty(g,"state",{enumerable:!0,get:()=>a.state.value}),g}let Hi=function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n}({});var pn=function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n}(pn||{});const yd={type:Hi.Static,value:""},bd=/[a-zA-Z0-9_]/;function Ad(n){if(!n)return[[]];if(n==="/")return[[yd]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function a(U){throw new Error(`ERR (${c})/"${b}": ${U}`)}let c=pn.Static,h=c;const g=[];let p;function w(){p&&g.push(p),p=[]}let A=0,E,b="",_="";function S(){b&&(c===pn.Static?p.push({type:Hi.Static,value:b}):c===pn.Param||c===pn.ParamRegExp||c===pn.ParamRegExpEnd?(p.length>1&&(E==="*"||E==="+")&&a(`A repeatable param (${b}) must be alone in its segment. eg: '/:ids+.`),p.push({type:Hi.Param,value:b,regexp:_,repeatable:E==="*"||E==="+",optional:E==="*"||E==="?"})):a("Invalid state to consume buffer"),b="")}function k(){b+=E}for(;A<n.length;){if(E=n[A++],E==="\\"&&c!==pn.ParamRegExp){h=c,c=pn.EscapeNext;continue}switch(c){case pn.Static:E==="/"?(b&&S(),w()):E===":"?(S(),c=pn.Param):k();break;case pn.EscapeNext:k(),c=h;break;case pn.Param:E==="("?c=pn.ParamRegExp:bd.test(E)?k():(S(),c=pn.Static,E!=="*"&&E!=="?"&&E!=="+"&&A--);break;case pn.ParamRegExp:E===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+E:c=pn.ParamRegExpEnd:_+=E;break;case pn.ParamRegExpEnd:S(),c=pn.Static,E!=="*"&&E!=="?"&&E!=="+"&&A--,_="";break;default:a("Unknown state");break}}return c===pn.ParamRegExp&&a(`Unfinished custom RegExp for param "${b}"`),S(),w(),g}const Rc="[^/]+?",Ed={sensitive:!1,strict:!1,start:!0,end:!0};var Un=function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n}(Un||{});const Cd=/[.+*?^${}()[\]/\\]/g;function vd(n,a){const c=Ot({},Ed,a),h=[];let g=c.start?"^":"";const p=[];for(const b of n){const _=b.length?[]:[Un.Root];c.strict&&!b.length&&(g+="/");for(let S=0;S<b.length;S++){const k=b[S];let U=Un.Segment+(c.sensitive?Un.BonusCaseSensitive:0);if(k.type===Hi.Static)S||(g+="/"),g+=k.value.replace(Cd,"\\$&"),U+=Un.Static;else if(k.type===Hi.Param){const{value:se,repeatable:ee,optional:me,regexp:ye}=k;p.push({name:se,repeatable:ee,optional:me});const fe=ye||Rc;if(fe!==Rc){U+=Un.BonusCustomRegExp;try{`${fe}`}catch(J){throw new Error(`Invalid custom RegExp for param "${se}" (${fe}): `+J.message)}}let ae=ee?`((?:${fe})(?:/(?:${fe}))*)`:`(${fe})`;S||(ae=me&&b.length<2?`(?:/${ae})`:"/"+ae),me&&(ae+="?"),g+=ae,U+=Un.Dynamic,me&&(U+=Un.BonusOptional),ee&&(U+=Un.BonusRepeatable),fe===".*"&&(U+=Un.BonusWildcard)}_.push(U)}h.push(_)}if(c.strict&&c.end){const b=h.length-1;h[b][h[b].length-1]+=Un.BonusStrict}c.strict||(g+="/?"),c.end?g+="$":c.strict&&!g.endsWith("/")&&(g+="(?:/|$)");const w=new RegExp(g,c.sensitive?"":"i");function A(b){const _=b.match(w),S={};if(!_)return null;for(let k=1;k<_.length;k++){const U=_[k]||"",se=p[k-1];S[se.name]=U&&se.repeatable?U.split("/"):U}return S}function E(b){let _="",S=!1;for(const k of n){(!S||!_.endsWith("/"))&&(_+="/"),S=!1;for(const U of k)if(U.type===Hi.Static)_+=U.value;else if(U.type===Hi.Param){const{value:se,repeatable:ee,optional:me}=U,ye=se in b?b[se]:"";if(Ir(ye)&&!ee)throw new Error(`Provided param "${se}" is an array but it is not repeatable (* or + modifiers)`);const fe=Ir(ye)?ye.join("/"):ye;if(!fe)if(me)k.length<2&&(_.endsWith("/")?_=_.slice(0,-1):S=!0);else throw new Error(`Missing required param "${se}"`);_+=fe}}return _||"/"}return{re:w,score:h,keys:p,parse:A,stringify:E}}function _d(n,a){let c=0;for(;c<n.length&&c<a.length;){const h=a[c]-n[c];if(h)return h;c++}return n.length<a.length?n.length===1&&n[0]===Un.Static+Un.Segment?-1:1:n.length>a.length?a.length===1&&a[0]===Un.Static+Un.Segment?1:-1:0}function Ff(n,a){let c=0;const h=n.score,g=a.score;for(;c<h.length&&c<g.length;){const p=_d(h[c],g[c]);if(p)return p;c++}if(Math.abs(g.length-h.length)===1){if(Nc(h))return 1;if(Nc(g))return-1}return g.length-h.length}function Nc(n){const a=n[n.length-1];return n.length>0&&a[a.length-1]<0}const Id={strict:!1,end:!0,sensitive:!1};function Sd(n,a,c){const h=vd(Ad(n.path),c),g=Ot(h,{record:n,parent:a,children:[],alias:[]});return a&&!g.record.aliasOf==!a.record.aliasOf&&a.children.push(g),g}function Td(n,a){const c=[],h=new Map;a=Cc(Id,a);function g(S){return h.get(S)}function p(S,k,U){const se=!U,ee=Mc(S);ee.aliasOf=U&&U.record;const me=Cc(a,S),ye=[ee];if("alias"in S){const J=typeof S.alias=="string"?[S.alias]:S.alias;for(const Fe of J)ye.push(Mc(Ot({},ee,{components:U?U.record.components:ee.components,path:Fe,aliasOf:U?U.record:ee})))}let fe,ae;for(const J of ye){const{path:Fe}=J;if(k&&Fe[0]!=="/"){const ve=k.record.path,K=ve[ve.length-1]==="/"?"":"/";J.path=k.record.path+(Fe&&K+Fe)}if(fe=Sd(J,k,me),U?U.alias.push(fe):(ae=ae||fe,ae!==fe&&ae.alias.push(fe),se&&S.name&&!Pc(fe)&&w(S.name)),Uf(fe)&&E(fe),ee.children){const ve=ee.children;for(let K=0;K<ve.length;K++)p(ve[K],fe,U&&U.children[K])}U=U||fe}return ae?()=>{w(ae)}:Qs}function w(S){if(Bf(S)){const k=h.get(S);k&&(h.delete(S),c.splice(c.indexOf(k),1),k.children.forEach(w),k.alias.forEach(w))}else{const k=c.indexOf(S);k>-1&&(c.splice(k,1),S.record.name&&h.delete(S.record.name),S.children.forEach(w),S.alias.forEach(w))}}function A(){return c}function E(S){const k=Nd(S,c);c.splice(k,0,S),S.record.name&&!Pc(S)&&h.set(S.record.name,S)}function b(S,k){let U,se={},ee,me;if("name"in S&&S.name){if(U=h.get(S.name),!U)throw vs(Jt.MATCHER_NOT_FOUND,{location:S});me=U.record.name,se=Ot(Dc(k.params,U.keys.filter(ae=>!ae.optional).concat(U.parent?U.parent.keys.filter(ae=>ae.optional):[]).map(ae=>ae.name)),S.params&&Dc(S.params,U.keys.map(ae=>ae.name))),ee=U.stringify(se)}else if(S.path!=null)ee=S.path,U=c.find(ae=>ae.re.test(ee)),U&&(se=U.parse(ee),me=U.record.name);else{if(U=k.name?h.get(k.name):c.find(ae=>ae.re.test(k.path)),!U)throw vs(Jt.MATCHER_NOT_FOUND,{location:S,currentLocation:k});me=U.record.name,se=Ot({},k.params,S.params),ee=U.stringify(se)}const ye=[];let fe=U;for(;fe;)ye.unshift(fe.record),fe=fe.parent;return{name:me,path:ee,params:se,matched:ye,meta:Rd(ye)}}n.forEach(S=>p(S));function _(){c.length=0,h.clear()}return{addRoute:p,resolve:b,removeRoute:w,clearRoutes:_,getRoutes:A,getRecordMatcher:g}}function Dc(n,a){const c={};for(const h of a)h in n&&(c[h]=n[h]);return c}function Mc(n){const a={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Od(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(a,"mods",{value:{}}),a}function Od(n){const a={},c=n.props||!1;if("component"in n)a.default=c;else for(const h in n.components)a[h]=typeof c=="object"?c[h]:c;return a}function Pc(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Rd(n){return n.reduce((a,c)=>Ot(a,c.meta),{})}function Nd(n,a){let c=0,h=a.length;for(;c!==h;){const p=c+h>>1;Ff(n,a[p])<0?h=p:c=p+1}const g=Dd(n);return g&&(h=a.lastIndexOf(g,h-1)),h}function Dd(n){let a=n;for(;a=a.parent;)if(Uf(a)&&Ff(n,a)===0)return a}function Uf({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Bc(n){const a=hr(ma),c=hr(Nl),h=En(()=>{const E=qn(n.to);return a.resolve(E)}),g=En(()=>{const{matched:E}=h.value,{length:b}=E,_=E[b-1],S=c.matched;if(!_||!S.length)return-1;const k=S.findIndex(Cs.bind(null,_));if(k>-1)return k;const U=kc(E[b-2]);return b>1&&kc(_)===U&&S[S.length-1].path!==U?S.findIndex(Cs.bind(null,E[b-2])):k}),p=En(()=>g.value>-1&&Ld(c.params,h.value.params)),w=En(()=>g.value>-1&&g.value===c.matched.length-1&&Pf(c.params,h.value.params));function A(E={}){if(kd(E)){const b=a[qn(n.replace)?"replace":"push"](qn(n.to)).catch(Qs);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>b),b}return Promise.resolve()}return{route:h,href:En(()=>h.value.href),isActive:p,isExactActive:w,navigate:A}}function Md(n){return n.length===1?n[0]:n}const Pd=ku({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bc,setup(n,{slots:a}){const c=ao(Bc(n)),{options:h}=hr(ma),g=En(()=>({[Lc(n.activeClass,h.linkActiveClass,"router-link-active")]:c.isActive,[Lc(n.exactActiveClass,h.linkExactActiveClass,"router-link-exact-active")]:c.isExactActive}));return()=>{const p=a.default&&Md(a.default(c));return n.custom?p:Ol("a",{"aria-current":c.isExactActive?n.ariaCurrentValue:null,href:c.href,onClick:c.navigate,class:g.value},p)}}}),Bd=Pd;function kd(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const a=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(a))return}return n.preventDefault&&n.preventDefault(),!0}}function Ld(n,a){for(const c in a){const h=a[c],g=n[c];if(typeof h=="string"){if(h!==g)return!1}else if(!Ir(g)||g.length!==h.length||h.some((p,w)=>p!==g[w]))return!1}return!0}function kc(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Lc=(n,a,c)=>n??a??c,Fd=ku({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:a,slots:c}){const h=hr(al),g=En(()=>n.route||h.value),p=hr(Tc,0),w=En(()=>{let b=qn(p);const{matched:_}=g.value;let S;for(;(S=_[b])&&!S.components;)b++;return b}),A=En(()=>g.value.matched[w.value]);Po(Tc,En(()=>w.value+1)),Po(dd,A),Po(al,g);const E=Nt();return ys(()=>[E.value,A.value,n.name],([b,_,S],[k,U,se])=>{_&&(_.instances[S]=b,U&&U!==_&&b&&b===k&&(_.leaveGuards.size||(_.leaveGuards=U.leaveGuards),_.updateGuards.size||(_.updateGuards=U.updateGuards))),b&&_&&(!U||!Cs(_,U)||!k)&&(_.enterCallbacks[S]||[]).forEach(ee=>ee(b))},{flush:"post"}),()=>{const b=g.value,_=n.name,S=A.value,k=S&&S.components[_];if(!k)return Fc(c.default,{Component:k,route:b});const U=S.props[_],se=U?U===!0?b.params:typeof U=="function"?U(b):U:null,me=Ol(k,Ot({},se,a,{onVnodeUnmounted:ye=>{ye.component.isUnmounted&&(S.instances[_]=null)},ref:E}));return Fc(c.default,{Component:me,route:b})||me}}});function Fc(n,a){if(!n)return null;const c=n(a);return c.length===1?c[0]:c}const Ud=Fd;function Vd(n){const a=Td(n.routes,n),c=n.parseQuery||fd,h=n.stringifyQuery||Sc,g=n.history,p=Us(),w=Us(),A=Us(),E=T1(hi);let b=hi;ds&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=Fa.bind(null,oe=>""+oe),S=Fa.bind(null,Yh),k=Fa.bind(null,so);function U(oe,Ce){let ne,Ue;return Bf(oe)?(ne=a.getRecordMatcher(oe),Ue=Ce):Ue=oe,a.addRoute(Ue,ne)}function se(oe){const Ce=a.getRecordMatcher(oe);Ce&&a.removeRoute(Ce)}function ee(){return a.getRoutes().map(oe=>oe.record)}function me(oe){return!!a.getRecordMatcher(oe)}function ye(oe,Ce){if(Ce=Ot({},Ce||E.value),typeof oe=="string"){const W=Ua(c,oe,Ce.path),re=a.resolve({path:W.path},Ce),ce=g.createHref(W.fullPath);return Ot(W,re,{params:k(re.params),hash:so(W.hash),redirectedFrom:void 0,href:ce})}let ne;if(oe.path!=null)ne=Ot({},oe,{path:Ua(c,oe.path,Ce.path).path});else{const W=Ot({},oe.params);for(const re in W)W[re]==null&&delete W[re];ne=Ot({},oe,{params:S(W)}),Ce.params=S(Ce.params)}const Ue=a.resolve(ne,Ce),Xe=oe.hash||"";Ue.params=_(k(Ue.params));const M=Qh(h,Ot({},oe,{hash:Kh(Xe),path:Ue.path})),B=g.createHref(M);return Ot({fullPath:M,hash:Xe,query:h===Sc?hd(oe.query):oe.query||{}},Ue,{redirectedFrom:void 0,href:B})}function fe(oe){return typeof oe=="string"?Ua(c,oe,E.value.path):Ot({},oe)}function ae(oe,Ce){if(b!==oe)return vs(Jt.NAVIGATION_CANCELLED,{from:Ce,to:oe})}function J(oe){return K(oe)}function Fe(oe){return J(Ot(fe(oe),{replace:!0}))}function ve(oe,Ce){const ne=oe.matched[oe.matched.length-1];if(ne&&ne.redirect){const{redirect:Ue}=ne;let Xe=typeof Ue=="function"?Ue(oe,Ce):Ue;return typeof Xe=="string"&&(Xe=Xe.includes("?")||Xe.includes("#")?Xe=fe(Xe):{path:Xe},Xe.params={}),Ot({query:oe.query,hash:oe.hash,params:Xe.path!=null?{}:oe.params},Xe)}}function K(oe,Ce){const ne=b=ye(oe),Ue=E.value,Xe=oe.state,M=oe.force,B=oe.replace===!0,W=ve(ne,Ue);if(W)return K(Ot(fe(W),{state:typeof W=="object"?Ot({},Xe,W.state):Xe,force:M,replace:B}),Ce||ne);const re=ne;re.redirectedFrom=Ce;let ce;return!M&&Jh(h,Ue,ne)&&(ce=vs(Jt.NAVIGATION_DUPLICATED,{to:re,from:Ue}),yn(Ue,Ue,!0,!1)),(ce?Promise.resolve(ce):he(re,Ue)).catch(te=>Zr(te)?Zr(te,Jt.NAVIGATION_GUARD_REDIRECT)?te:Pt(te):et(te,re,Ue)).then(te=>{if(te){if(Zr(te,Jt.NAVIGATION_GUARD_REDIRECT))return K(Ot({replace:B},fe(te.to),{state:typeof te.to=="object"?Ot({},Xe,te.to.state):Xe,force:M}),Ce||re)}else te=$(re,Ue,!0,B,Xe);return Ne(re,Ue,te),te})}function Q(oe,Ce){const ne=ae(oe,Ce);return ne?Promise.reject(ne):Promise.resolve()}function V(oe){const Ce=Vt.values().next().value;return Ce&&typeof Ce.runWithContext=="function"?Ce.runWithContext(oe):oe()}function he(oe,Ce){let ne;const[Ue,Xe,M]=gd(oe,Ce);ne=Ha(Ue.reverse(),"beforeRouteLeave",oe,Ce);for(const W of Ue)W.leaveGuards.forEach(re=>{ne.push(yi(re,oe,Ce))});const B=Q.bind(null,oe,Ce);return ne.push(B),Me(ne).then(()=>{ne=[];for(const W of p.list())ne.push(yi(W,oe,Ce));return ne.push(B),Me(ne)}).then(()=>{ne=Ha(Xe,"beforeRouteUpdate",oe,Ce);for(const W of Xe)W.updateGuards.forEach(re=>{ne.push(yi(re,oe,Ce))});return ne.push(B),Me(ne)}).then(()=>{ne=[];for(const W of M)if(W.beforeEnter)if(Ir(W.beforeEnter))for(const re of W.beforeEnter)ne.push(yi(re,oe,Ce));else ne.push(yi(W.beforeEnter,oe,Ce));return ne.push(B),Me(ne)}).then(()=>(oe.matched.forEach(W=>W.enterCallbacks={}),ne=Ha(M,"beforeRouteEnter",oe,Ce,V),ne.push(B),Me(ne))).then(()=>{ne=[];for(const W of w.list())ne.push(yi(W,oe,Ce));return ne.push(B),Me(ne)}).catch(W=>Zr(W,Jt.NAVIGATION_CANCELLED)?W:Promise.reject(W))}function Ne(oe,Ce,ne){A.list().forEach(Ue=>V(()=>Ue(oe,Ce,ne)))}function $(oe,Ce,ne,Ue,Xe){const M=ae(oe,Ce);if(M)return M;const B=Ce===hi,W=ds?history.state:{};ne&&(Ue||B?g.replace(oe.fullPath,Ot({scroll:B&&W&&W.scroll},Xe)):g.push(oe.fullPath,Xe)),E.value=oe,yn(oe,Ce,ne,B),Pt()}let Oe;function Je(){Oe||(Oe=g.listen((oe,Ce,ne)=>{if(!Cn.listening)return;const Ue=ye(oe),Xe=ve(Ue,Cn.currentRoute.value);if(Xe){K(Ot(Xe,{replace:!0,force:!0}),Ue).catch(Qs);return}b=Ue;const M=E.value;ds&&od(Ic(M.fullPath,ne.delta),xa()),he(Ue,M).catch(B=>Zr(B,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_CANCELLED)?B:Zr(B,Jt.NAVIGATION_GUARD_REDIRECT)?(K(Ot(fe(B.to),{force:!0}),Ue).then(W=>{Zr(W,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&!ne.delta&&ne.type===sl.pop&&g.go(-1,!1)}).catch(Qs),Promise.reject()):(ne.delta&&g.go(-ne.delta,!1),et(B,Ue,M))).then(B=>{B=B||$(Ue,M,!1),B&&(ne.delta&&!Zr(B,Jt.NAVIGATION_CANCELLED)?g.go(-ne.delta,!1):ne.type===sl.pop&&Zr(B,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&g.go(-1,!1)),Ne(Ue,M,B)}).catch(Qs)}))}let Z=Us(),qe=Us(),_e;function et(oe,Ce,ne){Pt(oe);const Ue=qe.list();return Ue.length?Ue.forEach(Xe=>Xe(oe,Ce,ne)):console.error(oe),Promise.reject(oe)}function Ut(){return _e&&E.value!==hi?Promise.resolve():new Promise((oe,Ce)=>{Z.add([oe,Ce])})}function Pt(oe){return _e||(_e=!oe,Je(),Z.list().forEach(([Ce,ne])=>oe?ne(oe):Ce()),Z.reset()),oe}function yn(oe,Ce,ne,Ue){const{scrollBehavior:Xe}=n;if(!ds||!Xe)return Promise.resolve();const M=!ne&&ad(Ic(oe.fullPath,0))||(Ue||!ne)&&history.state&&history.state.scroll||null;return aa().then(()=>Xe(oe,Ce,M)).then(B=>B&&sd(B)).catch(B=>et(B,oe,Ce))}const bt=oe=>g.go(oe);let nn;const Vt=new Set,Cn={currentRoute:E,listening:!0,addRoute:U,removeRoute:se,clearRoutes:a.clearRoutes,hasRoute:me,getRoutes:ee,resolve:ye,options:n,push:J,replace:Fe,go:bt,back:()=>bt(-1),forward:()=>bt(1),beforeEach:p.add,beforeResolve:w.add,afterEach:A.add,onError:qe.add,isReady:Ut,install(oe){oe.component("RouterLink",Bd),oe.component("RouterView",Ud),oe.config.globalProperties.$router=Cn,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>qn(E)}),ds&&!nn&&E.value===hi&&(nn=!0,J(g.location).catch(Ue=>{}));const Ce={};for(const Ue in hi)Object.defineProperty(Ce,Ue,{get:()=>E.value[Ue],enumerable:!0});oe.provide(ma,Cn),oe.provide(Nl,Au(Ce)),oe.provide(al,E);const ne=oe.unmount;Vt.add(oe),oe.unmount=function(){Vt.delete(oe),Vt.size<1&&(b=hi,Oe&&Oe(),Oe=null,E.value=hi,nn=!1,_e=!1),ne()}}};function Me(oe){return oe.reduce((Ce,ne)=>Ce.then(()=>V(ne)),Promise.resolve())}return Cn}function Vf(){return hr(ma)}function Hf(n){return hr(Nl)}var Vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wf={exports:{}};(function(n,a){(function(c,h){n.exports=h()})(Vi,function(){var c=function(r,o){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(f[x]=d[x])})(r,o)},h=function(){return(h=Object.assign||function(r){for(var o,f=1,d=arguments.length;f<d;f++)for(var x in o=arguments[f])Object.prototype.hasOwnProperty.call(o,x)&&(r[x]=o[x]);return r}).apply(this,arguments)};function g(r,o,f){for(var d,x=0,m=o.length;x<m;x++)!d&&x in o||((d=d||Array.prototype.slice.call(o,0,x))[x]=o[x]);return r.concat(d||Array.prototype.slice.call(o))}var p=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Vi,w=Object.keys,A=Array.isArray;function E(r,o){return typeof o!="object"||w(o).forEach(function(f){r[f]=o[f]}),r}typeof Promise>"u"||p.Promise||(p.Promise=Promise);var b=Object.getPrototypeOf,_={}.hasOwnProperty;function S(r,o){return _.call(r,o)}function k(r,o){typeof o=="function"&&(o=o(b(r))),(typeof Reflect>"u"?w:Reflect.ownKeys)(o).forEach(function(f){se(r,f,o[f])})}var U=Object.defineProperty;function se(r,o,f,d){U(r,o,E(f&&S(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},d))}function ee(r){return{from:function(o){return r.prototype=Object.create(o.prototype),se(r.prototype,"constructor",r),{extend:k.bind(null,r.prototype)}}}}var me=Object.getOwnPropertyDescriptor,ye=[].slice;function fe(r,o,f){return ye.call(r,o,f)}function ae(r,o){return o(r)}function J(r){if(!r)throw new Error("Assertion Failed")}function Fe(r){p.setImmediate?setImmediate(r):setTimeout(r,0)}function ve(r,o){if(typeof o=="string"&&S(r,o))return r[o];if(!o)return r;if(typeof o!="string"){for(var f=[],d=0,x=o.length;d<x;++d){var m=ve(r,o[d]);f.push(m)}return f}var y=o.indexOf(".");if(y!==-1){var C=r[o.substr(0,y)];return C==null?void 0:ve(C,o.substr(y+1))}}function K(r,o,f){if(r&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof o!="string"&&"length"in o){J(typeof f!="string"&&"length"in f);for(var d=0,x=o.length;d<x;++d)K(r,o[d],f[d])}else{var m,y,C=o.indexOf(".");C!==-1?(m=o.substr(0,C),(y=o.substr(C+1))===""?f===void 0?A(r)&&!isNaN(parseInt(m))?r.splice(m,1):delete r[m]:r[m]=f:K(C=!(C=r[m])||!S(r,m)?r[m]={}:C,y,f)):f===void 0?A(r)&&!isNaN(parseInt(o))?r.splice(o,1):delete r[o]:r[o]=f}}function Q(r){var o,f={};for(o in r)S(r,o)&&(f[o]=r[o]);return f}var V=[].concat;function he(r){return V.apply([],r)}var ze="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(he([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(o){return o+r+"Array"})}))).filter(function(r){return p[r]}),Ne=new Set(ze.map(function(r){return p[r]})),$=null;function Oe(r){return $=new WeakMap,r=function o(f){if(!f||typeof f!="object")return f;var d=$.get(f);if(d)return d;if(A(f)){d=[],$.set(f,d);for(var x=0,m=f.length;x<m;++x)d.push(o(f[x]))}else if(Ne.has(f.constructor))d=f;else{var y,C=b(f);for(y in d=C===Object.prototype?{}:Object.create(C),$.set(f,d),f)S(f,y)&&(d[y]=o(f[y]))}return d}(r),$=null,r}var Je={}.toString;function Z(r){return Je.call(r).slice(8,-1)}var qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof qe=="symbol"?function(r){var o;return r!=null&&(o=r[qe])&&o.apply(r)}:function(){return null};function et(r,o){return o=r.indexOf(o),0<=o&&r.splice(o,1),0<=o}var Ut={};function Pt(r){var o,f,d,x;if(arguments.length===1){if(A(r))return r.slice();if(this===Ut&&typeof r=="string")return[r];if(x=_e(r)){for(f=[];!(d=x.next()).done;)f.push(d.value);return f}if(r==null)return[r];if(typeof(o=r.length)!="number")return[r];for(f=new Array(o);o--;)f[o]=r[o];return f}for(o=arguments.length,f=new Array(o);o--;)f[o]=arguments[o];return f}var yn=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(je),bt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function nn(r,o){this.name=r,this.message=o}function Vt(r,o){return r+". Errors: "+Object.keys(o).map(function(f){return o[f].toString()}).filter(function(f,d,x){return x.indexOf(f)===d}).join(`
`)}function Cn(r,o,f,d){this.failures=o,this.failedKeys=d,this.successCount=f,this.message=Vt(r,o)}function Me(r,o){this.name="BulkError",this.failures=Object.keys(o).map(function(f){return o[f]}),this.failuresByPos=o,this.message=Vt(r,this.failures)}ee(nn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ee(Cn).from(nn),ee(Me).from(nn);var oe=Qe.reduce(function(r,o){return r[o]=o+"Error",r},{}),Ce=nn,ne=Qe.reduce(function(r,o){var f=o+"Error";function d(x,m){this.name=f,x?typeof x=="string"?(this.message="".concat(x).concat(m?`
 `+m:""),this.inner=m||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=bt[o]||f,this.inner=null)}return ee(d).from(Ce),r[o]=d,r},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var Ue=je.reduce(function(r,o){return r[o+"Error"]=ne[o],r},{}),Xe=Qe.reduce(function(r,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(r[o+"Error"]=ne[o]),r},{});function M(){}function B(r){return r}function W(r,o){return r==null||r===B?o:function(f){return o(r(f))}}function re(r,o){return function(){r.apply(this,arguments),o.apply(this,arguments)}}function ce(r,o){return r===M?o:function(){var f=r.apply(this,arguments);f!==void 0&&(arguments[0]=f);var d=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var m=o.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?re(d,this.onsuccess):d),x&&(this.onerror=this.onerror?re(x,this.onerror):x),m!==void 0?m:f}}function te(r,o){return r===M?o:function(){r.apply(this,arguments);var f=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?re(f,this.onsuccess):f),d&&(this.onerror=this.onerror?re(d,this.onerror):d)}}function de(r,o){return r===M?o:function(f){var d=r.apply(this,arguments);E(f,d);var x=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,f=o.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?re(x,this.onsuccess):x),m&&(this.onerror=this.onerror?re(m,this.onerror):m),d===void 0?f===void 0?void 0:f:E(d,f)}}function le(r,o){return r===M?o:function(){return o.apply(this,arguments)!==!1&&r.apply(this,arguments)}}function we(r,o){return r===M?o:function(){var f=r.apply(this,arguments);if(f&&typeof f.then=="function"){for(var d=this,x=arguments.length,m=new Array(x);x--;)m[x]=arguments[x];return f.then(function(){return o.apply(d,m)})}return o.apply(this,arguments)}}Xe.ModifyError=Cn,Xe.DexieError=nn,Xe.BulkError=Me;var j=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function He(r){j=r}var Te={},Le=100,ze=typeof Promise>"u"?[]:function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,b(r),r];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,b(o),r]}(),je=ze[0],Qe=ze[1],ze=ze[2],Qe=Qe&&Qe.then,ht=je&&je.constructor,it=!!ze,dt=function(r,o){St.push([r,o]),ln&&(queueMicrotask(mn),ln=!1)},rn=!0,ln=!0,cn=[],It=[],be=B,st={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:M,pgp:!1,env:{},finalize:M},xe=st,St=[],vn=0,li=[];function Re(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=xe;if(typeof r!="function"){if(r!==Te)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zi(this,this._value))}this._state=null,this._value=null,++o.ref,function f(d,x){try{x(function(m){if(d._state===null){if(m===d)throw new TypeError("A promise cannot be resolved with itself.");var y=d._lib&&Zn();m&&typeof m.then=="function"?f(d,function(C,I){m instanceof Re?m._then(C,I):m.then(C,I)}):(d._state=!0,d._value=m,Is(d)),y&&pr()}},zi.bind(null,d))}catch(m){zi(d,m)}}(this,r)}var pt={get:function(){var r=xe,o=De;function f(d,x){var m=this,y=!r.global&&(r!==xe||o!==De),C=y&&!Mn(),I=new Re(function(T,O){Dn(m,new Sr(Qn(d,r,y,C),Qn(x,r,y,C),T,O,r))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return f.prototype=Te,f},set:function(r){se(this,"then",r&&r.prototype===Te?pt:{get:function(){return r},set:pt.set})}};function Sr(r,o,f,d,x){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof o=="function"?o:null,this.resolve=f,this.reject=d,this.psd=x}function zi(r,o){var f,d;It.push(o),r._state===null&&(f=r._lib&&Zn(),o=be(o),r._state=!1,r._value=o,d=r,cn.some(function(x){return x._value===d._value})||cn.push(d),Is(r),f&&pr())}function Is(r){var o=r._listeners;r._listeners=[];for(var f=0,d=o.length;f<d;++f)Dn(r,o[f]);var x=r._PSD;--x.ref||x.finalize(),vn===0&&(++vn,dt(function(){--vn==0&&Gn()},[]))}function Dn(r,o){if(r._state!==null){var f=r._state?o.onFulfilled:o.onRejected;if(f===null)return(r._state?o.resolve:o.reject)(r._value);++o.psd.ref,++vn,dt(Ss,[f,r,o])}else r._listeners.push(o)}function Ss(r,o,f){try{var d,x=o._value;!o._state&&It.length&&(It=[]),d=j&&o._consoleTask?o._consoleTask.run(function(){return r(x)}):r(x),o._state||It.indexOf(x)!==-1||function(m){for(var y=cn.length;y;)if(cn[--y]._value===m._value)return cn.splice(y,1)}(o),f.resolve(d)}catch(m){f.reject(m)}finally{--vn==0&&Gn(),--f.psd.ref||f.psd.finalize()}}function mn(){Wr(st,function(){Zn()&&pr()})}function Zn(){var r=rn;return ln=rn=!1,r}function pr(){var r,o,f;do for(;0<St.length;)for(r=St,St=[],f=r.length,o=0;o<f;++o){var d=r[o];d[0].apply(null,d[1])}while(0<St.length);ln=rn=!0}function Gn(){var r=cn;cn=[],r.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var o=li.slice(0),f=o.length;f;)o[--f]()}function Yi(r){return new Re(Te,!1,r)}function At(r,o){var f=xe;return function(){var d=Zn(),x=xe;try{return fn(f,!0),r.apply(this,arguments)}catch(m){o&&o(m)}finally{fn(x,!1),d&&pr()}}}k(Re.prototype,{then:pt,_then:function(r,o){Dn(this,new Sr(null,null,r,o,xe))},catch:function(r){if(arguments.length===1)return this.then(null,r);var o=r,f=arguments[1];return typeof o=="function"?this.then(null,function(d){return(d instanceof o?f:Yi)(d)}):this.then(null,function(d){return(d&&d.name===o?f:Yi)(d)})},finally:function(r){return this.then(function(o){return Re.resolve(r()).then(function(){return o})},function(o){return Re.resolve(r()).then(function(){return Yi(o)})})},timeout:function(r,o){var f=this;return r<1/0?new Re(function(d,x){var m=setTimeout(function(){return x(new ne.Timeout(o))},r);f.then(d,x).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),st.env=fo(),k(Re,{all:function(){var r=Pt.apply(null,arguments).map(Gr);return new Re(function(o,f){r.length===0&&o([]);var d=r.length;r.forEach(function(x,m){return Re.resolve(x).then(function(y){r[m]=y,--d||o(r)},f)})})},resolve:function(r){return r instanceof Re?r:r&&typeof r.then=="function"?new Re(function(o,f){r.then(o,f)}):new Re(Te,!0,r)},reject:Yi,race:function(){var r=Pt.apply(null,arguments).map(Gr);return new Re(function(o,f){r.map(function(d){return Re.resolve(d).then(o,f)})})},PSD:{get:function(){return xe},set:function(r){return xe=r}},totalEchoes:{get:function(){return De}},newPSD:ar,usePSD:Wr,scheduler:{get:function(){return dt},set:function(r){dt=r}},rejectionMapper:{get:function(){return be},set:function(r){be=r}},follow:function(r,o){return new Re(function(f,d){return ar(function(x,m){var y=xe;y.unhandleds=[],y.onunhandled=m,y.finalize=re(function(){var C,I=this;C=function(){I.unhandleds.length===0?x():m(I.unhandleds[0])},li.push(function T(){C(),li.splice(li.indexOf(T),1)}),++vn,dt(function(){--vn==0&&Gn()},[])},y.finalize),r()},o,f,d)})}}),ht&&(ht.allSettled&&se(Re,"allSettled",function(){var r=Pt.apply(null,arguments).map(Gr);return new Re(function(o){r.length===0&&o([]);var f=r.length,d=new Array(f);r.forEach(function(x,m){return Re.resolve(x).then(function(y){return d[m]={status:"fulfilled",value:y}},function(y){return d[m]={status:"rejected",reason:y}}).then(function(){return--f||o(d)})})})}),ht.any&&typeof AggregateError<"u"&&se(Re,"any",function(){var r=Pt.apply(null,arguments).map(Gr);return new Re(function(o,f){r.length===0&&f(new AggregateError([]));var d=r.length,x=new Array(d);r.forEach(function(m,y){return Re.resolve(m).then(function(C){return o(C)},function(C){x[y]=C,--d||f(new AggregateError(x))})})})}),ht.withResolvers&&(Re.withResolvers=ht.withResolvers));var Qt={awaits:0,echoes:0,id:0},_n=0,or=[],bn=0,De=0,ci=0;function ar(r,o,f,d){var x=xe,m=Object.create(x);return m.parent=x,m.ref=0,m.global=!1,m.id=++ci,st.env,m.env=it?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},o&&E(m,o),++x.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},d=Wr(m,r,f,d),m.ref===0&&m.finalize(),d}function sn(){return Qt.id||(Qt.id=++_n),++Qt.awaits,Qt.echoes+=Le,Qt.id}function Mn(){return!!Qt.awaits&&(--Qt.awaits==0&&(Qt.id=0),Qt.echoes=Qt.awaits*Le,!0)}function Gr(r){return Qt.echoes&&r&&r.constructor===ht?(sn(),r.then(function(o){return Mn(),o},function(o){return Mn(),Ze(o)})):r}function qi(){var r=or[or.length-1];or.pop(),fn(r,!1)}function fn(r,o){var f,d=xe;(o?!Qt.echoes||bn++&&r===xe:!bn||--bn&&r===xe)||queueMicrotask(o?(function(x){++De,Qt.echoes&&--Qt.echoes!=0||(Qt.echoes=Qt.awaits=Qt.id=0),or.push(xe),fn(x,!0)}).bind(null,r):qi),r!==xe&&(xe=r,d===st&&(st.env=fo()),it&&(f=st.env.Promise,o=r.env,(d.global||r.global)&&(Object.defineProperty(p,"Promise",o.PromiseProp),f.all=o.all,f.race=o.race,f.resolve=o.resolve,f.reject=o.reject,o.allSettled&&(f.allSettled=o.allSettled),o.any&&(f.any=o.any))))}function fo(){var r=p.Promise;return it?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(p,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function Wr(r,o,f,d,x){var m=xe;try{return fn(r,!0),o(f,d,x)}finally{fn(m,!1)}}function Qn(r,o,f,d){return typeof r!="function"?r:function(){var x=xe;f&&sn(),fn(o,!0);try{return r.apply(this,arguments)}finally{fn(x,!1),d&&queueMicrotask(Mn)}}}function hn(r){Promise===ht&&Qt.echoes===0?bn===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}(""+Qe).indexOf("[native code]")===-1&&(sn=Mn=M);var Ze=Re.reject,Tr="",wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Zi="String expected.",ue=[],Qi="__dbnames",kt="readonly",Or="readwrite";function jr(r,o){return r?o?function(){return r.apply(this,arguments)&&o.apply(this,arguments)}:r:o}var wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gt(r){return typeof r!="string"||/\./.test(r)?function(o){return o}:function(o){return o[r]===void 0&&r in o&&delete(o=Oe(o))[r],o}}function ut(){throw ne.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(r,o){try{var f=Ji(r),d=Ji(o);if(f!==d)return f==="Array"?1:d==="Array"?-1:f==="binary"?1:d==="binary"?-1:f==="string"?1:d==="string"?-1:f==="Date"?1:d!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return o<r?1:r<o?-1:0;case"binary":return function(x,m){for(var y=x.length,C=m.length,I=y<C?y:C,T=0;T<I;++T)if(x[T]!==m[T])return x[T]<m[T]?-1:1;return y===C?0:y<C?-1:1}($i(r),$i(o));case"Array":return function(x,m){for(var y=x.length,C=m.length,I=y<C?y:C,T=0;T<I;++T){var O=ct(x[T],m[T]);if(O!==0)return O}return y===C?0:y<C?-1:1}(r,o)}}catch{}return NaN}function Ji(r){var o=typeof r;return o!="object"?o:ArrayBuffer.isView(r)?"binary":(r=Z(r),r==="ArrayBuffer"?"binary":r)}function $i(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}function Xt(r,o,f){var d=r.schema.yProps;return d?(o&&0<f.numFailures&&(o=o.filter(function(x,m){return!f.failures[m]})),Promise.all(d.map(function(x){return x=x.updatesTable,o?r.db.table(x).where("k").anyOf(o).delete():r.db.table(x).clear()})).then(function(){return f})):f}var Wn=(ho.prototype.execute=function(r){var o=this["@@propmod"];if(o.add!==void 0){var f=o.add;if(A(f))return g(g([],A(r)?r:[],!0),f).sort();if(typeof f=="number")return(Number(r)||0)+f;if(typeof f=="bigint")try{return BigInt(r)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(o.remove!==void 0){var d=o.remove;if(A(d))return A(r)?r.filter(function(x){return!d.includes(x)}).sort():[];if(typeof d=="number")return Number(r)-d;if(typeof d=="bigint")try{return BigInt(r)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return f=(f=o.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof r=="string"&&r.startsWith(f)?o.replacePrefix[1]+r.substring(f.length):r},ho);function ho(r){this["@@propmod"]=r}function zt(r,o){for(var f=w(o),d=f.length,x=!1,m=0;m<d;++m){var y=f[m],C=o[y],I=ve(r,y);C instanceof Wn?(K(r,y,C.execute(I)),x=!0):I!==C&&(K(r,y,C),x=!0)}return x}var xr=(Dt.prototype._trans=function(r,o,f){var d=this._tx||xe.trans,x=this.name,m=j&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function y(T,O,R){if(!R.schema[x])throw new ne.NotFound("Table "+x+" not part of transaction");return o(R.idbtrans,R)}var C=Zn();try{var I=d&&d.db._novip===this.db._novip?d===xe.trans?d._promise(r,y,f):ar(function(){return d._promise(r,y,f)},{trans:d,transless:xe.transless||xe}):function T(O,R,P,N){if(O.idbdb&&(O._state.openComplete||xe.letThrough||O._vip)){var F=O._createTransaction(R,P,O._dbSchema);try{F.create(),O._state.PR1398_maxLoop=3}catch(L){return L.name===oe.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return T(O,R,P,N)})):Ze(L)}return F._promise(R,function(L,H){return ar(function(){return xe.trans=F,N(L,H,F)})}).then(function(L){if(R==="readwrite")try{F.idbtrans.commit()}catch{}return R==="readonly"?L:F._completion.then(function(){return L})})}if(O._state.openComplete)return Ze(new ne.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return Ze(new ne.DatabaseClosed);O.open().catch(M)}return O._state.dbReadyPromise.then(function(){return T(O,R,P,N)})}(this.db,r,[this.name],y);return m&&(I._consoleTask=m,I=I.catch(function(T){return console.trace(T),Ze(T)})),I}finally{C&&pr()}},Dt.prototype.get=function(r,o){var f=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?Ze(new ne.Type("Invalid argument to Table.get()")):this._trans("readonly",function(d){return f.core.get({trans:d,key:r}).then(function(x){return f.hook.reading.fire(x)})}).then(o)},Dt.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(A(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=w(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(C){if(C.compound&&o.every(function(T){return 0<=C.keyPath.indexOf(T)})){for(var I=0;I<o.length;++I)if(o.indexOf(C.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(C,I){return C.keyPath.length-I.keyPath.length})[0];if(f&&this.db._maxKey!==Tr){var m=f.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(I){return r[I]}))}!f&&j&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var d=this.schema.idxByName;function x(C,I){return ct(C,I)===0}var y=o.reduce(function(R,I){var T=R[0],O=R[1],R=d[I],P=r[I];return[T||R,T||!R?jr(O,R&&R.multi?function(N){return N=ve(N,I),A(N)&&N.some(function(F){return x(P,F)})}:function(N){return x(P,ve(N,I))}):O]},[null,null]),m=y[0],y=y[1];return m?this.where(m.name).equals(r[m.keyPath]).filter(y):f?this.filter(y):this.where(o).equals("")},Dt.prototype.filter=function(r){return this.toCollection().and(r)},Dt.prototype.count=function(r){return this.toCollection().count(r)},Dt.prototype.offset=function(r){return this.toCollection().offset(r)},Dt.prototype.limit=function(r){return this.toCollection().limit(r)},Dt.prototype.each=function(r){return this.toCollection().each(r)},Dt.prototype.toArray=function(r){return this.toCollection().toArray(r)},Dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Dt.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,A(r)?"[".concat(r.join("+"),"]"):r))},Dt.prototype.reverse=function(){return this.toCollection().reverse()},Dt.prototype.mapToClass=function(r){var o,f=this.db,d=this.name;function x(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=r).prototype instanceof ut&&(function(I,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function O(){this.constructor=I}c(I,T),I.prototype=T===null?Object.create(T):(O.prototype=T.prototype,new O)}(x,o=r),Object.defineProperty(x.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),x.prototype.table=function(){return d},r=x);for(var m=new Set,y=r.prototype;y;y=b(y))Object.getOwnPropertyNames(y).forEach(function(I){return m.add(I)});function C(I){if(!I)return I;var T,O=Object.create(r.prototype);for(T in I)if(!m.has(T))try{O[T]=I[T]}catch{}return O}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),r},Dt.prototype.defineClass=function(){return this.mapToClass(function(r){E(this,r)})},Dt.prototype.add=function(r,o){var f=this,d=this.schema.primKey,x=d.auto,m=d.keyPath,y=r;return m&&x&&(y=gt(m)(r)),this._trans("readwrite",function(C){return f.core.mutate({trans:C,type:"add",keys:o!=null?[o]:null,values:[y]})}).then(function(C){return C.numFailures?Re.reject(C.failures[0]):C.lastResult}).then(function(C){if(m)try{K(r,m,C)}catch{}return C})},Dt.prototype.upsert=function(r,o){var f=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(x){return f.core.get({trans:x,key:r}).then(function(m){var y=m??{};return zt(y,o),d&&K(y,d,r),f.core.mutate({trans:x,type:"put",values:[y],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(C){return C.numFailures?Re.reject(C.failures[0]):!!m})})})},Dt.prototype.update=function(r,o){return typeof r!="object"||A(r)?this.where(":id").equals(r).modify(o):(r=ve(r,this.schema.primKey.keyPath),r===void 0?Ze(new ne.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(o))},Dt.prototype.put=function(r,o){var f=this,d=this.schema.primKey,x=d.auto,m=d.keyPath,y=r;return m&&x&&(y=gt(m)(r)),this._trans("readwrite",function(C){return f.core.mutate({trans:C,type:"put",values:[y],keys:o!=null?[o]:null})}).then(function(C){return C.numFailures?Re.reject(C.failures[0]):C.lastResult}).then(function(C){if(m)try{K(r,m,C)}catch{}return C})},Dt.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"delete",keys:[r]}).then(function(d){return Xt(o,[r],d)}).then(function(d){return d.numFailures?Re.reject(d.failures[0]):void 0})})},Dt.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:wt}).then(function(f){return Xt(r,null,f)})}).then(function(o){return o.numFailures?Re.reject(o.failures[0]):void 0})},Dt.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(f){return o.core.getMany({keys:r,trans:f}).then(function(d){return d.map(function(x){return o.hook.reading.fire(x)})})})},Dt.prototype.bulkAdd=function(r,o,f){var d=this,x=Array.isArray(o)?o:void 0,m=(f=f||(x?void 0:o))?f.allKeys:void 0;return this._trans("readwrite",function(y){var T=d.schema.primKey,C=T.auto,T=T.keyPath;if(T&&x)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==r.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var I=r.length,T=T&&C?r.map(gt(T)):r;return d.core.mutate({trans:y,type:"add",keys:x,values:T,wantResults:m}).then(function(F){var R=F.numFailures,P=F.results,N=F.lastResult,F=F.failures;if(R===0)return m?P:N;throw new Me("".concat(d.name,".bulkAdd(): ").concat(R," of ").concat(I," operations failed"),F)})})},Dt.prototype.bulkPut=function(r,o,f){var d=this,x=Array.isArray(o)?o:void 0,m=(f=f||(x?void 0:o))?f.allKeys:void 0;return this._trans("readwrite",function(y){var T=d.schema.primKey,C=T.auto,T=T.keyPath;if(T&&x)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==r.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var I=r.length,T=T&&C?r.map(gt(T)):r;return d.core.mutate({trans:y,type:"put",keys:x,values:T,wantResults:m}).then(function(F){var R=F.numFailures,P=F.results,N=F.lastResult,F=F.failures;if(R===0)return m?P:N;throw new Me("".concat(d.name,".bulkPut(): ").concat(R," of ").concat(I," operations failed"),F)})})},Dt.prototype.bulkUpdate=function(r){var o=this,f=this.core,d=r.map(function(y){return y.key}),x=r.map(function(y){return y.changes}),m=[];return this._trans("readwrite",function(y){return f.getMany({trans:y,keys:d,cache:"clone"}).then(function(C){var I=[],T=[];r.forEach(function(R,P){var N=R.key,F=R.changes,L=C[P];if(L){for(var H=0,G=Object.keys(F);H<G.length;H++){var X=G[H],Y=F[X];if(X===o.schema.primKey.keyPath){if(ct(Y,N)!==0)throw new ne.Constraint("Cannot update primary key in bulkUpdate()")}else K(L,X,Y)}m.push(P),I.push(N),T.push(L)}});var O=I.length;return f.mutate({trans:y,type:"put",keys:I,values:T,updates:{keys:d,changeSpecs:x}}).then(function(R){var P=R.numFailures,N=R.failures;if(P===0)return O;for(var F=0,L=Object.keys(N);F<L.length;F++){var H,G=L[F],X=m[Number(G)];X!=null&&(H=N[G],delete N[G],N[X]=H)}throw new Me("".concat(o.name,".bulkUpdate(): ").concat(P," of ").concat(O," operations failed"),N)})})})},Dt.prototype.bulkDelete=function(r){var o=this,f=r.length;return this._trans("readwrite",function(d){return o.core.mutate({trans:d,type:"delete",keys:r}).then(function(x){return Xt(o,r,x)})}).then(function(y){var x=y.numFailures,m=y.lastResult,y=y.failures;if(x===0)return m;throw new Me("".concat(o.name,".bulkDelete(): ").concat(x," of ").concat(f," operations failed"),y)})},Dt);function Dt(){}function lr(r){function o(y,C){if(C){for(var I=arguments.length,T=new Array(I-1);--I;)T[I-1]=arguments[I];return f[y].subscribe.apply(null,T),r}if(typeof y=="string")return f[y]}var f={};o.addEventType=m;for(var d=1,x=arguments.length;d<x;++d)m(arguments[d]);return o;function m(y,C,I){if(typeof y!="object"){var T;C=C||le;var O={subscribers:[],fire:I=I||M,subscribe:function(R){O.subscribers.indexOf(R)===-1&&(O.subscribers.push(R),O.fire=C(O.fire,R))},unsubscribe:function(R){O.subscribers=O.subscribers.filter(function(P){return P!==R}),O.fire=O.subscribers.reduce(C,I)}};return f[y]=o[y]=O}w(T=y).forEach(function(R){var P=T[R];if(A(P))m(R,T[R][0],T[R][1]);else{if(P!=="asap")throw new ne.InvalidArgument("Invalid event config");var N=m(R,B,function(){for(var F=arguments.length,L=new Array(F);F--;)L[F]=arguments[F];N.subscribers.forEach(function(H){Fe(function(){H.apply(null,L)})})})}})}}function Et(r,o){return ee(o).from({prototype:r}),o}function Zt(r,o){return!(r.filter||r.algorithm||r.or)&&(o?r.justLimit:!r.replayFilter)}function z(r,o){r.filter=jr(r.filter,o)}function D(r,o,f){var d=r.replayFilter;r.replayFilter=d?function(){return jr(d(),o())}:o,r.justLimit=f&&!d}function Ve(r,o){if(r.isPrimKey)return o.primaryKey;var f=o.getIndexByKeyPath(r.index);if(!f)throw new ne.Schema("KeyPath "+r.index+" on object store "+o.name+" is not indexed");return f}function on(r,o,f){var d=Ve(r,o.schema);return o.openCursor({trans:f,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:d,range:r.range}})}function An(r,o,f,d){var x=r.replayFilter?jr(r.filter,r.replayFilter()):r.filter;if(r.or){var m={},y=function(C,I,T){var O,R;x&&!x(I,T,function(P){return I.stop(P)},function(P){return I.fail(P)})||((R=""+(O=I.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(O)),S(m,R)||(m[R]=!0,o(C,I,T)))};return Promise.all([r.or._iterate(y,f),go(on(r,d,f),r.algorithm,y,!r.keysOnly&&r.valueMapper)])}return go(on(r,d,f),jr(r.algorithm,x),o,!r.keysOnly&&r.valueMapper)}function go(r,o,f,d){var x=At(d?function(m,y,C){return f(d(m),y,C)}:f);return r.then(function(m){if(m)return m.start(function(){var y=function(){return m.continue()};o&&!o(m,function(C){return y=C},function(C){m.stop(C),y=M},function(C){m.fail(C),y=M})||x(m.value,m,function(C){return y=C}),y()})})}var Ts=($e.prototype._read=function(r,o){var f=this._ctx;return f.error?f.table._trans(null,Ze.bind(null,f.error)):f.table._trans("readonly",r).then(o)},$e.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,Ze.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},$e.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=jr(o.algorithm,r)},$e.prototype._iterate=function(r,o){return An(this._ctx,r,o,this._ctx.table.core)},$e.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return r&&E(f,r),o._ctx=f,o},$e.prototype.raw=function(){return this._ctx.valueMapper=null,this},$e.prototype.each=function(r){var o=this._ctx;return this._read(function(f){return An(o,r,f,o.table.core)})},$e.prototype.count=function(r){var o=this;return this._read(function(f){var d=o._ctx,x=d.table.core;if(Zt(d,!0))return x.count({trans:f,query:{index:Ve(d,x.schema),range:d.range}}).then(function(y){return Math.min(y,d.limit)});var m=0;return An(d,function(){return++m,!1},f,x).then(function(){return m})}).then(r)},$e.prototype.sortBy=function(r,o){var f=r.split(".").reverse(),d=f[0],x=f.length-1;function m(I,T){return T?m(I[f[T]],T-1):I[d]}var y=this._ctx.dir==="next"?1:-1;function C(I,T){return ct(m(I,x),m(T,x))*y}return this.toArray(function(I){return I.sort(C)}).then(o)},$e.prototype.toArray=function(r){var o=this;return this._read(function(f){var d=o._ctx;if(d.dir==="next"&&Zt(d,!0)&&0<d.limit){var x=d.valueMapper,m=Ve(d,d.table.core.schema);return d.table.core.query({trans:f,limit:d.limit,values:!0,query:{index:m,range:d.range}}).then(function(C){return C=C.result,x?C.map(x):C})}var y=[];return An(d,function(C){return y.push(C)},f,d.table.core).then(function(){return y})},r)},$e.prototype.offset=function(r){var o=this._ctx;return r<=0||(o.offset+=r,Zt(o)?D(o,function(){var f=r;return function(d,x){return f===0||(f===1?--f:x(function(){d.advance(f),f=0}),!1)}}):D(o,function(){var f=r;return function(){return--f<0}})),this},$e.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),D(this._ctx,function(){var o=r;return function(f,d,x){return--o<=0&&d(x),0<=o}},!0),this},$e.prototype.until=function(r,o){return z(this._ctx,function(f,d,x){return!r(f.value)||(d(x),o)}),this},$e.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},$e.prototype.last=function(r){return this.reverse().first(r)},$e.prototype.filter=function(r){var o;return z(this._ctx,function(f){return r(f.value)}),(o=this._ctx).isMatch=jr(o.isMatch,r),this},$e.prototype.and=function(r){return this.filter(r)},$e.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},$e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},$e.prototype.desc=function(){return this.reverse()},$e.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(f,d){r(d.key,d)})},$e.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},$e.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(f,d){r(d.primaryKey,d)})},$e.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var f=[];return this.each(function(d,x){f.push(x.key)}).then(function(){return f}).then(r)},$e.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&Zt(o,!0)&&0<o.limit)return this._read(function(d){var x=Ve(o,o.table.core.schema);return o.table.core.query({trans:d,values:!1,limit:o.limit,query:{index:x,range:o.range}})}).then(function(d){return d.result}).then(r);o.keysOnly=!o.isMatch;var f=[];return this.each(function(d,x){f.push(x.primaryKey)}).then(function(){return f}).then(r)},$e.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},$e.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},$e.prototype.lastKey=function(r){return this.reverse().firstKey(r)},$e.prototype.distinct=function(){var r=this._ctx,r=r.index&&r.table.schema.idxByName[r.index];if(!r||!r.multi)return this;var o={};return z(this._ctx,function(x){var d=x.primaryKey.toString(),x=S(o,d);return o[d]=!0,!x}),this},$e.prototype.modify=function(r){var o=this,f=this._ctx;return this._write(function(d){var x=typeof r=="function"?r:function(L){return zt(L,r)},m=f.table.core,T=m.schema.primaryKey,y=T.outbound,C=T.extractKey,I=200,T=o.db._options.modifyChunkSize;T&&(I=typeof T=="object"?T[m.name]||T["*"]||200:T);function O(L,X){var G=X.failures,X=X.numFailures;P+=L-X;for(var Y=0,ie=w(G);Y<ie.length;Y++){var ge=ie[Y];R.push(G[ge])}}var R=[],P=0,N=[],F=r===Ge;return o.clone().primaryKeys().then(function(L){function H(X){var Y=Math.min(I,L.length-X),ie=L.slice(X,X+Y);return(F?Promise.resolve([]):m.getMany({trans:d,keys:ie,cache:"immutable"})).then(function(ge){var Ae=[],pe=[],Ee=y?[]:null,Se=F?ie:[];if(!F)for(var Ie=0;Ie<Y;++Ie){var Be=ge[Ie],at={value:Oe(Be),primKey:L[X+Ie]};x.call(at,at.value,at)!==!1&&(at.value==null?Se.push(L[X+Ie]):y||ct(C(Be),C(at.value))===0?(pe.push(at.value),y&&Ee.push(L[X+Ie])):(Se.push(L[X+Ie]),Ae.push(at.value)))}return Promise.resolve(0<Ae.length&&m.mutate({trans:d,type:"add",values:Ae}).then(function(lt){for(var ft in lt.failures)Se.splice(parseInt(ft),1);O(Ae.length,lt)})).then(function(){return(0<pe.length||G&&typeof r=="object")&&m.mutate({trans:d,type:"put",keys:Ee,values:pe,criteria:G,changeSpec:typeof r!="function"&&r,isAdditionalChunk:0<X}).then(function(lt){return O(pe.length,lt)})}).then(function(){return(0<Se.length||G&&F)&&m.mutate({trans:d,type:"delete",keys:Se,criteria:G,isAdditionalChunk:0<X}).then(function(lt){return Xt(f.table,Se,lt)}).then(function(lt){return O(Se.length,lt)})}).then(function(){return L.length>X+Y&&H(X+I)})})}var G=Zt(f)&&f.limit===1/0&&(typeof r!="function"||F)&&{index:f.index,range:f.range};return H(0).then(function(){if(0<R.length)throw new Cn("Error modifying one or more objects",R,P,N);return L.length})})})},$e.prototype.delete=function(){var r=this._ctx,o=r.range;return!Zt(r)||r.table.schema.yProps||!r.isPrimKey&&o.type!==3?this.modify(Ge):this._write(function(f){var d=r.table.core.schema.primaryKey,x=o;return r.table.core.count({trans:f,query:{index:d,range:x}}).then(function(m){return r.table.core.mutate({trans:f,type:"deleteRange",range:x}).then(function(I){var C=I.failures,I=I.numFailures;if(I)throw new Cn("Could not delete some values",Object.keys(C).map(function(T){return C[T]}),m-I);return m-I})})})},$e);function $e(){}var Ge=function(r,o){return o.value=null};function Ht(r,o){return r<o?-1:r===o?0:1}function po(r,o){return o<r?-1:r===o?0:1}function Pn(r,o,f){return r=r instanceof an?new r.Collection(r):r,r._ctx.error=new(f||TypeError)(o),r}function Rr(r){return new r.Collection(r,function(){return xo("")}).limit(0)}function Kr(r,o,f,d){var x,m,y,C,I,T,O,R=f.length;if(!f.every(function(F){return typeof F=="string"}))return Pn(r,Zi);function P(F){x=F==="next"?function(H){return H.toUpperCase()}:function(H){return H.toLowerCase()},m=F==="next"?function(H){return H.toLowerCase()}:function(H){return H.toUpperCase()},y=F==="next"?Ht:po;var L=f.map(function(H){return{lower:m(H),upper:x(H)}}).sort(function(H,G){return y(H.lower,G.lower)});C=L.map(function(H){return H.upper}),I=L.map(function(H){return H.lower}),O=(T=F)==="next"?"":d}P("next"),r=new r.Collection(r,function(){return cr(C[0],I[R-1]+d)}),r._ondirectionchange=function(F){P(F)};var N=0;return r._addAlgorithm(function(F,L,H){var G=F.key;if(typeof G!="string")return!1;var X=m(G);if(o(X,I,N))return!0;for(var Y=null,ie=N;ie<R;++ie){var ge=function(Ae,pe,Ee,Se,Ie,Be){for(var at=Math.min(Ae.length,Se.length),lt=-1,ft=0;ft<at;++ft){var er=pe[ft];if(er!==Se[ft])return Ie(Ae[ft],Ee[ft])<0?Ae.substr(0,ft)+Ee[ft]+Ee.substr(ft+1):Ie(Ae[ft],Se[ft])<0?Ae.substr(0,ft)+Se[ft]+Ee.substr(ft+1):0<=lt?Ae.substr(0,lt)+pe[lt]+Ee.substr(lt+1):null;Ie(Ae[ft],er)<0&&(lt=ft)}return at<Se.length&&Be==="next"?Ae+Ee.substr(Ae.length):at<Ae.length&&Be==="prev"?Ae.substr(0,Ee.length):lt<0?null:Ae.substr(0,lt)+Se[lt]+Ee.substr(lt+1)}(G,X,C[ie],I[ie],y,T);ge===null&&Y===null?N=ie+1:(Y===null||0<y(Y,ge))&&(Y=ge)}return L(Y!==null?function(){F.continue(Y+O)}:H),!1}),r}function cr(r,o,f,d){return{type:2,lower:r,upper:o,lowerOpen:f,upperOpen:d}}function xo(r){return{type:1,lower:r,upper:r}}var an=(Object.defineProperty(Yt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Yt.prototype.between=function(r,o,f,d){f=f!==!1,d=d===!0;try{return 0<this._cmp(r,o)||this._cmp(r,o)===0&&(f||d)&&(!f||!d)?Rr(this):new this.Collection(this,function(){return cr(r,o,!f,!d)})}catch{return Pn(this,wn)}},Yt.prototype.equals=function(r){return r==null?Pn(this,wn):new this.Collection(this,function(){return xo(r)})},Yt.prototype.above=function(r){return r==null?Pn(this,wn):new this.Collection(this,function(){return cr(r,void 0,!0)})},Yt.prototype.aboveOrEqual=function(r){return r==null?Pn(this,wn):new this.Collection(this,function(){return cr(r,void 0,!1)})},Yt.prototype.below=function(r){return r==null?Pn(this,wn):new this.Collection(this,function(){return cr(void 0,r,!1,!0)})},Yt.prototype.belowOrEqual=function(r){return r==null?Pn(this,wn):new this.Collection(this,function(){return cr(void 0,r)})},Yt.prototype.startsWith=function(r){return typeof r!="string"?Pn(this,Zi):this.between(r,r+Tr,!0,!0)},Yt.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):Kr(this,function(o,f){return o.indexOf(f[0])===0},[r],Tr)},Yt.prototype.equalsIgnoreCase=function(r){return Kr(this,function(o,f){return o===f[0]},[r],"")},Yt.prototype.anyOfIgnoreCase=function(){var r=Pt.apply(Ut,arguments);return r.length===0?Rr(this):Kr(this,function(o,f){return f.indexOf(o)!==-1},r,"")},Yt.prototype.startsWithAnyOfIgnoreCase=function(){var r=Pt.apply(Ut,arguments);return r.length===0?Rr(this):Kr(this,function(o,f){return f.some(function(d){return o.indexOf(d)===0})},r,Tr)},Yt.prototype.anyOf=function(){var r=this,o=Pt.apply(Ut,arguments),f=this._cmp;try{o.sort(f)}catch{return Pn(this,wn)}if(o.length===0)return Rr(this);var d=new this.Collection(this,function(){return cr(o[0],o[o.length-1])});d._ondirectionchange=function(m){f=m==="next"?r._ascending:r._descending,o.sort(f)};var x=0;return d._addAlgorithm(function(m,y,C){for(var I=m.key;0<f(I,o[x]);)if(++x===o.length)return y(C),!1;return f(I,o[x])===0||(y(function(){m.continue(o[x])}),!1)}),d},Yt.prototype.notEqual=function(r){return this.inAnyRange([[-1/0,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Yt.prototype.noneOf=function(){var r=Pt.apply(Ut,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Pn(this,wn)}var o=r.reduce(function(f,d){return f?f.concat([[f[f.length-1][1],d]]):[[-1/0,d]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},Yt.prototype.inAnyRange=function(G,o){var f=this,d=this._cmp,x=this._ascending,m=this._descending,y=this._min,C=this._max;if(G.length===0)return Rr(this);if(!G.every(function(X){return X[0]!==void 0&&X[1]!==void 0&&x(X[0],X[1])<=0}))return Pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);var I=!o||o.includeLowers!==!1,T=o&&o.includeUppers===!0,O,R=x;function P(X,Y){return R(X[0],Y[0])}try{(O=G.reduce(function(X,Y){for(var ie=0,ge=X.length;ie<ge;++ie){var Ae=X[ie];if(d(Y[0],Ae[1])<0&&0<d(Y[1],Ae[0])){Ae[0]=y(Ae[0],Y[0]),Ae[1]=C(Ae[1],Y[1]);break}}return ie===ge&&X.push(Y),X},[])).sort(P)}catch{return Pn(this,wn)}var N=0,F=T?function(X){return 0<x(X,O[N][1])}:function(X){return 0<=x(X,O[N][1])},L=I?function(X){return 0<m(X,O[N][0])}:function(X){return 0<=m(X,O[N][0])},H=F,G=new this.Collection(this,function(){return cr(O[0][0],O[O.length-1][1],!I,!T)});return G._ondirectionchange=function(X){R=X==="next"?(H=F,x):(H=L,m),O.sort(P)},G._addAlgorithm(function(X,Y,ie){for(var ge,Ae=X.key;H(Ae);)if(++N===O.length)return Y(ie),!1;return!F(ge=Ae)&&!L(ge)||(f._cmp(Ae,O[N][1])===0||f._cmp(Ae,O[N][0])===0||Y(function(){R===x?X.continue(O[N][0]):X.continue(O[N][1])}),!1)}),G},Yt.prototype.startsWithAnyOf=function(){var r=Pt.apply(Ut,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Rr(this):this.inAnyRange(r.map(function(o){return[o,o+Tr]})):Pn(this,"startsWithAnyOf() only works with strings")},Yt);function Yt(){}function dn(r){return At(function(o){return Ke(o),r(o.target.error),!1})}function Ke(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var _i="storagemutated",tt="x-storagemutated-1",Lt=lr(null,_i),ya=(jn.prototype._lock=function(){return J(!xe.global),++this._reculock,this._reculock!==1||xe.global||(xe.lockOwnerFor=this),this},jn.prototype._unlock=function(){if(J(!xe.global),--this._reculock==0)for(xe.global||(xe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var r=this._blockedFuncs.shift();try{Wr(r[1],r[0])}catch{}}return this},jn.prototype._locked=function(){return this._reculock&&xe.lockOwnerFor!==this},jn.prototype.create=function(r){var o=this;if(!this.mode)return this;var f=this.db.idbdb,d=this.db._state.dbOpenError;if(J(!this.idbtrans),!r&&!f)switch(d&&d.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(d);case"MissingAPIError":throw new ne.MissingAPI(d.message,d);default:throw new ne.OpenFailed(d)}if(!this.active)throw new ne.TransactionInactive;return J(this._completion._state===null),(r=this.idbtrans=r||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=At(function(x){Ke(x),o._reject(r.error)}),r.onabort=At(function(x){Ke(x),o.active&&o._reject(new ne.Abort(r.error)),o.active=!1,o.on("abort").fire(x)}),r.oncomplete=At(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&Lt.storagemutated.fire(r.mutatedParts)}),this},jn.prototype._promise=function(r,o,f){var d=this;if(r==="readwrite"&&this.mode!=="readwrite")return Ze(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return Ze(new ne.TransactionInactive);if(this._locked())return new Re(function(m,y){d._blockedFuncs.push([function(){d._promise(r,o,f).then(m,y)},xe])});if(f)return ar(function(){var m=new Re(function(y,C){d._lock();var I=o(y,C,d);I&&I.then&&I.then(y,C)});return m.finally(function(){return d._unlock()}),m._lib=!0,m});var x=new Re(function(m,y){var C=o(m,y,d);C&&C.then&&C.then(m,y)});return x._lib=!0,x},jn.prototype._root=function(){return this.parent?this.parent._root():this},jn.prototype.waitFor=function(r){var o,f=this._root(),d=Re.resolve(r);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return d}):(f._waitingFor=d,f._waitingQueue=[],o=f.idbtrans.objectStore(f.storeNames[0]),function m(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(o.get(-1/0).onsuccess=m)}());var x=f._waitingFor;return new Re(function(m,y){d.then(function(C){return f._waitingQueue.push(At(m.bind(null,C)))},function(C){return f._waitingQueue.push(At(y.bind(null,C)))}).finally(function(){f._waitingFor===x&&(f._waitingFor=null)})})},jn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))},jn.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(S(o,r))return o[r];var f=this.schema[r];if(!f)throw new ne.NotFound("Table "+r+" not part of transaction");return f=new this.db.Table(r,f,this),f.core=this.db.core.table(r),o[r]=f},jn);function jn(){}function es(r,o,f,d,x,m,y,C){return{name:r,keyPath:o,unique:f,multi:d,auto:x,compound:m,src:(f&&!y?"&":"")+(d?"*":"")+(x?"++":"")+Nr(o),type:C}}function Nr(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function Os(r,o,f){return{name:r,primKey:o,indexes:f,mappedClass:null,idxByName:(d=function(x){return[x.name,x]},f.reduce(function(x,m,y){return y=d(m,y),y&&(x[y[0]]=y[1]),x},{}))};var d}var mr=function(r){try{return r.only([[]]),mr=function(){return[[]]},[[]]}catch{return mr=function(){return Tr},Tr}};function Xr(r){return r==null?function(){}:typeof r=="string"?(o=r).split(".").length===1?function(f){return f[o]}:function(f){return ve(f,o)}:function(f){return ve(f,r)};var o}function ui(r){return[].slice.call(r)}var mo=0;function wr(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function Ii(r,o,I){function d(H){if(H.type===3)return null;if(H.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=H.lower,F=H.upper,L=H.lowerOpen,H=H.upperOpen;return N===void 0?F===void 0?null:o.upperBound(F,!!H):F===void 0?o.lowerBound(N,!!L):o.bound(N,F,!!L,!!H)}function x(P){var N,F=P.name;return{name:F,schema:P,mutate:function(L){var H=L.trans,G=L.type,X=L.keys,Y=L.values,ie=L.range;return new Promise(function(ge,Ae){ge=At(ge);var pe=H.objectStore(F),Ee=pe.keyPath==null,Se=G==="put"||G==="add";if(!Se&&G!=="delete"&&G!=="deleteRange")throw new Error("Invalid operation type: "+G);var Ie,Be=(X||Y||{length:1}).length;if(X&&Y&&X.length!==Y.length)throw new Error("Given keys array must have same length as given values array.");if(Be===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function at(Ln){++er,Ke(Ln)}var lt=[],ft=[],er=0;if(G==="deleteRange"){if(ie.type===4)return ge({numFailures:er,failures:ft,results:[],lastResult:void 0});ie.type===3?lt.push(Ie=pe.clear()):lt.push(Ie=pe.delete(d(ie)))}else{var Ee=Se?Ee?[Y,X]:[Y,null]:[X,null],rt=Ee[0],Sn=Ee[1];if(Se)for(var Tn=0;Tn<Be;++Tn)lt.push(Ie=Sn&&Sn[Tn]!==void 0?pe[G](rt[Tn],Sn[Tn]):pe[G](rt[Tn])),Ie.onerror=at;else for(Tn=0;Tn<Be;++Tn)lt.push(Ie=pe[G](rt[Tn])),Ie.onerror=at}function vo(Ln){Ln=Ln.target.result,lt.forEach(function(Mi,va){return Mi.error!=null&&(ft[va]=Mi.error)}),ge({numFailures:er,failures:ft,results:G==="delete"?X:lt.map(function(Mi){return Mi.result}),lastResult:Ln})}Ie.onerror=function(Ln){at(Ln),vo(Ln)},Ie.onsuccess=vo})},getMany:function(L){var H=L.trans,G=L.keys;return new Promise(function(X,Y){X=At(X);for(var ie,ge=H.objectStore(F),Ae=G.length,pe=new Array(Ae),Ee=0,Se=0,Ie=function(lt){lt=lt.target,pe[lt._pos]=lt.result,++Se===Ee&&X(pe)},Be=dn(Y),at=0;at<Ae;++at)G[at]!=null&&((ie=ge.get(G[at]))._pos=at,ie.onsuccess=Ie,ie.onerror=Be,++Ee);Ee===0&&X(pe)})},get:function(L){var H=L.trans,G=L.key;return new Promise(function(X,Y){X=At(X);var ie=H.objectStore(F).get(G);ie.onsuccess=function(ge){return X(ge.target.result)},ie.onerror=dn(Y)})},query:(N=T,function(L){return new Promise(function(H,G){H=At(H);var X,Y,ie,Ee=L.trans,ge=L.values,Ae=L.limit,Ie=L.query,pe=Ae===1/0?void 0:Ae,Se=Ie.index,Ie=Ie.range,Ee=Ee.objectStore(F),Se=Se.isPrimaryKey?Ee:Ee.index(Se.name),Ie=d(Ie);if(Ae===0)return H({result:[]});N?((pe=ge?Se.getAll(Ie,pe):Se.getAllKeys(Ie,pe)).onsuccess=function(Be){return H({result:Be.target.result})},pe.onerror=dn(G)):(X=0,Y=!ge&&"openKeyCursor"in Se?Se.openKeyCursor(Ie):Se.openCursor(Ie),ie=[],Y.onsuccess=function(Be){var at=Y.result;return at?(ie.push(ge?at.value:at.primaryKey),++X===Ae?H({result:ie}):void at.continue()):H({result:ie})},Y.onerror=dn(G))})}),openCursor:function(L){var H=L.trans,G=L.values,X=L.query,Y=L.reverse,ie=L.unique;return new Promise(function(ge,Ae){ge=At(ge);var Se=X.index,pe=X.range,Ee=H.objectStore(F),Ee=Se.isPrimaryKey?Ee:Ee.index(Se.name),Se=Y?ie?"prevunique":"prev":ie?"nextunique":"next",Ie=!G&&"openKeyCursor"in Ee?Ee.openKeyCursor(d(pe),Se):Ee.openCursor(d(pe),Se);Ie.onerror=dn(Ae),Ie.onsuccess=At(function(Be){var at,lt,ft,er,rt=Ie.result;rt?(rt.___id=++mo,rt.done=!1,at=rt.continue.bind(rt),lt=(lt=rt.continuePrimaryKey)&&lt.bind(rt),ft=rt.advance.bind(rt),er=function(){throw new Error("Cursor not stopped")},rt.trans=H,rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=function(){throw new Error("Cursor not started")},rt.fail=At(Ae),rt.next=function(){var Sn=this,Tn=1;return this.start(function(){return Tn--?Sn.continue():Sn.stop()}).then(function(){return Sn})},rt.start=function(Sn){function Tn(){if(Ie.result)try{Sn()}catch(Ln){rt.fail(Ln)}else rt.done=!0,rt.start=function(){throw new Error("Cursor behind last entry")},rt.stop()}var vo=new Promise(function(Ln,Mi){Ln=At(Ln),Ie.onerror=dn(Mi),rt.fail=Mi,rt.stop=function(va){rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=er,Ln(va)}});return Ie.onsuccess=At(function(Ln){Ie.onsuccess=Tn,Tn()}),rt.continue=at,rt.continuePrimaryKey=lt,rt.advance=ft,Tn(),vo},ge(rt)):ge(null)},Ae)})},count:function(L){var H=L.query,G=L.trans,X=H.index,Y=H.range;return new Promise(function(ie,ge){var Ae=G.objectStore(F),pe=X.isPrimaryKey?Ae:Ae.index(X.name),Ae=d(Y),pe=Ae?pe.count(Ae):pe.count();pe.onsuccess=At(function(Ee){return ie(Ee.target.result)}),pe.onerror=dn(ge)})}}}var m,y,C,O=(y=I,C=ui((m=r).objectStoreNames),{schema:{name:m.name,tables:C.map(function(P){return y.objectStore(P)}).map(function(P){var N=P.keyPath,H=P.autoIncrement,F=A(N),L={},H={name:P.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:F,keyPath:N,autoIncrement:H,unique:!0,extractKey:Xr(N)},indexes:ui(P.indexNames).map(function(G){return P.index(G)}).map(function(ie){var X=ie.name,Y=ie.unique,ge=ie.multiEntry,ie=ie.keyPath,ge={name:X,compound:A(ie),keyPath:ie,unique:Y,multiEntry:ge,extractKey:Xr(ie)};return L[wr(ie)]=ge}),getIndexByKeyPath:function(G){return L[wr(G)]}};return L[":id"]=H.primaryKey,N!=null&&(L[wr(N)]=H.primaryKey),H})},hasGetAll:0<C.length&&"getAll"in y.objectStore(C[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=O.schema,T=O.hasGetAll,O=I.tables.map(x),R={};return O.forEach(function(P){return R[P.name]=P}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(P){if(!R[P])throw new Error("Table '".concat(P,"' not found"));return R[P]},MIN_KEY:-1/0,MAX_KEY:mr(o),schema:I}}function In(r,o,f,d){var x=f.IDBKeyRange;return f.indexedDB,{dbcore:(d=Ii(o,x,d),r.dbcore.reduce(function(m,y){return y=y.create,h(h({},m),y(m))},d))}}function Si(r,d){var f=d.db,d=In(r._middlewares,f,r._deps,d);r.core=d.dbcore,r.tables.forEach(function(x){var m=x.name;r.core.schema.tables.some(function(y){return y.name===m})&&(x.core=r.core.table(m),r[m]instanceof r.Table&&(r[m].core=x.core))})}function Ti(r,o,f,d){f.forEach(function(x){var m=d[x];o.forEach(function(y){var C=function I(T,O){return me(T,O)||(T=b(T))&&I(T,O)}(y,x);(!C||"value"in C&&C.value===void 0)&&(y===r.Transaction.prototype||y instanceof r.Transaction?se(y,x,{get:function(){return this.table(x)},set:function(I){U(this,x,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):y[x]=new r.Table(x,m))})})}function ts(r,o){o.forEach(function(f){for(var d in f)f[d]instanceof r.Table&&delete f[d]})}function ba(r,o){return r._cfg.version-o._cfg.version}function Aa(r,o,f,d){var x=r._dbSchema;f.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=Os("$meta",ot("")[0],[]),r._storeNames.push("$meta"));var m=r._createTransaction("readwrite",r._storeNames,x);m.create(f),m._completion.catch(d);var y=m._reject.bind(m),C=xe.transless||xe;ar(function(){return xe.trans=m,xe.transless=C,o!==0?(Si(r,f),T=o,((I=m).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(O){return O??T}):Re.resolve(T)).then(function(O){return P=O,N=m,F=f,L=[],O=(R=r)._versions,H=R._dbSchema=rs(0,R.idbdb,F),(O=O.filter(function(G){return G._cfg.version>=P})).length!==0?(O.forEach(function(G){L.push(function(){var X=H,Y=G._cfg.dbschema;q(R,X,F),q(R,Y,F),H=R._dbSchema=Y;var ie=Ct(X,Y);ie.add.forEach(function(Se){ns(F,Se[0],Se[1].primKey,Se[1].indexes)}),ie.change.forEach(function(Se){if(Se.recreate)throw new ne.Upgrade("Not yet support for changing primary key");var Ie=F.objectStore(Se.name);Se.add.forEach(function(Be){return Jn(Ie,Be)}),Se.change.forEach(function(Be){Ie.deleteIndex(Be.name),Jn(Ie,Be)}),Se.del.forEach(function(Be){return Ie.deleteIndex(Be)})});var ge=G._cfg.contentUpgrade;if(ge&&G._cfg.version>P){Si(R,F),N._memoizedTables={};var Ae=Q(Y);ie.del.forEach(function(Se){Ae[Se]=X[Se]}),ts(R,[R.Transaction.prototype]),Ti(R,[R.Transaction.prototype],w(Ae),Ae),N.schema=Ae;var pe,Ee=yn(ge);return Ee&&sn(),ie=Re.follow(function(){var Se;(pe=ge(N))&&Ee&&(Se=Mn.bind(null,null),pe.then(Se,Se))}),pe&&typeof pe.then=="function"?Re.resolve(pe):ie.then(function(){return pe})}}),L.push(function(X){var Y,ie,ge=G._cfg.dbschema;Y=ge,ie=X,[].slice.call(ie.db.objectStoreNames).forEach(function(Ae){return Y[Ae]==null&&ie.db.deleteObjectStore(Ae)}),ts(R,[R.Transaction.prototype]),Ti(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),N.schema=R._dbSchema}),L.push(function(X){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===G._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(Y){return Y!=="$meta"})):X.objectStore("$meta").put(G._cfg.version,"version"))})}),function G(){return L.length?Re.resolve(L.shift()(N.idbtrans)).then(G):Re.resolve()}().then(function(){Oi(H,F)})):Re.resolve();var R,P,N,F,L,H}).catch(y)):(w(x).forEach(function(O){ns(f,O,x[O].primKey,x[O].indexes)}),Si(r,f),void Re.follow(function(){return r.on.populate.fire(m)}).catch(y));var I,T})}function Ea(r,o){Oi(r._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var f=rs(0,r.idbdb,o);q(r,r._dbSchema,o);for(var d=0,x=Ct(f,r._dbSchema).change;d<x.length;d++){var m=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var C=o.objectStore(y.name);y.add.forEach(function(I){j&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(I.src)),Jn(C,I)})}(x[d]);if(typeof m=="object")return m.value}}function Ct(r,o){var f,d={del:[],add:[],change:[]};for(f in r)o[f]||d.del.push(f);for(f in o){var x=r[f],m=o[f];if(x){var y={name:f,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||x.primKey.auto!==m.primKey.auto)y.recreate=!0,d.change.push(y);else{var C=x.idxByName,I=m.idxByName,T=void 0;for(T in C)I[T]||y.del.push(T);for(T in I){var O=C[T],R=I[T];O?O.src!==R.src&&y.change.push(R):y.add.push(R)}(0<y.del.length||0<y.add.length||0<y.change.length)&&d.change.push(y)}}else d.add.push([f,m])}return d}function ns(r,o,f,d){var x=r.db.createObjectStore(o,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return d.forEach(function(m){return Jn(x,m)}),x}function Oi(r,o){w(r).forEach(function(f){o.db.objectStoreNames.contains(f)||(j&&console.debug("Dexie: Creating missing table",f),ns(o,f,r[f].primKey,r[f].indexes))})}function Jn(r,o){r.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function rs(r,o,f){var d={};return fe(o.objectStoreNames,0).forEach(function(x){for(var m=f.objectStore(x),y=es(Nr(T=m.keyPath),T||"",!0,!1,!!m.autoIncrement,T&&typeof T!="string",!0),C=[],I=0;I<m.indexNames.length;++I){var O=m.index(m.indexNames[I]),T=O.keyPath,O=es(O.name,T,!!O.unique,!!O.multiEntry,!1,T&&typeof T!="string",!1);C.push(O)}d[x]=Os(x,y,C)}),d}function q(r,o,f){for(var d=f.db.objectStoreNames,x=0;x<d.length;++x){var m=d[x],y=f.objectStore(m);r._hasGetAll="getAll"in y;for(var C=0;C<y.indexNames.length;++C){var I=y.indexNames[C],T=y.index(I).keyPath,O=typeof T=="string"?T:"["+fe(T).join("+")+"]";!o[m]||(T=o[m].idxByName[O])&&(T.name=I,delete o[m].idxByName[O],o[m].idxByName[I]=T)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&p.WorkerGlobalScope&&p instanceof p.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ot(r){return r.split(",").map(function(o,f){var m=o.split(":"),d=(x=m[1])===null||x===void 0?void 0:x.trim(),x=(o=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return es(x,m||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),A(m),f===0,d)})}var gn=(yr.prototype._createTableSchema=Os,yr.prototype._parseIndexSyntax=ot,yr.prototype._parseStoresSpec=function(r,o){var f=this;w(r).forEach(function(d){if(r[d]!==null){var x=f._parseIndexSyntax(r[d]),m=x.shift();if(!m)throw new ne.Schema("Invalid schema for table "+d+": "+r[d]);if(m.unique=!0,m.multi)throw new ne.Schema("Primary key cannot be multiEntry*");x.forEach(function(y){if(y.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),x=f._createTableSchema(d,m,x),o[d]=x}})},yr.prototype.stores=function(f){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,f):f;var f=o._versions,d={},x={};return f.forEach(function(m){E(d,m._cfg.storesSource),x=m._cfg.dbschema={},m._parseStoresSpec(d,x)}),o._dbSchema=x,ts(o,[o._allTables,o,o.Transaction.prototype]),Ti(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],w(x),x),o._storeNames=w(x),this},yr.prototype.upgrade=function(r){return this._cfg.contentUpgrade=we(this._cfg.contentUpgrade||M,r),this},yr);function yr(){}function is(r,o){var f=r._dbNamesDB;return f||(f=r._dbNamesDB=new Er(Qi,{addons:[],indexedDB:r,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function Rs(r){return r&&typeof r.databases=="function"}function Ns(r){return ar(function(){return xe.letThrough=!0,r()})}function Ds(r){return!("from"in r)}var un=function(r,o){if(!this){var f=new un;return r&&"d"in r&&E(f,r),f}E(this,arguments.length?{d:1,from:r,to:1<arguments.length?o:r}:{d:0})};function Gt(r,o,f){var d=ct(o,f);if(!isNaN(d)){if(0<d)throw RangeError();if(Ds(r))return E(r,{from:o,to:f,d:1});var x=r.l,d=r.r;if(ct(f,r.from)<0)return x?Gt(x,o,f):r.l={from:o,to:f,d:1,l:null,r:null},Dr(r);if(0<ct(o,r.to))return d?Gt(d,o,f):r.r={from:o,to:f,d:1,l:null,r:null},Dr(r);ct(o,r.from)<0&&(r.from=o,r.l=null,r.d=d?d.d+1:1),0<ct(f,r.to)&&(r.to=f,r.r=null,r.d=r.l?r.l.d+1:1),f=!r.r,x&&!r.l&&zr(r,x),d&&f&&zr(r,d)}}function zr(r,o){Ds(o)||function f(d,I){var m=I.from,y=I.to,C=I.l,I=I.r;Gt(d,m,y),C&&f(d,C),I&&f(d,I)}(r,o)}function Wt(r,o){var f=Yr(o),d=f.next();if(d.done)return!1;for(var x=d.value,m=Yr(r),y=m.next(x.from),C=y.value;!d.done&&!y.done;){if(ct(C.from,x.to)<=0&&0<=ct(C.to,x.from))return!0;ct(x.from,C.from)<0?x=(d=f.next(C.from)).value:C=(y=m.next(x.from)).value}return!1}function Yr(r){var o=Ds(r)?null:{s:0,n:r};return{next:function(f){for(var d=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,d)for(;o.n.l&&ct(f,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!d||ct(f,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Dr(r){var o,f,d=(((o=r.r)===null||o===void 0?void 0:o.d)||0)-(((f=r.l)===null||f===void 0?void 0:f.d)||0),x=1<d?"r":d<-1?"l":"";x&&(o=x=="r"?"l":"r",f=h({},r),d=r[x],r.from=d.from,r.to=d.to,r[x]=d[x],f[x]=d[o],(r[o]=f).d=Tt(f)),r.d=Tt(r)}function Tt(f){var o=f.r,f=f.l;return(o?f?Math.max(o.d,f.d):o.d:f?f.d:0)+1}function We(r,o){return w(o).forEach(function(f){r[f]?zr(r[f],o[f]):r[f]=function d(x){var m,y,C={};for(m in x)S(x,m)&&(y=x[m],C[m]=!y||typeof y!="object"||Ne.has(y.constructor)?y:d(y));return C}(o[f])}),r}function Ms(r,o){return r.all||o.all||Object.keys(r).some(function(f){return o[f]&&Wt(o[f],r[f])})}k(un.prototype,((Qe={add:function(r){return zr(this,r),this},addKey:function(r){return Gt(this,r,r),this},addKeys:function(r){var o=this;return r.forEach(function(f){return Gt(o,f,f)}),this},hasKey:function(r){var o=Yr(this).next(r).value;return o&&ct(o.from,r)<=0&&0<=ct(o.to,r)}})[qe]=function(){return Yr(this)},Qe));var yt={},br={},Mr=!1;function ss(r){We(br,r),Mr||(Mr=!0,setTimeout(function(){Mr=!1,Kn(br,!(br={}))},0))}function Kn(r,o){o===void 0&&(o=!1);var f=new Set;if(r.all)for(var d=0,x=Object.values(yt);d<x.length;d++)os(y=x[d],r,f,o);else for(var m in r){var y,C=/^idb\:\/\/(.*)\/(.*)\//.exec(m);C&&(m=C[1],C=C[2],(y=yt["idb://".concat(m,"/").concat(C)])&&os(y,r,f,o))}f.forEach(function(I){return I()})}function os(r,o,f,d){for(var x=[],m=0,y=Object.entries(r.queries.query);m<y.length;m++){for(var C=y[m],I=C[0],T=[],O=0,R=C[1];O<R.length;O++){var P=R[O];Ms(o,P.obsSet)?P.subscribers.forEach(function(H){return f.add(H)}):d&&T.push(P)}d&&x.push([I,T])}if(d)for(var N=0,F=x;N<F.length;N++){var L=F[N],I=L[0],T=L[1];r.queries.query[I]=T}}function wo(r){var o=r._state,f=r._deps.indexedDB;if(o.isBeingOpened||r.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Ze(o.dbOpenError):r});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var d=o.openCanceller,x=Math.round(10*r.verno),m=!1;function y(){if(o.openCanceller!==d)throw new ne.DatabaseClosed("db.open() was cancelled")}function C(){return new Re(function(P,N){if(y(),!f)throw new ne.MissingAPI;var F=r.name,L=o.autoSchema||!x?f.open(F):f.open(F,x);if(!L)throw new ne.MissingAPI;L.onerror=dn(N),L.onblocked=At(r._fireOnBlocked),L.onupgradeneeded=At(function(H){var G;O=L.transaction,o.autoSchema&&!r._options.allowEmptyDB?(L.onerror=Ke,O.abort(),L.result.close(),(G=f.deleteDatabase(F)).onsuccess=G.onerror=At(function(){N(new ne.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(O.onerror=dn(N),H=H.oldVersion>Math.pow(2,62)?0:H.oldVersion,R=H<1,r.idbdb=L.result,m&&Ea(r,O),Aa(r,H/10,O,N))},N),L.onsuccess=At(function(){O=null;var H,G,X,Y,ie,ge=r.idbdb=L.result,Ae=fe(ge.objectStoreNames);if(0<Ae.length)try{var pe=ge.transaction((Y=Ae).length===1?Y[0]:Y,"readonly");if(o.autoSchema)G=ge,X=pe,(H=r).verno=G.version/10,X=H._dbSchema=rs(0,G,X),H._storeNames=fe(G.objectStoreNames,0),Ti(H,[H._allTables],w(X),X);else if(q(r,r._dbSchema,pe),((ie=Ct(rs(0,(ie=r).idbdb,pe),ie._dbSchema)).add.length||ie.change.some(function(Ee){return Ee.add.length||Ee.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),x=ge.version+1,m=!0,P(C());Si(r,pe)}catch{}ue.push(r),ge.onversionchange=At(function(Ee){o.vcFired=!0,r.on("versionchange").fire(Ee)}),ge.onclose=At(function(){r.close({disableAutoOpen:!1})}),R&&(ie=r._deps,pe=F,ge=ie.indexedDB,ie=ie.IDBKeyRange,Rs(ge)||pe===Qi||is(ge,ie).put({name:pe}).catch(M)),P()},N)}).catch(function(P){switch(P==null?void 0:P.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),C();break;case"VersionError":if(0<x)return x=0,C()}return Re.reject(P)})}var I,T=o.dbReadyResolve,O=null,R=!1;return Re.race([d,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function N(){return indexedDB.databases().finally(P)}I=setInterval(N,100),N()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(C)]).then(function(){return y(),o.onReadyBeingFired=[],Re.resolve(Ns(function(){return r.on.ready.fire(r.vip)})).then(function P(){if(0<o.onReadyBeingFired.length){var N=o.onReadyBeingFired.reduce(we,M);return o.onReadyBeingFired=[],Re.resolve(Ns(function(){return N(r.vip)})).then(P)}})}).finally(function(){o.openCanceller===d&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(P){o.dbOpenError=P;try{O&&O.abort()}catch{}return d===o.openCanceller&&r._close(),Ze(P)}).finally(function(){o.openComplete=!0,T()}).then(function(){var P;return R&&(P={},r.tables.forEach(function(N){N.schema.indexes.forEach(function(F){F.name&&(P["idb://".concat(r.name,"/").concat(N.name,"/").concat(F.name)]=new un(-1/0,[[[]]]))}),P["idb://".concat(r.name,"/").concat(N.name,"/")]=P["idb://".concat(r.name,"/").concat(N.name,"/:dels")]=new un(-1/0,[[[]]])}),Lt(_i).fire(P),Kn(P,!0)),r})}function Ri(r){function o(m){return r.next(m)}var f=x(o),d=x(function(m){return r.throw(m)});function x(m){return function(I){var C=m(I),I=C.value;return C.done?I:I&&typeof I.then=="function"?I.then(f,d):A(I)?Promise.all(I).then(f,d):f(I)}}return x(o)()}function Ni(r,o,f){for(var d=A(r)?r.slice():[r],x=0;x<f;++x)d.push(o);return d}var yo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(r){return h(h({},r),{table:function(o){var f=r.table(o),d=f.schema,x={},m=[];function y(R,P,N){var F=wr(R),L=x[F]=x[F]||[],H=R==null?0:typeof R=="string"?1:R.length,G=0<P,G=h(h({},N),{name:G?"".concat(F,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:G,keyTail:P,keyLength:H,extractKey:Xr(R),unique:!G&&N.unique});return L.push(G),G.isPrimaryKey||m.push(G),1<H&&y(H===2?R[0]:R.slice(0,H-1),P+1,N),L.sort(function(X,Y){return X.keyTail-Y.keyTail}),G}o=y(d.primaryKey.keyPath,0,d.primaryKey),x[":id"]=[o];for(var C=0,I=d.indexes;C<I.length;C++){var T=I[C];y(T.keyPath,0,T)}function O(R){var P,N=R.query.index;return N.isVirtual?h(h({},R),{query:{index:N.lowLevelIndex,range:(P=R.query.range,N=N.keyTail,{type:P.type===1?2:P.type,lower:Ni(P.lower,P.lowerOpen?r.MAX_KEY:r.MIN_KEY,N),lowerOpen:!0,upper:Ni(P.upper,P.upperOpen?r.MIN_KEY:r.MAX_KEY,N),upperOpen:!0})}}):R}return h(h({},f),{schema:h(h({},d),{primaryKey:o,indexes:m,getIndexByKeyPath:function(R){return(R=x[wr(R)])&&R[0]}}),count:function(R){return f.count(O(R))},query:function(R){return f.query(O(R))},openCursor:function(R){var P=R.query.index,N=P.keyTail,F=P.isVirtual,L=P.keyLength;return F?f.openCursor(O(R)).then(function(G){return G&&H(G)}):f.openCursor(R);function H(G){return Object.create(G,{continue:{value:function(X){X!=null?G.continue(Ni(X,R.reverse?r.MAX_KEY:r.MIN_KEY,N)):R.unique?G.continue(G.key.slice(0,L).concat(R.reverse?r.MIN_KEY:r.MAX_KEY,N)):G.continue()}},continuePrimaryKey:{value:function(X,Y){G.continuePrimaryKey(Ni(X,r.MAX_KEY,N),Y)}},primaryKey:{get:function(){return G.primaryKey}},key:{get:function(){var X=G.key;return L===1?X[0]:X.slice(0,L)}},value:{get:function(){return G.value}}})}}})}})}};function Ps(r,o,f,d){return f=f||{},d=d||"",w(r).forEach(function(x){var m,y,C;S(o,x)?(m=r[x],y=o[x],typeof m=="object"&&typeof y=="object"&&m&&y?(C=Z(m))!==Z(y)?f[d+x]=o[x]:C==="Object"?Ps(m,y,f,d+x+"."):m!==y&&(f[d+x]=o[x]):m!==y&&(f[d+x]=o[x])):f[d+x]=void 0}),w(o).forEach(function(x){S(r,x)||(f[d+x]=o[x])}),f}function Pr(r,o){return o.type==="delete"?o.keys:o.keys||o.values.map(r.extractKey)}var Bs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return h(h({},r),{table:function(o){var f=r.table(o),d=f.schema.primaryKey;return h(h({},f),{mutate:function(x){var m=xe.trans,y=m.table(o).hook,C=y.deleting,I=y.creating,T=y.updating;switch(x.type){case"add":if(I.fire===M)break;return m._promise("readwrite",function(){return O(x)},!0);case"put":if(I.fire===M&&T.fire===M)break;return m._promise("readwrite",function(){return O(x)},!0);case"delete":if(C.fire===M)break;return m._promise("readwrite",function(){return O(x)},!0);case"deleteRange":if(C.fire===M)break;return m._promise("readwrite",function(){return function R(P,N,F){return f.query({trans:P,values:!1,query:{index:d,range:N},limit:F}).then(function(L){var H=L.result;return O({type:"delete",keys:H,trans:P}).then(function(G){return 0<G.numFailures?Promise.reject(G.failures[0]):H.length<F?{failures:[],numFailures:0,lastResult:void 0}:R(P,h(h({},N),{lower:H[H.length-1],lowerOpen:!0}),F)})})}(x.trans,x.range,1e4)},!0)}return f.mutate(x);function O(R){var P,N,F,L=xe.trans,H=R.keys||Pr(d,R);if(!H)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?h(h({},R),{keys:H}):h({},R)).type!=="delete"&&(R.values=g([],R.values)),R.keys&&(R.keys=g([],R.keys)),P=f,F=H,((N=R).type==="add"?Promise.resolve([]):P.getMany({trans:N.trans,keys:F,cache:"immutable"})).then(function(G){var X=H.map(function(Y,ie){var ge,Ae,pe,Ee=G[ie],Se={onerror:null,onsuccess:null};return R.type==="delete"?C.fire.call(Se,Y,Ee,L):R.type==="add"||Ee===void 0?(ge=I.fire.call(Se,Y,R.values[ie],L),Y==null&&ge!=null&&(R.keys[ie]=Y=ge,d.outbound||K(R.values[ie],d.keyPath,Y))):(ge=Ps(Ee,R.values[ie]),(Ae=T.fire.call(Se,ge,Y,Ee,L))&&(pe=R.values[ie],Object.keys(Ae).forEach(function(Ie){S(pe,Ie)?pe[Ie]=Ae[Ie]:K(pe,Ie,Ae[Ie])}))),Se});return f.mutate(R).then(function(Y){for(var ie=Y.failures,ge=Y.results,Ae=Y.numFailures,Y=Y.lastResult,pe=0;pe<H.length;++pe){var Ee=(ge||H)[pe],Se=X[pe];Ee==null?Se.onerror&&Se.onerror(ie[pe]):Se.onsuccess&&Se.onsuccess(R.type==="put"&&G[pe]?R.values[pe]:Ee)}return{failures:ie,results:ge,numFailures:Ae,lastResult:Y}}).catch(function(Y){return X.forEach(function(ie){return ie.onerror&&ie.onerror(Y)}),Promise.reject(Y)})})}}})}})}};function bo(r,o,f){try{if(!o||o.keys.length<r.length)return null;for(var d=[],x=0,m=0;x<o.keys.length&&m<r.length;++x)ct(o.keys[x],r[m])===0&&(d.push(f?Oe(o.values[x]):o.values[x]),++m);return d.length===r.length?d:null}catch{return null}}var Di={stack:"dbcore",level:-1,create:function(r){return{table:function(o){var f=r.table(o);return h(h({},f),{getMany:function(d){if(!d.cache)return f.getMany(d);var x=bo(d.keys,d.trans._cache,d.cache==="clone");return x?Re.resolve(x):f.getMany(d).then(function(m){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?Oe(m):m},m})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),f.mutate(d)}})}}}};function Ao(r,o){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Ar(r,o){switch(r){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var as={stack:"dbcore",level:0,name:"Observability",create:function(r){var o=r.schema.name,f=new un(r.MIN_KEY,r.MAX_KEY);return h(h({},r),{transaction:function(d,x,m){if(xe.subscr&&x!=="readonly")throw new ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(xe.querier));return r.transaction(d,x,m)},table:function(d){var x=r.table(d),m=x.schema,y=m.primaryKey,R=m.indexes,C=y.extractKey,I=y.outbound,T=y.autoIncrement&&R.filter(function(N){return N.compound&&N.keyPath.includes(y.keyPath)}),O=h(h({},x),{mutate:function(N){function F(Ie){return Ie="idb://".concat(o,"/").concat(d,"/").concat(Ie),Y[Ie]||(Y[Ie]=new un)}var L,H,G,X=N.trans,Y=N.mutatedParts||(N.mutatedParts={}),ie=F(""),ge=F(":dels"),Ae=N.type,Se=N.type==="deleteRange"?[N.range]:N.type==="delete"?[N.keys]:N.values.length<50?[Pr(y,N).filter(function(Ie){return Ie}),N.values]:[],pe=Se[0],Ee=Se[1],Se=N.trans._cache;return A(pe)?(ie.addKeys(pe),(Se=Ae==="delete"||pe.length===Ee.length?bo(pe,Se):null)||ge.addKeys(pe),(Se||Ee)&&(L=F,H=Se,G=Ee,m.indexes.forEach(function(Ie){var Be=L(Ie.name||"");function at(ft){return ft!=null?Ie.extractKey(ft):null}function lt(ft){return Ie.multiEntry&&A(ft)?ft.forEach(function(er){return Be.addKey(er)}):Be.addKey(ft)}(H||G).forEach(function(ft,Sn){var rt=H&&at(H[Sn]),Sn=G&&at(G[Sn]);ct(rt,Sn)!==0&&(rt!=null&&lt(rt),Sn!=null&&lt(Sn))})}))):pe?(Ee={from:(Ee=pe.lower)!==null&&Ee!==void 0?Ee:r.MIN_KEY,to:(Ee=pe.upper)!==null&&Ee!==void 0?Ee:r.MAX_KEY},ge.add(Ee),ie.add(Ee)):(ie.add(f),ge.add(f),m.indexes.forEach(function(Ie){return F(Ie.name).add(f)})),x.mutate(N).then(function(Ie){return!pe||N.type!=="add"&&N.type!=="put"||(ie.addKeys(Ie.results),T&&T.forEach(function(Be){for(var at=N.values.map(function(rt){return Be.extractKey(rt)}),lt=Be.keyPath.findIndex(function(rt){return rt===y.keyPath}),ft=0,er=Ie.results.length;ft<er;++ft)at[ft][lt]=Ie.results[ft];F(Be.name).addKeys(at)})),X.mutatedParts=We(X.mutatedParts||{},Y),Ie})}}),R=function(F){var L=F.query,F=L.index,L=L.range;return[F,new un((F=L.lower)!==null&&F!==void 0?F:r.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:r.MAX_KEY)]},P={get:function(N){return[y,new un(N.key)]},getMany:function(N){return[y,new un().addKeys(N.keys)]},count:R,query:R,openCursor:R};return w(P).forEach(function(N){O[N]=function(F){var L=xe.subscr,H=!!L,G=Ao(xe,x)&&Ar(N,F)?F.obsSet={}:L;if(H){var X=function(Ee){return Ee="idb://".concat(o,"/").concat(d,"/").concat(Ee),G[Ee]||(G[Ee]=new un)},Y=X(""),ie=X(":dels"),L=P[N](F),H=L[0],L=L[1];if((N==="query"&&H.isPrimaryKey&&!F.values?ie:X(H.name||"")).add(L),!H.isPrimaryKey){if(N!=="count"){var ge=N==="query"&&I&&F.values&&x.query(h(h({},F),{values:!1}));return x[N].apply(this,arguments).then(function(Ee){if(N==="query"){if(I&&F.values)return ge.then(function(at){return at=at.result,Y.addKeys(at),Ee});var Se=F.values?Ee.result.map(C):Ee.result;(F.values?Y:ie).addKeys(Se)}else if(N==="openCursor"){var Ie=Ee,Be=F.values;return Ie&&Object.create(Ie,{key:{get:function(){return ie.addKey(Ie.primaryKey),Ie.key}},primaryKey:{get:function(){var at=Ie.primaryKey;return ie.addKey(at),at}},value:{get:function(){return Be&&Y.addKey(Ie.primaryKey),Ie.value}}})}return Ee})}ie.add(f)}}return x[N].apply(this,arguments)}}),O}})}};function Bn(r,o,f){if(f.numFailures===0)return o;if(o.type==="deleteRange")return null;var d=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return f.numFailures===d?null:(o=h({},o),A(o.keys)&&(o.keys=o.keys.filter(function(x,m){return!(m in f.failures)})),"values"in o&&A(o.values)&&(o.values=o.values.filter(function(x,m){return!(m in f.failures)})),o)}function ls(r,o){return f=r,((d=o).lower===void 0||(d.lowerOpen?0<ct(f,d.lower):0<=ct(f,d.lower)))&&(r=r,(o=o).upper===void 0||(o.upperOpen?ct(r,o.upper)<0:ct(r,o.upper)<=0));var f,d}function $n(r,o,P,d,x,m){if(!P||P.length===0)return r;var y=o.query.index,C=y.multiEntry,I=o.query.range,T=d.schema.primaryKey.extractKey,O=y.extractKey,R=(y.lowLevelIndex||y).extractKey,P=P.reduce(function(N,F){var L=N,H=[];if(F.type==="add"||F.type==="put")for(var G=new un,X=F.values.length-1;0<=X;--X){var Y,ie=F.values[X],ge=T(ie);G.hasKey(ge)||(Y=O(ie),(C&&A(Y)?Y.some(function(Ie){return ls(Ie,I)}):ls(Y,I))&&(G.addKey(ge),H.push(ie)))}switch(F.type){case"add":var Ae=new un().addKeys(o.values?N.map(function(Be){return T(Be)}):N),L=N.concat(o.values?H.filter(function(Be){return Be=T(Be),!Ae.hasKey(Be)&&(Ae.addKey(Be),!0)}):H.map(function(Be){return T(Be)}).filter(function(Be){return!Ae.hasKey(Be)&&(Ae.addKey(Be),!0)}));break;case"put":var pe=new un().addKeys(F.values.map(function(Be){return T(Be)}));L=N.filter(function(Be){return!pe.hasKey(o.values?T(Be):Be)}).concat(o.values?H:H.map(function(Be){return T(Be)}));break;case"delete":var Ee=new un().addKeys(F.keys);L=N.filter(function(Be){return!Ee.hasKey(o.values?T(Be):Be)});break;case"deleteRange":var Se=F.range;L=N.filter(function(Be){return!ls(T(Be),Se)})}return L},r);return P===r?r:(P.sort(function(N,F){return ct(R(N),R(F))||ct(T(N),T(F))}),o.limit&&o.limit<1/0&&(P.length>o.limit?P.length=o.limit:r.length===o.limit&&P.length<o.limit&&(x.dirty=!0)),m?Object.freeze(P):P)}function Eo(r,o){return ct(r.lower,o.lower)===0&&ct(r.upper,o.upper)===0&&!!r.lowerOpen==!!o.lowerOpen&&!!r.upperOpen==!!o.upperOpen}function ks(r,o){return function(f,d,x,m){if(f===void 0)return d!==void 0?-1:0;if(d===void 0)return 1;if((d=ct(f,d))===0){if(x&&m)return 0;if(x)return 1;if(m)return-1}return d}(r.lower,o.lower,r.lowerOpen,o.lowerOpen)<=0&&0<=function(f,d,x,m){if(f===void 0)return d!==void 0?1:0;if(d===void 0)return-1;if((d=ct(f,d))===0){if(x&&m)return 0;if(x)return-1;if(m)return 1}return d}(r.upper,o.upper,r.upperOpen,o.upperOpen)}function Ca(r,o,f,d){r.subscribers.add(f),d.addEventListener("abort",function(){var x,m;r.subscribers.delete(f),r.subscribers.size===0&&(x=r,m=o,setTimeout(function(){x.subscribers.size===0&&et(m,x)},3e3))})}var Co={stack:"dbcore",level:0,name:"Cache",create:function(r){var o=r.schema.name;return h(h({},r),{transaction:function(f,d,x){var m,y,C=r.transaction(f,d,x);return d==="readwrite"&&(y=(m=new AbortController).signal,x=function(I){return function(){if(m.abort(),d==="readwrite"){for(var T=new Set,O=0,R=f;O<R.length;O++){var P=R[O],N=yt["idb://".concat(o,"/").concat(P)];if(N){var F=r.table(P),L=N.optimisticOps.filter(function(Be){return Be.trans===C});if(C._explicit&&I&&C.mutatedParts)for(var H=0,G=Object.values(N.queries.query);H<G.length;H++)for(var X=0,Y=(Ae=G[H]).slice();X<Y.length;X++)Ms((pe=Y[X]).obsSet,C.mutatedParts)&&(et(Ae,pe),pe.subscribers.forEach(function(Be){return T.add(Be)}));else if(0<L.length){N.optimisticOps=N.optimisticOps.filter(function(Be){return Be.trans!==C});for(var ie=0,ge=Object.values(N.queries.query);ie<ge.length;ie++)for(var Ae,pe,Ee,Se=0,Ie=(Ae=ge[ie]).slice();Se<Ie.length;Se++)(pe=Ie[Se]).res!=null&&C.mutatedParts&&(I&&!pe.dirty?(Ee=Object.isFrozen(pe.res),Ee=$n(pe.res,pe.req,L,F,pe,Ee),pe.dirty?(et(Ae,pe),pe.subscribers.forEach(function(Be){return T.add(Be)})):Ee!==pe.res&&(pe.res=Ee,pe.promise=Re.resolve({result:Ee}))):(pe.dirty&&et(Ae,pe),pe.subscribers.forEach(function(Be){return T.add(Be)})))}}}T.forEach(function(Be){return Be()})}}},C.addEventListener("abort",x(!1),{signal:y}),C.addEventListener("error",x(!1),{signal:y}),C.addEventListener("complete",x(!0),{signal:y})),C},table:function(f){var d=r.table(f),x=d.schema.primaryKey;return h(h({},d),{mutate:function(m){var y=xe.trans;if(x.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return d.mutate(m);var C=yt["idb://".concat(o,"/").concat(f)];return C?(y=d.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Pr(x,m).some(function(I){return I==null}))?(C.optimisticOps.push(m),m.mutatedParts&&ss(m.mutatedParts),y.then(function(I){0<I.numFailures&&(et(C.optimisticOps,m),(I=Bn(0,m,I))&&C.optimisticOps.push(I),m.mutatedParts&&ss(m.mutatedParts))}),y.catch(function(){et(C.optimisticOps,m),m.mutatedParts&&ss(m.mutatedParts)})):y.then(function(I){var T=Bn(0,h(h({},m),{values:m.values.map(function(O,R){var P;return I.failures[R]?O:(O=(P=x.keyPath)!==null&&P!==void 0&&P.includes(".")?Oe(O):h({},O),K(O,x.keyPath,I.results[R]),O)})}),I);C.optimisticOps.push(T),queueMicrotask(function(){return m.mutatedParts&&ss(m.mutatedParts)})}),y):d.mutate(m)},query:function(m){if(!Ao(xe,d)||!Ar("query",m))return d.query(m);var y=((T=xe.trans)===null||T===void 0?void 0:T.db._options.cache)==="immutable",R=xe,C=R.requery,I=R.signal,T=function(F,L,H,G){var X=yt["idb://".concat(F,"/").concat(L)];if(!X)return[];if(!(L=X.queries[H]))return[null,!1,X,null];var Y=L[(G.query?G.query.index.name:null)||""];if(!Y)return[null,!1,X,null];switch(H){case"query":var ie=Y.find(function(ge){return ge.req.limit===G.limit&&ge.req.values===G.values&&Eo(ge.req.query.range,G.query.range)});return ie?[ie,!0,X,Y]:[Y.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=G.limit&&(!G.values||ge.req.values)&&ks(ge.req.query.range,G.query.range)}),!1,X,Y];case"count":return ie=Y.find(function(ge){return Eo(ge.req.query.range,G.query.range)}),[ie,!!ie,X,Y]}}(o,f,"query",m),O=T[0],R=T[1],P=T[2],N=T[3];return O&&R?O.obsSet=m.obsSet:(R=d.query(m).then(function(F){var L=F.result;if(O&&(O.res=L),y){for(var H=0,G=L.length;H<G;++H)Object.freeze(L[H]);Object.freeze(L)}else F.result=Oe(L);return F}).catch(function(F){return N&&O&&et(N,O),Promise.reject(F)}),O={obsSet:m.obsSet,promise:R,subscribers:new Set,type:"query",req:m,dirty:!1},N?N.push(O):(N=[O],(P=P||(yt["idb://".concat(o,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=N)),Ca(O,N,C,I),O.promise.then(function(F){return{result:$n(F.result,m,P==null?void 0:P.optimisticOps,d,O,y)}})}})}})}};function kn(r,o){return new Proxy(r,{get:function(f,d,x){return d==="db"?o:Reflect.get(f,d,x)}})}var Er=(jt.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ne.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,f=o.filter(function(d){return d._cfg.version===r})[0];return f||(f=new this.Version(r),o.push(f),o.sort(ba),f.stores({}),this._state.autoSchema=!1,f)},jt.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?r():new Re(function(f,d){if(o._state.openComplete)return d(new ne.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void d(new ne.DatabaseClosed);o.open().catch(M)}o._state.dbReadyPromise.then(f,d)}).then(r)},jt.prototype.use=function(r){var o=r.stack,f=r.create,d=r.level,x=r.name;return x&&this.unuse({stack:o,name:x}),r=this._middlewares[o]||(this._middlewares[o]=[]),r.push({stack:o,create:f,level:d??10,name:x}),r.sort(function(m,y){return m.level-y.level}),this},jt.prototype.unuse=function(r){var o=r.stack,f=r.name,d=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(x){return d?x.create!==d:!!f&&x.name!==f})),this},jt.prototype.open=function(){var r=this;return Wr(st,function(){return wo(r)})},jt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=ue.indexOf(this);if(0<=o&&ue.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new Re(function(f){r.dbReadyResolve=f}),r.openCanceller=new Re(function(f,d){r.cancelOpen=d}))},jt.prototype.close=function(f){var o=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;o?(f.isBeingOpened&&f.cancelOpen(new ne.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new ne.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},jt.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",d=this._state;return new Re(function(x,m){function y(){o.close(r);var C=o._deps.indexedDB.deleteDatabase(o.name);C.onsuccess=At(function(){var I,T,O;I=o._deps,T=o.name,O=I.indexedDB,I=I.IDBKeyRange,Rs(O)||T===Qi||is(O,I).delete(T).catch(M),x()}),C.onerror=dn(m),C.onblocked=o._fireOnBlocked}if(f)throw new ne.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(y):y()})},jt.prototype.backendDB=function(){return this.idbdb},jt.prototype.isOpen=function(){return this.idbdb!==null},jt.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(jt.prototype,"tables",{get:function(){var r=this;return w(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),jt.prototype.transaction=function(){var r=(function(o,f,d){var x=arguments.length;if(x<2)throw new ne.InvalidArgument("Too few arguments");for(var m=new Array(x-1);--x;)m[x-1]=arguments[x];return d=m.pop(),[o,he(m),d]}).apply(this,arguments);return this._transaction.apply(this,r)},jt.prototype._transaction=function(r,o,f){var d=this,x=xe.trans;x&&x.db===this&&r.indexOf("!")===-1||(x=null);var m,y,C=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");try{if(y=o.map(function(T){if(T=T instanceof d.Table?T.name:T,typeof T!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return T}),r=="r"||r===kt)m=kt;else{if(r!="rw"&&r!=Or)throw new ne.InvalidArgument("Invalid transaction mode: "+r);m=Or}if(x){if(x.mode===kt&&m===Or){if(!C)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&y.forEach(function(T){if(x&&x.storeNames.indexOf(T)===-1){if(!C)throw new ne.SubTransaction("Table "+T+" not included in parent transaction.");x=null}}),C&&x&&!x.active&&(x=null)}}catch(T){return x?x._promise(null,function(O,R){R(T)}):Ze(T)}var I=(function T(O,R,P,N,F){return Re.resolve().then(function(){var L=xe.transless||xe,H=O._createTransaction(R,P,O._dbSchema,N);if(H.explicit=!0,L={trans:H,transless:L},N)H.idbtrans=N.idbtrans;else try{H.create(),H.idbtrans._explicit=!0,O._state.PR1398_maxLoop=3}catch(Y){return Y.name===oe.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return T(O,R,P,null,F)})):Ze(Y)}var G,X=yn(F);return X&&sn(),L=Re.follow(function(){var Y;(G=F.call(H,H))&&(X?(Y=Mn.bind(null,null),G.then(Y,Y)):typeof G.next=="function"&&typeof G.throw=="function"&&(G=Ri(G)))},L),(G&&typeof G.then=="function"?Re.resolve(G).then(function(Y){return H.active?Y:Ze(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return G})).then(function(Y){return N&&H._resolve(),H._completion.then(function(){return Y})}).catch(function(Y){return H._reject(Y),Ze(Y)})})}).bind(null,this,m,y,x,f);return x?x._promise(m,I,"lock"):xe.trans?Wr(xe.transless,function(){return d._whenReady(I)}):this._whenReady(I)},jt.prototype.table=function(r){if(!S(this._allTables,r))throw new ne.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},jt);function jt(r,o){var f=this;this._middlewares={},this.verno=0;var d=jt.dependencies;this._options=o=h({addons:jt.addons,autoOpen:!0,indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},d=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,m,y,C,I,T={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};T.dbReadyPromise=new Re(function(R){T.dbReadyResolve=R}),T.openCanceller=new Re(function(R,P){T.cancelOpen=P}),this._state=T,this.name=r,this.on=lr(this,"populate","blocked","versionchange","close",{ready:[we,M]}),this.once=function(R,P){var N=function(){for(var F=[],L=0;L<arguments.length;L++)F[L]=arguments[L];f.on(R).unsubscribe(N),P.apply(f,F)};return f.on(R,N)},this.on.ready.subscribe=ae(this.on.ready.subscribe,function(R){return function(P,N){jt.vip(function(){var F,L=f._state;L.openComplete?(L.dbOpenError||Re.resolve().then(P),N&&R(P)):L.onReadyBeingFired?(L.onReadyBeingFired.push(P),N&&R(P)):(R(P),F=f,N||R(function H(){F.on.ready.unsubscribe(P),F.on.ready.unsubscribe(H)}))})}}),this.Collection=(x=this,Et(Ts.prototype,function(G,H){this.db=x;var N=wt,F=null;if(H)try{N=H()}catch(X){F=X}var L=G._ctx,H=L.table,G=H.hook.reading.fire;this._ctx={table:H,index:L.index,isPrimKey:!L.index||H.schema.primKey.keyPath&&L.index===H.schema.primKey.name,range:N,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:L.or,valueMapper:G!==B?G:null}})),this.Table=(m=this,Et(xr.prototype,function(R,P,N){this.db=m,this._tx=N,this.name=R,this.schema=P,this.hook=m._allTables[R]?m._allTables[R].hook:lr(null,{creating:[ce,M],reading:[W,B],updating:[de,M],deleting:[te,M]})})),this.Transaction=(y=this,Et(ya.prototype,function(R,P,N,F,L){var H=this;R!=="readonly"&&P.forEach(function(G){G=(G=N[G])===null||G===void 0?void 0:G.yProps,G&&(P=P.concat(G.map(function(X){return X.updatesTable})))}),this.db=y,this.mode=R,this.storeNames=P,this.schema=N,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=lr(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(G,X){H._resolve=G,H._reject=X}),this._completion.then(function(){H.active=!1,H.on.complete.fire()},function(G){var X=H.active;return H.active=!1,H.on.error.fire(G),H.parent?H.parent._reject(G):X&&H.idbtrans&&H.idbtrans.abort(),Ze(G)})})),this.Version=(C=this,Et(gn.prototype,function(R){this.db=C,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,Et(an.prototype,function(R,P,N){if(this.db=I,this._ctx={table:R,index:P===":id"?null:P,or:N},this._cmp=this._ascending=ct,this._descending=function(F,L){return ct(L,F)},this._max=function(F,L){return 0<ct(F,L)?F:L},this._min=function(F,L){return ct(F,L)<0?F:L},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new ne.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=mr(o.IDBKeyRange),this._createTransaction=function(R,P,N,F){return new f.Transaction(R,P,N,f._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(R){f.on("blocked").fire(R),ue.filter(function(P){return P.name===f.name&&P!==f&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(R)})},this.use(Di),this.use(Co),this.use(as),this.use(yo),this.use(Bs);var O=new Proxy(this,{get:function(R,P,N){if(P==="_vip")return!0;if(P==="table")return function(L){return kn(f.table(L),O)};var F=Reflect.get(R,P,N);return F instanceof xr?kn(F,O):P==="tables"?F.map(function(L){return kn(L,O)}):P==="_createTransaction"?function(){return kn(F.apply(this,arguments),O)}:F}});this.vip=O,d.forEach(function(R){return R(f)})}var Br,Qe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cs=(v.prototype.subscribe=function(r,o,f){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:o,complete:f})},v.prototype[Qe]=function(){return this},v);function v(r){this._subscribe=r}try{Br={indexedDB:p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange}}catch{Br={indexedDB:null,IDBKeyRange:null}}function e(r){var o,f=!1,d=new cs(function(x){var m=yn(r),y,C=!1,I={},T={},O={get closed(){return C},unsubscribe:function(){C||(C=!0,y&&y.abort(),R&&Lt.storagemutated.unsubscribe(N))}};x.start&&x.start(O);var R=!1,P=function(){return hn(F)},N=function(L){We(I,L),Ms(T,I)&&P()},F=function(){var L,H,G;!C&&Br.indexedDB&&(I={},L={},y&&y.abort(),y=new AbortController,G=function(X){var Y=Zn();try{m&&sn();var ie=ar(r,X);return ie=m?ie.finally(Mn):ie}finally{Y&&pr()}}(H={subscr:L,signal:y.signal,requery:P,querier:r,trans:null}),Promise.resolve(G).then(function(X){f=!0,o=X,C||H.signal.aborted||(I={},function(Y){for(var ie in Y)if(S(Y,ie))return;return 1}(T=L)||R||(Lt(_i,N),R=!0),hn(function(){return!C&&x.next&&x.next(X)}))},function(X){f=!1,["DatabaseClosedError","AbortError"].includes(X==null?void 0:X.name)||C||hn(function(){C||x.error&&x.error(X)})}))};return setTimeout(P,0),O});return d.hasValue=function(){return f},d.getValue=function(){return o},d}var t=Er;function i(r){var o=l;try{l=!0,Lt.storagemutated.fire(r),Kn(r,!0)}finally{l=o}}k(t,h(h({},Xe),{delete:function(r){return new t(r,{addons:[]}).delete()},exists:function(r){return new t(r,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return o=t.dependencies,f=o.indexedDB,o=o.IDBKeyRange,(Rs(f)?Promise.resolve(f.databases()).then(function(d){return d.map(function(x){return x.name}).filter(function(x){return x!==Qi})}):is(f,o).toCollection().primaryKeys()).then(r)}catch{return Ze(new ne.MissingAPI)}var o,f},defineClass:function(){return function(r){E(this,r)}},ignoreTransaction:function(r){return xe.trans?Wr(xe.transless,r):r()},vip:Ns,async:function(r){return function(){try{var o=Ri(r.apply(this,arguments));return o&&typeof o.then=="function"?o:Re.resolve(o)}catch(f){return Ze(f)}}},spawn:function(r,o,f){try{var d=Ri(r.apply(f,o||[]));return d&&typeof d.then=="function"?d:Re.resolve(d)}catch(x){return Ze(x)}},currentTransaction:{get:function(){return xe.trans||null}},waitFor:function(r,o){return o=Re.resolve(typeof r=="function"?t.ignoreTransaction(r):r).timeout(o||6e4),xe.trans?xe.trans.waitFor(o):o},Promise:Re,debug:{get:function(){return j},set:function(r){He(r)}},derive:ee,extend:E,props:k,override:ae,Events:lr,on:Lt,liveQuery:e,extendObservabilitySet:We,getByKeyPath:ve,setByKeyPath:K,delByKeyPath:function(r,o){typeof o=="string"?K(r,o,void 0):"length"in o&&[].map.call(o,function(f){K(r,f,void 0)})},shallowClone:Q,deepClone:Oe,getObjectDiff:Ps,cmp:ct,asap:Fe,minKey:-1/0,addons:[],connections:ue,errnames:oe,dependencies:Br,cache:yt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(r){return parseInt(r)}).reduce(function(r,o,f){return r+o/Math.pow(10,2*f)})})),t.maxKey=mr(t.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Lt(_i,function(r){l||(r=new CustomEvent(tt,{detail:r}),l=!0,dispatchEvent(r),l=!1)}),addEventListener(tt,function(r){r=r.detail,l||i(r)}));var s,l=!1,u=function(){};return typeof BroadcastChannel<"u"&&((u=function(){(s=new BroadcastChannel(tt)).onmessage=function(r){return r.data&&i(r.data)}})(),typeof s.unref=="function"&&s.unref(),Lt(_i,function(r){l||s.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!Er.disableBfCache&&r.persisted){j&&console.debug("Dexie: handling persisted pagehide"),s!=null&&s.close();for(var o=0,f=ue;o<f.length;o++)f[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(r){!Er.disableBfCache&&r.persisted&&(j&&console.debug("Dexie: handling persisted pageshow"),u(),i({all:new un(-1/0,[[]])}))})),Re.rejectionMapper=function(r,o){return!r||r instanceof nn||r instanceof TypeError||r instanceof SyntaxError||!r.name||!Ue[r.name]?r:(o=new Ue[r.name](o||r.message,r),"stack"in r&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},He(j),h(Er,Object.freeze({__proto__:null,Dexie:Er,liveQuery:e,Entity:ut,cmp:ct,PropModification:Wn,replacePrefix:function(r,o){return new Wn({replacePrefix:[r,o]})},add:function(r){return new Wn({add:r})},remove:function(r){return new Wn({remove:r})},default:Er,RangeSet:un,mergeRanges:zr,rangesOverlap:Wt}),{default:Er}),Er})})(Wf);var Hd=Wf.exports;const ll=Gf(Hd),Uc=Symbol.for("Dexie"),Yo=globalThis[Uc]||(globalThis[Uc]=ll);if(ll.semVer!==Yo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ll.semVer} and ${Yo.semVer}`);const{liveQuery:x2,mergeRanges:m2,rangesOverlap:w2,RangeSet:y2,cmp:b2,Entity:A2,PropModification:E2,replacePrefix:C2,add:v2,remove:_2,DexieYProvider:I2}=Yo,vt=new Yo("VoiceNotesDB");vt.version(1).stores({lists:"id, name, order",items:"id, listId, completed, createdAt",settings:"id"});typeof window<"u"&&(window.db=vt);const S2=Object.freeze(Object.defineProperty({__proto__:null,db:vt},Symbol.toStringTag,{value:"Module"})),cl="https://notes.server.michoest.com",Gd="http://192.168.178.97:3001";let Gi=cl;async function Wd(){try{const n=new AbortController;setTimeout(()=>n.abort(),2e3),await fetch(`${cl}/api/workspaces/test`,{signal:n.signal,mode:"no-cors"}),Gi=cl}catch{Gi=Gd}console.log("Using API:",Gi)}const Xn=Nt(null),Ga=Nt(null),Vs=Nt(0),No=Nt(navigator.onLine),Do=Nt(!1),Hs=Nt(null);let di=null;function gs(){async function n(){await Wd();let E=await vt.settings.get("deviceId");E||(E={id:"deviceId",value:crypto.randomUUID()},await vt.settings.put(E)),Ga.value=E.value;const b=await vt.settings.get("workspace");b&&(Xn.value=b.value,Vs.value=b.value.lastSyncAt||0,g()),window.addEventListener("online",()=>{No.value=!0,w()}),window.addEventListener("offline",()=>{No.value=!1})}async function a(){const E=await fetch(`${Gi}/api/workspaces`,{method:"POST"});if(!E.ok)throw new Error("Failed to create workspace");const b=await E.json();return Xn.value={id:b.id,code:b.code,lastSyncAt:0},await vt.settings.put({id:"workspace",value:{...Xn.value}}),g(),b}async function c(E){const b=await fetch(`${Gi}/api/workspaces/${E.toUpperCase()}`);if(!b.ok)throw new Error("Workspace not found");const _=await b.json();return Xn.value={id:_.id,code:_.code,lastSyncAt:0},await vt.settings.put({id:"workspace",value:{...Xn.value}}),g(),await w(),_}async function h(){p(),Xn.value=null,await vt.settings.delete("workspace"),await vt.lists.clear(),await vt.items.clear()}function g(){if(!Xn.value||di)return;const E=Gi.replace("http","ws")+"/ws/"+Xn.value.id;di=new WebSocket(E),di.onmessage=async b=>{const _=JSON.parse(b.data);_.type==="sync"&&(await A(_.changes),Hs.value&&Hs.value())},di.onclose=()=>{di=null,Xn.value&&setTimeout(g,5e3)}}function p(){di&&(di.close(),di=null)}async function w(){if(!(!Xn.value||!No.value||Do.value)){Do.value=!0;try{const E=await vt.lists.toArray(),b=await vt.items.toArray(),_=await fetch(`${Gi}/api/sync/${Xn.value.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceId:Ga.value,lastSyncAt:Vs.value,lists:E.filter(k=>k.updatedAt>Vs.value),items:b.filter(k=>k.updatedAt>Vs.value)})});if(!_.ok)throw new Error("Sync failed");const S=await _.json();await A(S),Vs.value=S.syncedAt,Xn.value.lastSyncAt=S.syncedAt,await vt.settings.put({id:"workspace",value:{...Xn.value}})}catch(E){console.error("Sync error:",E)}finally{Do.value=!1,Hs.value&&Hs.value()}}}async function A({lists:E=[],items:b=[]}){for(const _ of E){const S=await vt.lists.get(_.id);(!S||_.updatedAt>S.updatedAt)&&await vt.lists.put(_)}for(const _ of b){const S=await vt.items.get(_.id);(!S||_.updatedAt>S.updatedAt)&&await vt.items.put(_)}}return{workspace:Xn,deviceId:Ga,isOnline:No,isSyncing:Do,onSyncComplete:Hs,init:n,createWorkspace:a,joinWorkspace:c,leaveWorkspace:h,sync:w}}const wa=Ph("notes",()=>{const n=Nt({}),a=Nt([]),c=Nt([]),h=Nt({openaiApiKey:"",defaultListId:"inbox"}),g=Nt("inbox"),p=Nt(!0),w=En(()=>a.value.find(Q=>Q.id===g.value)),A=En(()=>c.value.filter(Q=>Q.listId===g.value&&!Q.deletedAt).sort((Q,V)=>Q.completed!==V.completed?Q.completed?1:-1:V.createdAt-Q.createdAt)),E=En(()=>{const Q={};return a.value.forEach(V=>{Q[V.id]=c.value.filter(he=>he.listId===V.id)}),Q}),b=En(()=>!!h.value.openaiApiKey);async function _(){p.value=!0;try{const Q=await vt.settings.get("main");Q&&(h.value={...h.value,...Q.value});const V=await vt.lists.toArray();if(V.length===0){const he=[{id:"inbox",name:"Inbox",icon:"inbox",color:"#64748b",order:0,updatedAt:Date.now()},{id:"todo",name:"To-Do",icon:"check-circle",color:"#22c55e",order:1,updatedAt:Date.now()},{id:"shopping",name:"Shopping",icon:"shopping-cart",color:"#f97316",order:2,updatedAt:Date.now()},{id:"ideas",name:"Ideas",icon:"lightbulb",color:"#eab308",order:3,updatedAt:Date.now()}];await vt.lists.bulkAdd(he),a.value=he}else a.value=V.sort((he,Ne)=>he.order-Ne.order);c.value=await vt.items.toArray(),await K()}catch(Q){console.error("Failed to initialize store:",Q)}finally{p.value=!1}}function S(Q){g.value=Q}async function k(Q,V){const he={id:crypto.randomUUID(),listId:Q,text:V,completed:!1,createdAt:Date.now(),updatedAt:Date.now(),deletedAt:null};await vt.items.add(he),c.value.push(he);const{sync:Ne}=gs();return Ne(),he}async function U(Q,V){const he=c.value.find(Je=>Je.id===Q);if(!he)return;const Ne={...he,...V,updatedAt:Date.now()};await vt.items.put({...Ne});const $=c.value.findIndex(Je=>Je.id===Q);c.value[$]=Ne;const{sync:Oe}=gs();Oe()}async function se(Q){const V=c.value.find(he=>he.id===Q);V&&await U(Q,{completed:!V.completed})}async function ee(Q){const V=c.value.find($=>$.id===Q);if(!V)return;const he={...V,deletedAt:Date.now(),updatedAt:Date.now()};await vt.items.put({...he}),c.value=c.value.filter($=>$.id!==Q);const{sync:Ne}=gs();Ne()}async function me(Q,V){await U(Q,{listId:V})}async function ye(Q,V="folder",he="#64748b"){const Ne={id:crypto.randomUUID(),name:Q,icon:V,color:he,order:a.value.length,updatedAt:Date.now()};await vt.lists.add(Ne),a.value.push(Ne);const{sync:$}=gs();return $(),Ne}async function fe(Q,V){const he=a.value.find(Oe=>Oe.id===Q);if(!he)return;const Ne={...he,...V};await vt.lists.put(Ne);const $=a.value.findIndex(Oe=>Oe.id===Q);a.value[$]=Ne}async function ae(Q){if(["inbox","todo","shopping","ideas"].includes(Q))return;const V=c.value.filter(he=>he.listId===Q);for(const he of V)await me(he.id,"inbox");await vt.lists.delete(Q),a.value=a.value.filter(he=>he.id!==Q)}async function J(Q){h.value={...h.value,...Q},await vt.settings.put({id:"main",value:{...h.value}})}async function Fe(Q){const V=c.value.filter(he=>he.listId===Q&&he.completed);for(const he of V)await vt.items.delete(he.id);c.value=c.value.filter(he=>!(he.listId===Q&&he.completed))}async function ve(Q,V){n.value[Q]=V,await vt.settings.put({id:`showCompleted_${Q}`,value:V})}async function K(){const Q=await vt.settings.toArray();for(const V of Q)if(V.id.startsWith("showCompleted_")){const he=V.id.replace("showCompleted_","");n.value[he]=V.value}}return{lists:a,items:c,settings:h,currentListId:g,isLoading:p,currentList:w,currentItems:A,itemsByList:E,hasApiKey:b,initialize:_,setCurrentList:S,addItem:k,updateItem:U,toggleItem:se,deleteItem:ee,moveItem:me,addList:ye,updateList:fe,deleteList:ae,saveSettings:J,clearCompleted:Fe,listSettings:n,setShowCompleted:ve}}),jd=["stroke","innerHTML"],Kd={__name:"ListIcon",props:{icon:{type:String,default:"folder"},color:{type:String,default:"#64748b"}},setup(n){const a={inbox:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />',"check-circle":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />',"shopping-cart":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />',lightbulb:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />',folder:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />',star:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />',heart:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />',bookmark:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />',tag:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />',home:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />'};return(c,h)=>(xt(),_t("svg",{class:"flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:n.color,innerHTML:a[n.icon]||a.folder},null,8,jd))}},Xd={class:"p-6 border-b border-surface-800"},zd={class:"flex items-center justify-between"},Yd={class:"flex-1 overflow-y-auto p-4 space-y-1"},qd=["onClick"],Zd={class:"flex-1 truncate"},Qd={key:0,class:"text-xs font-medium px-2 py-0.5 rounded-full bg-surface-700 text-surface-400"},Jd={class:"p-4 border-t border-surface-800 space-y-1"},$d={__name:"Sidebar",props:{open:Boolean},emits:["close"],setup(n,{emit:a}){const c=a,h=Vf(),g=Hf(),p=wa(),w=b=>g.params.listId===b;function A(b){h.push(`/list/${b}`),c("close")}function E(b){return p.items.filter(_=>_.listId===b&&!_.completed).length}return(b,_)=>(xt(),_t("aside",{class:Ai(["w-72 h-full bg-surface-900 border-r border-surface-800 flex flex-col","transform transition-transform duration-300 ease-out","lg:translate-x-0",n.open?"translate-x-0":"-translate-x-full"])},[Pe("div",Xd,[Pe("div",zd,[_[3]||(_[3]=Pe("h1",{class:"font-display font-bold text-xl text-surface-100"}," Voice Notes ",-1)),Pe("button",{onClick:_[0]||(_[0]=S=>b.$emit("close")),class:"lg:hidden btn-ghost p-1"},[..._[2]||(_[2]=[Pe("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),Pe("nav",Yd,[(xt(!0),_t(zn,null,Ku(qn(p).lists,S=>(xt(),_t("button",{key:S.id,onClick:k=>A(S.id),class:Ai(["nav-item w-full text-left group",w(S.id)&&"nav-item-active"])},[qt(Kd,{icon:S.icon,color:S.color,class:"w-5 h-5"},null,8,["icon","color"]),Pe("span",Zd,Yn(S.name),1),E(S.id)>0?(xt(),_t("span",Qd,Yn(E(S.id)),1)):fr("",!0)],10,qd))),128))]),Pe("div",Jd,[Pe("button",{onClick:_[1]||(_[1]=S=>{qn(h).push("/settings"),b.$emit("close")}),class:Ai(["nav-item w-full text-left",qn(g).path==="/settings"&&"nav-item-active"])},[..._[4]||(_[4]=[Pe("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Pe("span",null,"Settings",-1)])],2)])],2))}},eg={key:0,class:"text-center"},tg={class:"relative"},ng={key:0,class:"absolute inset-0 flex items-center justify-center"},rg=["disabled"],ig={key:0,class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},sg={key:1,class:"w-8 h-8 animate-spin",fill:"none",viewBox:"0 0 24 24"},og={key:2,class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ag={class:"text-center"},lg={key:0,class:"text-surface-200 font-medium"},cg={key:1,class:"text-surface-400"},ug={key:2,class:"text-surface-400"},fg={key:0,class:"text-center"},hg={class:"text-red-400 text-sm"},dg={__name:"VoiceButton",props:{autoStart:Boolean,compact:Boolean},emits:["result","cancel"],setup(n,{emit:a}){const c=n,h=a,g=wa(),p=Nt(!1),w=Nt(!1),A=Nt(null),E=Nt(""),b=Nt(0),_=Nt("Transcribing...");let S=null,k=[],U=null,se=null,ee=null;const me=En(()=>!!g.settings.openaiApiKey);ua(()=>{c.autoStart&&me.value&&ye()}),co(()=>{fe(),ee&&cancelAnimationFrame(ee)});async function ye(){A.value=null,E.value="",k=[];try{let V=function(){se.getByteFrequencyData(Q);const he=Q.reduce((Ne,$)=>Ne+$)/Q.length;b.value=he/255,ee=requestAnimationFrame(V)};const ve=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});U=new(window.AudioContext||window.webkitAudioContext),se=U.createAnalyser(),U.createMediaStreamSource(ve).connect(se),se.fftSize=256;const Q=new Uint8Array(se.frequencyBinCount);V(),S=new MediaRecorder(ve,{mimeType:MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4"}),S.ondataavailable=he=>{he.data.size>0&&k.push(he.data)},S.onstop=async()=>{ve.getTracks().forEach(he=>he.stop()),ee&&cancelAnimationFrame(ee),U&&U.close(),await ae()},S.start(100),p.value=!0}catch(ve){console.error("Failed to start recording:",ve),A.value=ve.name==="NotAllowedError"?"Microphone access denied. Please allow microphone access and try again.":"Failed to access microphone. Please check your device settings."}}function fe(){S&&p.value&&(S.stop(),p.value=!1)}async function ae(){var ve,K;if(k.length===0){A.value="No audio recorded";return}w.value=!0,A.value=null;try{const Q=new Blob(k,{type:S.mimeType}),V=new FormData;V.append("file",Q,"recording.webm"),V.append("model","whisper-1"),V.append("language","en");const he=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${g.settings.openaiApiKey}`},body:V});if(!he.ok){const $=await he.json().catch(()=>({}));throw new Error(((ve=$.error)==null?void 0:ve.message)||`API error: ${he.status}`)}const Ne=await he.json();E.value=Ne.text,(K=Ne.text)!=null&&K.trim()?(E.value=Ne.text,h("result",Ne.text.trim())):A.value="No speech detected. Please try again."}catch(Q){console.error("Transcription failed:",Q),A.value=Q.message||"Failed to transcribe audio"}finally{w.value=!1}}function J(){fe(),h("cancel")}function Fe(){p.value?fe():ye()}return(ve,K)=>{const Q=Gu("router-link");return xt(),_t("div",{class:Ai(["flex flex-col items-center",n.compact?"gap-4":"gap-8"])},[me.value?(xt(),_t(zn,{key:1},[Pe("div",tg,[p.value?(xt(),_t("div",ng,[Pe("div",{class:"absolute w-32 h-32 rounded-full bg-accent/20 animate-ping",style:Js({transform:`scale(${1+b.value*.5})`})},null,4),Pe("div",{class:"absolute w-24 h-24 rounded-full bg-accent/30 animate-pulse",style:Js({transform:`scale(${1+b.value*.3})`})},null,4)])):fr("",!0),Pe("button",{onClick:Fe,disabled:w.value,class:Ai(["relative z-10 w-20 h-20 rounded-full flex items-center justify-center","transition-all duration-300 focus:outline-none focus:ring-4",p.value?"bg-red-500 text-white focus:ring-red-500/30 animate-recording":w.value?"bg-surface-700 text-surface-400":"bg-accent text-white hover:bg-accent-dark focus:ring-accent/30"])},[p.value?(xt(),_t("svg",ig,[...K[3]||(K[3]=[Pe("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"},null,-1)])])):w.value?(xt(),_t("svg",sg,[...K[4]||(K[4]=[Pe("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Pe("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(xt(),_t("svg",og,[...K[5]||(K[5]=[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},null,-1)])]))],10,rg)]),Pe("div",ag,[p.value?(xt(),_t("p",lg," Listening... ")):w.value?(xt(),_t("p",cg,Yn(_.value),1)):(xt(),_t("p",ug," Tap to start recording "))]),A.value?(xt(),_t("div",fg,[Pe("p",hg,Yn(A.value),1),!p.value&&!w.value?(xt(),_t("button",{key:0,onClick:ye,class:"btn-secondary mt-3"}," Try Again ")):fr("",!0)])):fr("",!0),n.compact?fr("",!0):(xt(),_t("button",{key:1,onClick:J,class:"btn-ghost text-surface-400"}," Cancel "))],64)):(xt(),_t("div",eg,[K[2]||(K[2]=hf('<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-500/20 flex items-center justify-center"><svg class="w-8 h-8 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><h3 class="font-display font-semibold text-surface-200 mb-2">API Key Required</h3><p class="text-surface-400 text-sm mb-4"> Add your OpenAI API key in Settings to enable voice input. </p>',3)),qt(Q,{to:"/settings",class:"btn-primary",onClick:K[0]||(K[0]=V=>ve.$emit("cancel"))},{default:Fi(()=>[...K[1]||(K[1]=[Sl(" Go to Settings ",-1)])]),_:1})]))],2)}}};function gg(){const n=wa();async function a(c){if(!n.settings.openaiApiKey)return{listId:"inbox",text:c};const g=`You are a note categorization assistant. Given the following lists and a new item, determine the best list for the item.

Lists:
${n.lists.map(p=>{const w=n.items.filter(A=>A.listId===p.id&&!A.completed).slice(0,5).map(A=>A.text);return{id:p.id,name:p.name,description:p.description||"",sampleItems:w}}).map(p=>`- "${p.name}" (id: ${p.id}): ${p.description}${p.sampleItems.length?`
  Sample items: ${p.sampleItems.join(", ")}`:""}`).join(`
`)}

New item: "${c}"

Respond with JSON only:
{
  "listId": "the best matching list id",
  "cleanedText": "the item text, cleaned up if needed (fix typos, improve clarity, but keep the meaning)"
}
`;try{const p=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.settings.openaiApiKey}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:g}],temperature:.3,response_format:{type:"json_object"}})});if(!p.ok)throw new Error("API error");const w=await p.json(),A=JSON.parse(w.choices[0].message.content);return{listId:n.lists.find(b=>b.id===A.listId)?A.listId:"inbox",text:A.cleanedText||c}}catch(p){return console.error("AI categorization failed:",p),{listId:"inbox",text:c}}}return{categorize:a}}var ke;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var Vc=new Map([[ke.QR_CODE,"QR_CODE"],[ke.AZTEC,"AZTEC"],[ke.CODABAR,"CODABAR"],[ke.CODE_39,"CODE_39"],[ke.CODE_93,"CODE_93"],[ke.CODE_128,"CODE_128"],[ke.DATA_MATRIX,"DATA_MATRIX"],[ke.MAXICODE,"MAXICODE"],[ke.ITF,"ITF"],[ke.EAN_13,"EAN_13"],[ke.EAN_8,"EAN_8"],[ke.PDF_417,"PDF_417"],[ke.RSS_14,"RSS_14"],[ke.RSS_EXPANDED,"RSS_EXPANDED"],[ke.UPC_A,"UPC_A"],[ke.UPC_E,"UPC_E"],[ke.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Hc;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Hc||(Hc={}));function pg(n){return Object.values(ke).includes(n)}var qo;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(qo||(qo={}));var xg=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[qo.SCAN_TYPE_CAMERA,qo.SCAN_TYPE_FILE],n}(),jf=function(){function n(a,c){this.format=a,this.formatName=c}return n.prototype.toString=function(){return this.formatName},n.create=function(a){if(!Vc.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new n(a,Vc.get(a))},n}(),Gc=function(){function n(){}return n.createFromText=function(a){var c={text:a};return{decodedText:a,result:c}},n.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},n}(),ul;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(ul||(ul={}));var mg=function(){function n(){}return n.createFrom=function(a){return{errorMessage:a,type:ul.UNKWOWN_ERROR}},n}(),wg=function(){function n(a){this.verbose=a}return n.prototype.log=function(a){this.verbose&&console.log(a)},n.prototype.warn=function(a){this.verbose&&console.warn(a)},n.prototype.logError=function(a,c){(this.verbose||c===!0)&&console.error(a)},n.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},n}();function Qr(n){return typeof n>"u"||n===null}var ps=function(){function n(){}return n.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},n.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),Kf=function(){function n(){}return n.isMediaStreamConstraintsValid=function(a,c){if(typeof a!="object"){var h=typeof a;return c.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],p=new Set(g),w=Object.keys(a),A=0,E=w;A<E.length;A++){var b=E[A];if(p.has(b))return c.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},n}(),fl={exports:{}};(function(n,a){(function(c,h){h(a)})(Vi,function(c){function h(v){return v==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,e){v.__proto__=e}||function(v,e){for(var t in e)e.hasOwnProperty(t)&&(v[t]=e[t])};function p(v,e){g(v,e);function t(){this.constructor=v}v.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function w(v,e){var t=Object.setPrototypeOf;t?t(v,e):v.__proto__=e}function A(v,e){e===void 0&&(e=v.constructor);var t=Error.captureStackTrace;t&&t(v,e)}var E=function(v){p(e,v);function e(t){var i=this.constructor,s=v.call(this,t)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1}),w(s,i.prototype),A(s),s}return e}(Error);class b extends E{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}b.kind="Exception";class _ extends b{}_.kind="ArgumentException";class S extends b{}S.kind="IllegalArgumentException";class k{constructor(e){if(this.binarizer=e,e===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,i,s){const l=this.binarizer.getLuminanceSource().crop(e,t,i,s);return new k(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends b{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class se{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ee{static arraycopy(e,t,i,s,l){for(;l--;)i[s++]=e[t++]}static currentTimeMillis(){return Date.now()}}class me extends b{}me.kind="IndexOutOfBoundsException";class ye extends me{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}ye.kind="ArrayIndexOutOfBoundsException";class fe{static fill(e,t){for(let i=0,s=e.length;i<s;i++)e[i]=t}static fillWithin(e,t,i,s){fe.rangeCheck(e.length,t,i);for(let l=t;l<i;l++)e[l]=s}static rangeCheck(e,t,i){if(t>i)throw new S("fromIndex("+t+") > toIndex("+i+")");if(t<0)throw new ye(t);if(i>e)throw new ye(i)}static asList(...e){return e}static create(e,t,i){return Array.from({length:e}).map(l=>Array.from({length:t}).fill(i))}static createInt32Array(e,t,i){return Array.from({length:e}).map(l=>Int32Array.from({length:t}).fill(i))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(e[i]!==t[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const i of e)t=31*t+i;return t}static fillUint8Array(e,t){for(let i=0;i!==e.length;i++)e[i]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const i=new Uint8Array(t);return i.set(e),i}return e.slice(0,t)}static copyOfRange(e,t,i){const s=i-t,l=new Int32Array(s);return ee.arraycopy(e,t,l,0,s),l}static binarySearch(e,t,i){i===void 0&&(i=fe.numberComparator);let s=0,l=e.length-1;for(;s<=l;){const u=l+s>>1,r=i(t,e[u]);if(r>0)s=u+1;else if(r<0)l=u-1;else return u}return-s-1}static numberComparator(e,t){return e-t}}class ae{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let i=31;return t=e<<16,t!==0&&(i-=16,e=t),t=e<<8,t!==0&&(i-=8,e=t),t=e<<4,t!==0&&(i-=4,e=t),t=e<<2,t!==0&&(i-=2,e=t),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}ae.MIN_VALUE_32_BITS=-2147483648,ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=J.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=J.makeArray(e);ee.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const i=this.bits;let s=Math.floor(e/32),l=i[s];l&=~((1<<(e&31))-1);const u=i.length;for(;l===0;){if(++s===u)return t;l=i[s]}const r=s*32+ae.numberOfTrailingZeros(l);return r>t?t:r}getNextUnset(e){const t=this.size;if(e>=t)return t;const i=this.bits;let s=Math.floor(e/32),l=~i[s];l&=~((1<<(e&31))-1);const u=i.length;for(;l===0;){if(++s===u)return t;l=~i[s]}const r=s*32+ae.numberOfTrailingZeros(l);return r>t?t:r}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new S;if(t===e)return;t--;const i=Math.floor(e/32),s=Math.floor(t/32),l=this.bits;for(let u=i;u<=s;u++){const r=u>i?0:e&31,f=(2<<(u<s?31:t&31))-(1<<r);l[u]|=f}}clear(){const e=this.bits.length,t=this.bits;for(let i=0;i<e;i++)t[i]=0}isRange(e,t,i){if(t<e||e<0||t>this.size)throw new S;if(t===e)return!0;t--;const s=Math.floor(e/32),l=Math.floor(t/32),u=this.bits;for(let r=s;r<=l;r++){const o=r>s?0:e&31,d=(2<<(r<l?31:t&31))-(1<<o)&4294967295;if((u[r]&d)!==(i?d:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let i=t;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let i=0;i<t;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new S("Sizes don't match");const t=this.bits;for(let i=0,s=t.length;i<s;i++)t[i]^=e.bits[i]}toBytes(e,t,i,s){for(let l=0;l<s;l++){let u=0;for(let r=0;r<8;r++)this.get(e)&&(u|=1<<7-r),e++;t[i+l]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),i=t+1,s=this.bits;for(let l=0;l<i;l++){let u=s[l];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[t-l]=u}if(this.size!==i*32){const l=i*32-this.size;let u=e[0]>>>l;for(let r=1;r<i;r++){const o=e[r];u|=o<<32-l,e[r-1]=u,u=o>>>l}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const t=e;return this.size===t.size&&fe.equals(this.bits,t.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let e="";for(let t=0,i=this.size;t<i;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var Fe;(function(v){v[v.OTHER=0]="OTHER",v[v.PURE_BARCODE=1]="PURE_BARCODE",v[v.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",v[v.TRY_HARDER=3]="TRY_HARDER",v[v.CHARACTER_SET=4]="CHARACTER_SET",v[v.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",v[v.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",v[v.ASSUME_GS1=7]="ASSUME_GS1",v[v.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",v[v.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",v[v.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Fe||(Fe={}));var ve=Fe;class K extends b{static getFormatInstance(){return new K}}K.kind="FormatException";var Q;(function(v){v[v.Cp437=0]="Cp437",v[v.ISO8859_1=1]="ISO8859_1",v[v.ISO8859_2=2]="ISO8859_2",v[v.ISO8859_3=3]="ISO8859_3",v[v.ISO8859_4=4]="ISO8859_4",v[v.ISO8859_5=5]="ISO8859_5",v[v.ISO8859_6=6]="ISO8859_6",v[v.ISO8859_7=7]="ISO8859_7",v[v.ISO8859_8=8]="ISO8859_8",v[v.ISO8859_9=9]="ISO8859_9",v[v.ISO8859_10=10]="ISO8859_10",v[v.ISO8859_11=11]="ISO8859_11",v[v.ISO8859_13=12]="ISO8859_13",v[v.ISO8859_14=13]="ISO8859_14",v[v.ISO8859_15=14]="ISO8859_15",v[v.ISO8859_16=15]="ISO8859_16",v[v.SJIS=16]="SJIS",v[v.Cp1250=17]="Cp1250",v[v.Cp1251=18]="Cp1251",v[v.Cp1252=19]="Cp1252",v[v.Cp1256=20]="Cp1256",v[v.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",v[v.UTF8=22]="UTF8",v[v.ASCII=23]="ASCII",v[v.Big5=24]="Big5",v[v.GB18030=25]="GB18030",v[v.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class V{constructor(e,t,i,...s){this.valueIdentifier=e,this.name=i,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,V.VALUE_IDENTIFIER_TO_ECI.set(e,this),V.NAME_TO_ECI.set(i,this);const l=this.values;for(let u=0,r=l.length;u!==r;u++){const o=l[u];V.VALUES_TO_ECI.set(o,this)}for(const u of s)V.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new K("incorect value");const t=V.VALUES_TO_ECI.get(e);if(t===void 0)throw new K("incorect value");return t}static getCharacterSetECIByName(e){const t=V.NAME_TO_ECI.get(e);if(t===void 0)throw new K("incorect value");return t}equals(e){if(!(e instanceof V))return!1;const t=e;return this.getName()===t.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(Q.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(Q.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(Q.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(Q.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(Q.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(Q.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(Q.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(Q.Big5,28,"Big5"),V.GB18030=new V(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(Q.EUC_KR,30,"EUC_KR","EUC-KR");class he extends b{}he.kind="UnsupportedOperationException";class Ne{static decode(e,t){const i=this.encodingName(t);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Ne.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const i=this.encodingName(t);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof V?e:V.getCharacterSetECIByName(e)}static decodeFallback(e,t){const i=this.encodingCharacterSet(t);if(Ne.isDecodeFallbackSupported(i)){let s="";for(let l=0,u=e.length;l<u;l++){let r=e[l].toString(16);r.length<2&&(r="0"+r),s+="%"+r}return decodeURIComponent(s)}if(i.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new he(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(V.UTF8)||e.equals(V.ISO8859_1)||e.equals(V.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),s=[];for(let l=0;l<i.length;l++)s.push(i[l].charCodeAt(0));return new Uint8Array(s)}}class ${static castAsNonUtf8Char(e,t=null){const i=t?t.getName():this.ISO88591;return Ne.decode(new Uint8Array([e]),i)}static guessEncoding(e,t){if(t!=null&&t.get(ve.CHARACTER_SET)!==void 0)return t.get(ve.CHARACTER_SET).toString();const i=e.length;let s=!0,l=!0,u=!0,r=0,o=0,f=0,d=0,x=0,m=0,y=0,C=0,I=0,T=0,O=0;const R=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let P=0;P<i&&(s||l||u);P++){const N=e[P]&255;u&&(r>0?N&128?r--:u=!1:N&128&&(N&64?(r++,N&32?(r++,N&16?(r++,N&8?u=!1:d++):f++):o++):u=!1)),s&&(N>127&&N<160?s=!1:N>159&&(N<192||N===215||N===247)&&O++),l&&(x>0?N<64||N===127||N>252?l=!1:x--:N===128||N===160||N>239?l=!1:N>160&&N<224?(m++,C=0,y++,y>I&&(I=y)):N>127?(x++,y=0,C++,C>T&&(T=C)):(y=0,C=0))}return u&&r>0&&(u=!1),l&&x>0&&(l=!1),u&&(R||o+f+d>0)?$.UTF8:l&&($.ASSUME_SHIFT_JIS||I>=3||T>=3)?$.SHIFT_JIS:s&&l?I===2&&m===2||O*10>=i?$.SHIFT_JIS:$.ISO88591:s?$.ISO88591:l?$.SHIFT_JIS:u?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let i=-1;function s(u,r,o,f,d,x){if(u==="%%")return"%";if(t[++i]===void 0)return;u=f?parseInt(f.substr(1)):void 0;let m=d?parseInt(d.substr(1)):void 0,y;switch(x){case"s":y=t[i];break;case"c":y=t[i][0];break;case"f":y=parseFloat(t[i]).toFixed(u);break;case"p":y=parseFloat(t[i]).toPrecision(u);break;case"e":y=parseFloat(t[i]).toExponential(u);break;case"x":y=parseInt(t[i]).toString(m||16);break;case"d":y=parseFloat(parseInt(t[i],m||10).toPrecision(u)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);let C=parseInt(o),I=o&&o[0]+""=="0"?"0":" ";for(;y.length<C;)y=r!==void 0?y+I:I+y;return y}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,s)}static getBytes(e,t){return Ne.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}$.SHIFT_JIS=V.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=V.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=V.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class Oe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,i){for(let s=t;t<t+i;s++)this.append(e[s]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Je{constructor(e,t,i,s){if(this.width=e,this.height=t,this.rowSize=i,this.bits=s,t==null&&(t=e),this.height=t,e<1||t<1)throw new S("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,s==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,i=e[0].length,s=new Je(i,t);for(let l=0;l<t;l++){const u=e[l];for(let r=0;r<i;r++)u[r]&&s.set(r,l)}return s}static parseFromString(e,t,i){if(e===null)throw new S("stringRepresentation cannot be null");const s=new Array(e.length);let l=0,u=0,r=-1,o=0,f=0;for(;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(l>u){if(r===-1)r=l-u;else if(l-u!==r)throw new S("row lengths do not match");u=l,o++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,s[l]=!0,l++;else if(e.substring(f,f+i.length)===i)f+=i.length,s[l]=!1,l++;else throw new S("illegal character encountered: "+e.substring(f));if(l>u){if(r===-1)r=l-u;else if(l-u!==r)throw new S("row lengths do not match");o++}const d=new Je(r,o);for(let x=0;x<l;x++)s[x]&&d.set(Math.floor(x%r),Math.floor(x/r));return d}get(e,t){const i=t*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new S("input matrix dimensions do not match");const t=new J(Math.floor(this.width/32)+1),i=this.rowSize,s=this.bits;for(let l=0,u=this.height;l<u;l++){const r=l*i,o=e.getRow(l,t).getBitArray();for(let f=0;f<i;f++)s[r+f]^=o[f]}}clear(){const e=this.bits,t=e.length;for(let i=0;i<t;i++)e[i]=0}setRegion(e,t,i,s){if(t<0||e<0)throw new S("Left and top must be nonnegative");if(s<1||i<1)throw new S("Height and width must be at least 1");const l=e+i,u=t+s;if(u>this.height||l>this.width)throw new S("The region must fit inside the matrix");const r=this.rowSize,o=this.bits;for(let f=t;f<u;f++){const d=f*r;for(let x=e;x<l;x++)o[d+Math.floor(x/32)]|=1<<(x&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new J(this.width):t.clear();const i=this.rowSize,s=this.bits,l=e*i;for(let u=0;u<i;u++)t.setBulk(u*32,s[l+u]);return t}setRow(e,t){ee.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let i=new J(e),s=new J(e);for(let l=0,u=Math.floor((t+1)/2);l<u;l++)i=this.getRow(l,i),s=this.getRow(t-1-l,s),i.reverse(),s.reverse(),this.setRow(l,s),this.setRow(t-1-l,i)}getEnclosingRectangle(){const e=this.width,t=this.height,i=this.rowSize,s=this.bits;let l=e,u=t,r=-1,o=-1;for(let f=0;f<t;f++)for(let d=0;d<i;d++){const x=s[f*i+d];if(x!==0){if(f<u&&(u=f),f>o&&(o=f),d*32<l){let m=0;for(;!(x<<31-m&4294967295);)m++;d*32+m<l&&(l=d*32+m)}if(d*32+31>r){let m=31;for(;!(x>>>m);)m--;d*32+m>r&&(r=d*32+m)}}}return r<l||o<u?null:Int32Array.from([l,u,r-l+1,o-u+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let i=0;for(;i<t.length&&t[i]===0;)i++;if(i===t.length)return null;const s=i/e;let l=i%e*32;const u=t[i];let r=0;for(;!(u<<31-r&4294967295);)r++;return l+=r,Int32Array.from([l,s])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let i=t.length-1;for(;i>=0&&t[i]===0;)i--;if(i<0)return null;const s=Math.floor(i/e);let l=Math.floor(i%e)*32;const u=t[i];let r=31;for(;!(u>>>r);)r--;return l+=r,Int32Array.from([l,s])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Je))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&fe.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+fe.hashCode(this.bits),e}toString(e="X ",t="  ",i=`
`){return this.buildToString(e,t,i)}buildToString(e,t,i){let s=new Oe;for(let l=0,u=this.height;l<u;l++){for(let r=0,o=this.width;r<o;r++)s.append(this.get(r,l)?e:t);s.append(i)}return s.toString()}clone(){return new Je(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends b{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class qe extends se{constructor(e){super(e),this.luminances=qe.EMPTY,this.buckets=new Int32Array(qe.LUMINANCE_BUCKETS)}getBlackRow(e,t){const i=this.getLuminanceSource(),s=i.getWidth();t==null||t.getSize()<s?t=new J(s):t.clear(),this.initArrays(s);const l=i.getRow(e,this.luminances),u=this.buckets;for(let o=0;o<s;o++)u[(l[o]&255)>>qe.LUMINANCE_SHIFT]++;const r=qe.estimateBlackPoint(u);if(s<3)for(let o=0;o<s;o++)(l[o]&255)<r&&t.set(o);else{let o=l[0]&255,f=l[1]&255;for(let d=1;d<s-1;d++){const x=l[d+1]&255;(f*4-o-x)/2<r&&t.set(d),o=f,f=x}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),i=e.getHeight(),s=new Je(t,i);this.initArrays(t);const l=this.buckets;for(let o=1;o<5;o++){const f=Math.floor(i*o/5),d=e.getRow(f,this.luminances),x=Math.floor(t*4/5);for(let m=Math.floor(t/5);m<x;m++){const y=d[m]&255;l[y>>qe.LUMINANCE_SHIFT]++}}const u=qe.estimateBlackPoint(l),r=e.getMatrix();for(let o=0;o<i;o++){const f=o*t;for(let d=0;d<t;d++)(r[f+d]&255)<u&&s.set(d,o)}return s}createBinarizer(e){return new qe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let i=0;i<qe.LUMINANCE_BUCKETS;i++)t[i]=0}static estimateBlackPoint(e){const t=e.length;let i=0,s=0,l=0;for(let d=0;d<t;d++)e[d]>l&&(s=d,l=e[d]),e[d]>i&&(i=e[d]);let u=0,r=0;for(let d=0;d<t;d++){const x=d-s,m=e[d]*x*x;m>r&&(u=d,r=m)}if(s>u){const d=s;s=u,u=d}if(u-s<=t/16)throw new Z;let o=u-1,f=-1;for(let d=u-1;d>s;d--){const x=d-s,m=x*x*(u-d)*(i-e[d]);m>f&&(o=d,f=m)}return o<<qe.LUMINANCE_SHIFT}}qe.LUMINANCE_BITS=5,qe.LUMINANCE_SHIFT=8-qe.LUMINANCE_BITS,qe.LUMINANCE_BUCKETS=1<<qe.LUMINANCE_BITS,qe.EMPTY=Uint8ClampedArray.from([0]);class _e extends qe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),i=e.getHeight();if(t>=_e.MINIMUM_DIMENSION&&i>=_e.MINIMUM_DIMENSION){const s=e.getMatrix();let l=t>>_e.BLOCK_SIZE_POWER;t&_e.BLOCK_SIZE_MASK&&l++;let u=i>>_e.BLOCK_SIZE_POWER;i&_e.BLOCK_SIZE_MASK&&u++;const r=_e.calculateBlackPoints(s,l,u,t,i),o=new Je(t,i);_e.calculateThresholdForBlock(s,l,u,t,i,r,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new _e(e)}static calculateThresholdForBlock(e,t,i,s,l,u,r){const o=l-_e.BLOCK_SIZE,f=s-_e.BLOCK_SIZE;for(let d=0;d<i;d++){let x=d<<_e.BLOCK_SIZE_POWER;x>o&&(x=o);const m=_e.cap(d,2,i-3);for(let y=0;y<t;y++){let C=y<<_e.BLOCK_SIZE_POWER;C>f&&(C=f);const I=_e.cap(y,2,t-3);let T=0;for(let R=-2;R<=2;R++){const P=u[m+R];T+=P[I-2]+P[I-1]+P[I]+P[I+1]+P[I+2]}const O=T/25;_e.thresholdBlock(e,C,x,O,s,r)}}}static cap(e,t,i){return e<t?t:e>i?i:e}static thresholdBlock(e,t,i,s,l,u){for(let r=0,o=i*l+t;r<_e.BLOCK_SIZE;r++,o+=l)for(let f=0;f<_e.BLOCK_SIZE;f++)(e[o+f]&255)<=s&&u.set(t+f,i+r)}static calculateBlackPoints(e,t,i,s,l){const u=l-_e.BLOCK_SIZE,r=s-_e.BLOCK_SIZE,o=new Array(i);for(let f=0;f<i;f++){o[f]=new Int32Array(t);let d=f<<_e.BLOCK_SIZE_POWER;d>u&&(d=u);for(let x=0;x<t;x++){let m=x<<_e.BLOCK_SIZE_POWER;m>r&&(m=r);let y=0,C=255,I=0;for(let O=0,R=d*s+m;O<_e.BLOCK_SIZE;O++,R+=s){for(let P=0;P<_e.BLOCK_SIZE;P++){const N=e[R+P]&255;y+=N,N<C&&(C=N),N>I&&(I=N)}if(I-C>_e.MIN_DYNAMIC_RANGE)for(O++,R+=s;O<_e.BLOCK_SIZE;O++,R+=s)for(let P=0;P<_e.BLOCK_SIZE;P++)y+=e[R+P]&255}let T=y>>_e.BLOCK_SIZE_POWER*2;if(I-C<=_e.MIN_DYNAMIC_RANGE&&(T=C/2,f>0&&x>0)){const O=(o[f-1][x]+2*o[f][x-1]+o[f-1][x-1])/4;C<O&&(T=O)}o[f][x]=T}}return o}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class et{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,i,s){throw new he("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new he("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new he("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Oe;for(let i=0;i<this.height;i++){const s=this.getRow(i,e);for(let l=0;l<this.width;l++){const u=s[l]&255;let r;u<64?r="#":u<128?r="+":u<192?r=".":r=" ",t.append(r)}t.append(`
`)}return t.toString()}}class Ut extends et{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const i=this.delegate.getRow(e,t),s=this.getWidth();for(let l=0;l<s;l++)i[l]=255-(i[l]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(t);for(let s=0;s<t;s++)i[s]=255-(e[s]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,i,s){return new Ut(this.delegate.crop(e,t,i,s))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ut(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ut(this.delegate.rotateCounterClockwise45())}}class Pt extends et{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Pt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Pt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,i){const s=new Uint8ClampedArray(t*i);for(let l=0,u=0,r=e.length;l<r;l+=4,u++){let o;if(e[l+3]===0)o=255;else{const d=e[l],x=e[l+1],m=e[l+2];o=306*d+601*x+117*m+512>>10}s[u]=o}return s}getRow(e,t){if(e<0||e>=this.getHeight())throw new S("Requested row is outside the image: "+e);const i=this.getWidth(),s=e*i;return t===null?t=this.buffer.slice(s,s+i):(t.length<i&&(t=new Uint8ClampedArray(i)),t.set(this.buffer.slice(s,s+i))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,i,s){return super.crop(e,t,i,s),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),i=t.getContext("2d"),s=e*Pt.DEGREE_TO_RADIANS,l=this.canvas.width,u=this.canvas.height,r=Math.ceil(Math.abs(Math.cos(s))*l+Math.abs(Math.sin(s))*u),o=Math.ceil(Math.abs(Math.sin(s))*l+Math.abs(Math.cos(s))*u);return t.width=r,t.height=o,i.translate(r/2,o/2),i.rotate(s),i.drawImage(this.canvas,l/-2,u/-2),this.buffer=Pt.makeBufferFromCanvasImageData(t),this}invert(){return new Ut(this)}}Pt.DEGREE_TO_RADIANS=Math.PI/180;class yn{constructor(e,t,i){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var bt=(globalThis||Vi||self||window||void 0)&&(globalThis||Vi||self||window||void 0).__awaiter||function(v,e,t,i){function s(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function r(d){try{f(i.next(d))}catch(x){u(x)}}function o(d){try{f(i.throw(d))}catch(x){u(x)}}function f(d){d.done?l(d.value):s(d.value).then(r,o)}f((i=i.apply(v,e||[])).next())})};class nn{constructor(e,t=500,i){this.reader=e,this.timeBetweenScansMillis=t,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return bt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const i of e){const s=i.kind==="video"?"videoinput":i.kind;if(s!=="videoinput")continue;const l=i.deviceId||i.id,u=i.label||`Video device ${t.length+1}`,r=i.groupId,o={deviceId:l,label:u,kind:s,groupId:r};t.push(o)}return t})}getVideoInputDevices(){return bt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new yn(t.deviceId,t.label))})}findDeviceById(e){return bt(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return bt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return bt(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const s={video:i};return yield this.decodeOnceFromConstraints(s,t)})}decodeOnceFromConstraints(e,t){return bt(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,t)})}decodeOnceFromStream(e,t){return bt(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,t,i){return bt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,i)})}decodeFromVideoDevice(e,t,i){return bt(this,void 0,void 0,function*(){let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeFromConstraints(l,t,i)})}decodeFromConstraints(e,t,i){return bt(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(s,t,i)})}decodeFromStream(e,t,i){return bt(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(s,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return bt(this,void 0,void 0,function*(){const i=this.prepareVideoElement(t);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((t,i)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return bt(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const i=document.getElementById(e);if(!i)throw new _(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==t.toLowerCase())throw new _(`element with id '${e}' must be an ${t} element`);return i}decodeFromImage(e,t){if(!e&&!t)throw new _("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,i){if(e===void 0&&t===void 0)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new _("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let i;return this.isImageLoaded(t)?i=this.decodeOnce(t,!1,!0):i=this._decodeOnLoadImage(t),i}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,t)}_decodeFromVideoElementSetup(e){if(!e)throw new _("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const i=this._decodeOnLoadImage(t);return t.src=e,i}decodeFromVideoUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),i=this.decodeFromVideoElement(t);return t.src=e,i}decodeFromVideoUrlContinuously(e,t){if(!e)throw new _("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElementContinuously(i,t);return i.src=e,s}_decodeOnLoadImage(e){return new Promise((t,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return bt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return bt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,i=!0){this._stopAsyncDecode=!1;const s=(l,u)=>{if(this._stopAsyncDecode){u(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const r=this.decode(e);l(r)}catch(r){const o=t&&r instanceof Z,d=(r instanceof U||r instanceof K)&&i;if(o||d)return setTimeout(s,this._timeBetweenDecodingAttempts,l,u);u(r)}};return new Promise((l,u)=>s(l,u))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const s=this.decode(e);t(s,null),setTimeout(i,this.timeBetweenScansMillis)}catch(s){t(null,s);const l=s instanceof U||s instanceof K,u=s instanceof Z;(l||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,i){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,i=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),i=new Pt(t),s=new _e(i);return new k(s)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let i,s;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,s=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,s=e.naturalHeight||e.height)),t.style.width=i+"px",t.style.height=s+"px",t.width=i,t.height=s,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Vt{constructor(e,t,i=t==null?0:8*t.length,s,l,u=ee.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=i,this.resultPoints=s,this.format=l,this.timestamp=u,this.text=e,this.rawBytes=t,i==null?this.numBits=t==null?0:8*t.length:this.numBits=i,this.resultPoints=s,this.format=l,this.resultMetadata=null,u==null?this.timestamp=ee.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(t.length+e.length);ee.arraycopy(t,0,i,0,t.length),ee.arraycopy(e,0,i,t.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Cn;(function(v){v[v.AZTEC=0]="AZTEC",v[v.CODABAR=1]="CODABAR",v[v.CODE_39=2]="CODE_39",v[v.CODE_93=3]="CODE_93",v[v.CODE_128=4]="CODE_128",v[v.DATA_MATRIX=5]="DATA_MATRIX",v[v.EAN_8=6]="EAN_8",v[v.EAN_13=7]="EAN_13",v[v.ITF=8]="ITF",v[v.MAXICODE=9]="MAXICODE",v[v.PDF_417=10]="PDF_417",v[v.QR_CODE=11]="QR_CODE",v[v.RSS_14=12]="RSS_14",v[v.RSS_EXPANDED=13]="RSS_EXPANDED",v[v.UPC_A=14]="UPC_A",v[v.UPC_E=15]="UPC_E",v[v.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Cn||(Cn={}));var Me=Cn,oe;(function(v){v[v.OTHER=0]="OTHER",v[v.ORIENTATION=1]="ORIENTATION",v[v.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",v[v.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",v[v.ISSUE_NUMBER=4]="ISSUE_NUMBER",v[v.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",v[v.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",v[v.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",v[v.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",v[v.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",v[v.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(oe||(oe={}));var Ce=oe;class ne{constructor(e,t,i,s,l=-1,u=-1){this.rawBytes=e,this.text=t,this.byteSegments=i,this.ecLevel=s,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ue{exp(e){return this.expTable[e]}log(e){if(e===0)throw new S;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Xe{constructor(e,t){if(t.length===0)throw new S;this.field=e;const i=t.length;if(i>1&&t[0]===0){let s=1;for(;s<i&&t[s]===0;)s++;s===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-s),ee.arraycopy(t,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let i;if(e===1){i=0;for(let u=0,r=t.length;u!==r;u++){const o=t[u];i=Ue.addOrSubtract(i,o)}return i}i=t[0];const s=t.length,l=this.field;for(let u=1;u<s;u++)i=Ue.addOrSubtract(l.multiply(e,i),t[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,i=e.coefficients;if(t.length>i.length){const u=t;t=i,i=u}let s=new Int32Array(i.length);const l=i.length-t.length;ee.arraycopy(i,0,s,0,l);for(let u=l;u<i.length;u++)s[u]=Ue.addOrSubtract(t[u-l],i[u]);return new Xe(this.field,s)}multiply(e){if(!this.field.equals(e.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,i=t.length,s=e.coefficients,l=s.length,u=new Int32Array(i+l-1),r=this.field;for(let o=0;o<i;o++){const f=t[o];for(let d=0;d<l;d++)u[o+d]=Ue.addOrSubtract(u[o+d],r.multiply(f,s[d]))}return new Xe(r,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,i=this.field,s=new Int32Array(t),l=this.coefficients;for(let u=0;u<t;u++)s[u]=i.multiply(l[u],e);return new Xe(i,s)}multiplyByMonomial(e,t){if(e<0)throw new S;if(t===0)return this.field.getZero();const i=this.coefficients,s=i.length,l=new Int32Array(s+e),u=this.field;for(let r=0;r<s;r++)l[r]=u.multiply(i[r],t);return new Xe(u,l)}divide(e){if(!this.field.equals(e.field))throw new S("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new S("Divide by 0");const t=this.field;let i=t.getZero(),s=this;const l=e.getCoefficient(e.getDegree()),u=t.inverse(l);for(;s.getDegree()>=e.getDegree()&&!s.isZero();){const r=s.getDegree()-e.getDegree(),o=t.multiply(s.getCoefficient(s.getDegree()),u),f=e.multiplyByMonomial(r,o),d=t.buildMonomial(r,o);i=i.addOrSubtract(d),s=s.addOrSubtract(f)}return[i,s]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let i=this.getCoefficient(t);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),t===0||i!==1){const s=this.field.log(i);s===0?e+="1":s===1?e+="a":(e+="a^",e+=s)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class M extends b{}M.kind="ArithmeticException";class B extends Ue{constructor(e,t,i){super(),this.primitive=e,this.size=t,this.generatorBase=i;const s=new Int32Array(t);let l=1;for(let r=0;r<t;r++)s[r]=l,l*=2,l>=t&&(l^=e,l&=t-1);this.expTable=s;const u=new Int32Array(t);for(let r=0;r<t-1;r++)u[s[r]]=r;this.logTable=u,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new S;if(t===0)return this.zero;const i=new Int32Array(e+1);return i[0]=t,new Xe(this,i)}inverse(e){if(e===0)throw new M;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ae.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}B.AZTEC_DATA_12=new B(4201,4096,1),B.AZTEC_DATA_10=new B(1033,1024,1),B.AZTEC_DATA_6=new B(67,64,1),B.AZTEC_PARAM=new B(19,16,1),B.QR_CODE_FIELD_256=new B(285,256,0),B.DATA_MATRIX_FIELD_256=new B(301,256,1),B.AZTEC_DATA_8=B.DATA_MATRIX_FIELD_256,B.MAXICODE_FIELD_64=B.AZTEC_DATA_6;class W extends b{}W.kind="ReedSolomonException";class re extends b{}re.kind="IllegalStateException";class ce{constructor(e){this.field=e}decode(e,t){const i=this.field,s=new Xe(i,e),l=new Int32Array(t);let u=!0;for(let y=0;y<t;y++){const C=s.evaluateAt(i.exp(y+i.getGeneratorBase()));l[l.length-1-y]=C,C!==0&&(u=!1)}if(u)return;const r=new Xe(i,l),o=this.runEuclideanAlgorithm(i.buildMonomial(t,1),r,t),f=o[0],d=o[1],x=this.findErrorLocations(f),m=this.findErrorMagnitudes(d,x);for(let y=0;y<x.length;y++){const C=e.length-1-i.log(x[y]);if(C<0)throw new W("Bad error location");e[C]=B.addOrSubtract(e[C],m[y])}}runEuclideanAlgorithm(e,t,i){if(e.getDegree()<t.getDegree()){const y=e;e=t,t=y}const s=this.field;let l=e,u=t,r=s.getZero(),o=s.getOne();for(;u.getDegree()>=(i/2|0);){let y=l,C=r;if(l=u,r=o,l.isZero())throw new W("r_{i-1} was zero");u=y;let I=s.getZero();const T=l.getCoefficient(l.getDegree()),O=s.inverse(T);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){const R=u.getDegree()-l.getDegree(),P=s.multiply(u.getCoefficient(u.getDegree()),O);I=I.addOrSubtract(s.buildMonomial(R,P)),u=u.addOrSubtract(l.multiplyByMonomial(R,P))}if(o=I.multiply(r).addOrSubtract(C),u.getDegree()>=l.getDegree())throw new re("Division algorithm failed to reduce polynomial?")}const f=o.getCoefficient(0);if(f===0)throw new W("sigmaTilde(0) was zero");const d=s.inverse(f),x=o.multiplyScalar(d),m=u.multiplyScalar(d);return[x,m]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(t);let s=0;const l=this.field;for(let u=1;u<l.getSize()&&s<t;u++)e.evaluateAt(u)===0&&(i[s]=l.inverse(u),s++);if(s!==t)throw new W("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,t){const i=t.length,s=new Int32Array(i),l=this.field;for(let u=0;u<i;u++){const r=l.inverse(t[u]);let o=1;for(let f=0;f<i;f++)if(u!==f){const d=l.multiply(t[f],r),x=d&1?d&-2:d|1;o=l.multiply(o,x)}s[u]=l.multiply(e.evaluateAt(r),l.inverse(o)),l.getGeneratorBase()!==0&&(s[u]=l.multiply(s[u],r))}return s}}var te;(function(v){v[v.UPPER=0]="UPPER",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.DIGIT=3]="DIGIT",v[v.PUNCT=4]="PUNCT",v[v.BINARY=5]="BINARY"})(te||(te={}));class de{decode(e){this.ddata=e;let t=e.getBits(),i=this.extractBits(t),s=this.correctBits(i),l=de.convertBoolArrayToByteArray(s),u=de.getEncodedData(s),r=new ne(l,u,null,null);return r.setNumBits(s.length),r}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,i=te.UPPER,s=te.UPPER,l="",u=0;for(;u<t;)if(s===te.BINARY){if(t-u<5)break;let r=de.readCode(e,u,5);if(u+=5,r===0){if(t-u<11)break;r=de.readCode(e,u,11)+31,u+=11}for(let o=0;o<r;o++){if(t-u<8){u=t;break}const f=de.readCode(e,u,8);l+=$.castAsNonUtf8Char(f),u+=8}s=i}else{let r=s===te.DIGIT?4:5;if(t-u<r)break;let o=de.readCode(e,u,r);u+=r;let f=de.getCharacter(s,o);f.startsWith("CTRL_")?(i=s,s=de.getTable(f.charAt(5)),f.charAt(6)==="L"&&(i=s)):(l+=f,s=i)}return l}static getTable(e){switch(e){case"L":return te.LOWER;case"P":return te.PUNCT;case"M":return te.MIXED;case"D":return te.DIGIT;case"B":return te.BINARY;case"U":default:return te.UPPER}}static getCharacter(e,t){switch(e){case te.UPPER:return de.UPPER_TABLE[t];case te.LOWER:return de.LOWER_TABLE[t];case te.MIXED:return de.MIXED_TABLE[t];case te.PUNCT:return de.PUNCT_TABLE[t];case te.DIGIT:return de.DIGIT_TABLE[t];default:throw new re("Bad table")}}correctBits(e){let t,i;this.ddata.getNbLayers()<=2?(i=6,t=B.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,t=B.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,t=B.AZTEC_DATA_10):(i=12,t=B.AZTEC_DATA_12);let s=this.ddata.getNbDatablocks(),l=e.length/i;if(l<s)throw new K;let u=e.length%i,r=new Int32Array(l);for(let m=0;m<l;m++,u+=i)r[m]=de.readCode(e,u,i);try{new ce(t).decode(r,l-s)}catch(m){throw new K(m)}let o=(1<<i)-1,f=0;for(let m=0;m<s;m++){let y=r[m];if(y===0||y===o)throw new K;(y===1||y===o-1)&&f++}let d=new Array(s*i-f),x=0;for(let m=0;m<s;m++){let y=r[m];if(y===1||y===o-1)d.fill(y>1,x,x+i-1),x+=i-1;else for(let C=i-1;C>=0;--C)d[x++]=(y&1<<C)!==0}return d}extractBits(e){let t=this.ddata.isCompact(),i=this.ddata.getNbLayers(),s=(t?11:14)+i*4,l=new Int32Array(s),u=new Array(this.totalBitsInLayer(i,t));if(t)for(let r=0;r<l.length;r++)l[r]=r;else{let r=s+1+2*ae.truncDivision(ae.truncDivision(s,2)-1,15),o=s/2,f=ae.truncDivision(r,2);for(let d=0;d<o;d++){let x=d+ae.truncDivision(d,15);l[o-d-1]=f-x-1,l[o+d]=f+x+1}}for(let r=0,o=0;r<i;r++){let f=(i-r)*4+(t?9:12),d=r*2,x=s-1-d;for(let m=0;m<f;m++){let y=m*2;for(let C=0;C<2;C++)u[o+y+C]=e.get(l[d+C],l[d+m]),u[o+2*f+y+C]=e.get(l[d+m],l[x-C]),u[o+4*f+y+C]=e.get(l[x-C],l[x-m]),u[o+6*f+y+C]=e.get(l[x-m],l[d+C])}o+=f*8}return u}static readCode(e,t,i){let s=0;for(let l=t;l<t+i;l++)s<<=1,e[l]&&(s|=1);return s}static readByte(e,t){let i=e.length-t;return i>=8?de.readCode(e,t,8):de.readCode(e,t,i)<<8-i}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let i=0;i<t.length;i++)t[i]=de.readByte(e,8*i);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}de.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],de.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],de.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],de.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],de.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class le{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,i,s){const l=e-i,u=t-s;return Math.sqrt(l*l+u*u)}static sum(e){let t=0;for(let i=0,s=e.length;i!==s;i++){const l=e[i];t+=l}return t}}class we{static floatToIntBits(e){return e}}we.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof j){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*we.floatToIntBits(this.x)+we.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),s=this.distance(e[0],e[2]);let l,u,r;if(i>=t&&i>=s?(u=e[0],l=e[1],r=e[2]):s>=i&&s>=t?(u=e[1],l=e[0],r=e[2]):(u=e[2],l=e[0],r=e[1]),this.crossProductZ(l,u,r)<0){const o=l;l=r,r=o}e[0]=l,e[1]=u,e[2]=r}static distance(e,t){return le.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,i){const s=t.x,l=t.y;return(i.x-s)*(e.y-l)-(i.y-l)*(e.x-s)}}class He{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Te extends He{constructor(e,t,i,s,l){super(e,t),this.compact=i,this.nbDatablocks=s,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Le{constructor(e,t,i,s){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Le.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),s==null&&(s=e.getHeight()/2|0);const l=t/2|0;if(this.leftInit=i-l,this.rightInit=i+l,this.upInit=s-l,this.downInit=s+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let e=this.leftInit,t=this.rightInit,i=this.upInit,s=this.downInit,l=!1,u=!0,r=!1,o=!1,f=!1,d=!1,x=!1;const m=this.width,y=this.height;for(;u;){u=!1;let C=!0;for(;(C||!o)&&t<m;)C=this.containsBlackPoint(i,s,t,!1),C?(t++,u=!0,o=!0):o||t++;if(t>=m){l=!0;break}let I=!0;for(;(I||!f)&&s<y;)I=this.containsBlackPoint(e,t,s,!0),I?(s++,u=!0,f=!0):f||s++;if(s>=y){l=!0;break}let T=!0;for(;(T||!d)&&e>=0;)T=this.containsBlackPoint(i,s,e,!1),T?(e--,u=!0,d=!0):d||e--;if(e<0){l=!0;break}let O=!0;for(;(O||!x)&&i>=0;)O=this.containsBlackPoint(e,t,i,!0),O?(i--,u=!0,x=!0):x||i--;if(i<0){l=!0;break}u&&(r=!0)}if(!l&&r){const C=t-e;let I=null;for(let P=1;I===null&&P<C;P++)I=this.getBlackPointOnSegment(e,s-P,e+P,s);if(I==null)throw new Z;let T=null;for(let P=1;T===null&&P<C;P++)T=this.getBlackPointOnSegment(e,i+P,e+P,i);if(T==null)throw new Z;let O=null;for(let P=1;O===null&&P<C;P++)O=this.getBlackPointOnSegment(t,i+P,t-P,i);if(O==null)throw new Z;let R=null;for(let P=1;R===null&&P<C;P++)R=this.getBlackPointOnSegment(t,s-P,t-P,s);if(R==null)throw new Z;return this.centerEdges(R,I,O,T)}else throw new Z}getBlackPointOnSegment(e,t,i,s){const l=le.round(le.distance(e,t,i,s)),u=(i-e)/l,r=(s-t)/l,o=this.image;for(let f=0;f<l;f++){const d=le.round(e+f*u),x=le.round(t+f*r);if(o.get(d,x))return new j(d,x)}return null}centerEdges(e,t,i,s){const l=e.getX(),u=e.getY(),r=t.getX(),o=t.getY(),f=i.getX(),d=i.getY(),x=s.getX(),m=s.getY(),y=Le.CORR;return l<this.width/2?[new j(x-y,m+y),new j(r+y,o+y),new j(f-y,d-y),new j(l+y,u-y)]:[new j(x+y,m+y),new j(r+y,o-y),new j(f-y,d+y),new j(l-y,u-y)]}containsBlackPoint(e,t,i,s){const l=this.image;if(s){for(let u=e;u<=t;u++)if(l.get(u,i))return!0}else for(let u=e;u<=t;u++)if(l.get(i,u))return!0;return!1}}Le.INIT_SIZE=10,Le.CORR=1;class je{static checkAndNudgePoints(e,t){const i=e.getWidth(),s=e.getHeight();let l=!0;for(let u=0;u<t.length&&l;u+=2){const r=Math.floor(t[u]),o=Math.floor(t[u+1]);if(r<-1||r>i||o<-1||o>s)throw new Z;l=!1,r===-1?(t[u]=0,l=!0):r===i&&(t[u]=i-1,l=!0),o===-1?(t[u+1]=0,l=!0):o===s&&(t[u+1]=s-1,l=!0)}l=!0;for(let u=t.length-2;u>=0&&l;u-=2){const r=Math.floor(t[u]),o=Math.floor(t[u+1]);if(r<-1||r>i||o<-1||o>s)throw new Z;l=!1,r===-1?(t[u]=0,l=!0):r===i&&(t[u]=i-1,l=!0),o===-1?(t[u+1]=0,l=!0):o===s&&(t[u+1]=s-1,l=!0)}}}class ze{constructor(e,t,i,s,l,u,r,o,f){this.a11=e,this.a21=t,this.a31=i,this.a12=s,this.a22=l,this.a32=u,this.a13=r,this.a23=o,this.a33=f}static quadrilateralToQuadrilateral(e,t,i,s,l,u,r,o,f,d,x,m,y,C,I,T){const O=ze.quadrilateralToSquare(e,t,i,s,l,u,r,o);return ze.squareToQuadrilateral(f,d,x,m,y,C,I,T).times(O)}transformPoints(e){const t=e.length,i=this.a11,s=this.a12,l=this.a13,u=this.a21,r=this.a22,o=this.a23,f=this.a31,d=this.a32,x=this.a33;for(let m=0;m<t;m+=2){const y=e[m],C=e[m+1],I=l*y+o*C+x;e[m]=(i*y+u*C+f)/I,e[m+1]=(s*y+r*C+d)/I}}transformPointsWithValues(e,t){const i=this.a11,s=this.a12,l=this.a13,u=this.a21,r=this.a22,o=this.a23,f=this.a31,d=this.a32,x=this.a33,m=e.length;for(let y=0;y<m;y++){const C=e[y],I=t[y],T=l*C+o*I+x;e[y]=(i*C+u*I+f)/T,t[y]=(s*C+r*I+d)/T}}static squareToQuadrilateral(e,t,i,s,l,u,r,o){const f=e-i+l-r,d=t-s+u-o;if(f===0&&d===0)return new ze(i-e,l-i,e,s-t,u-s,t,0,0,1);{const x=i-l,m=r-l,y=s-u,C=o-u,I=x*C-m*y,T=(f*C-m*d)/I,O=(x*d-f*y)/I;return new ze(i-e+T*i,r-e+O*r,e,s-t+T*s,o-t+O*o,t,T,O,1)}}static quadrilateralToSquare(e,t,i,s,l,u,r,o){return ze.squareToQuadrilateral(e,t,i,s,l,u,r,o).buildAdjoint()}buildAdjoint(){return new ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new ze(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ht extends je{sampleGrid(e,t,i,s,l,u,r,o,f,d,x,m,y,C,I,T,O,R,P){const N=ze.quadrilateralToQuadrilateral(s,l,u,r,o,f,d,x,m,y,C,I,T,O,R,P);return this.sampleGridWithTransform(e,t,i,N)}sampleGridWithTransform(e,t,i,s){if(t<=0||i<=0)throw new Z;const l=new Je(t,i),u=new Float32Array(2*t);for(let r=0;r<i;r++){const o=u.length,f=r+.5;for(let d=0;d<o;d+=2)u[d]=d/2+.5,u[d+1]=f;s.transformPoints(u),je.checkAndNudgePoints(e,u);try{for(let d=0;d<o;d+=2)e.get(Math.floor(u[d]),Math.floor(u[d+1]))&&l.set(d/2,r)}catch{throw new Z}}return l}}class it{static setGridSampler(e){it.gridSampler=e}static getInstance(){return it.gridSampler}}it.gridSampler=new ht;class dt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new j(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class rn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),i=this.getBullsEyeCorners(t);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let s=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),l=this.getMatrixCornerPoints(i);return new Te(s,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Z;let t=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(i,t);let s=0;for(let u=0;u<4;u++){let r=i[(this.shift+u)%4];this.compact?(s<<=7,s+=r>>1&127):(s<<=10,s+=(r>>2&992)+(r>>1&31))}let l=this.getCorrectedParameterData(s,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(e,t){let i=0;e.forEach((s,l,u)=>{let r=(s>>t-2<<1)+(s&1);i=(i<<3)+r}),i=((i&1)<<11)+(i>>1);for(let s=0;s<4;s++)if(ae.bitCount(i^this.EXPECTED_CORNER_BITS[s])<=2)return s;throw new Z}getCorrectedParameterData(e,t){let i,s;t?(i=7,s=2):(i=10,s=4);let l=i-s,u=new Int32Array(i);for(let o=i-1;o>=0;--o)u[o]=e&15,e>>=4;try{new ce(B.AZTEC_PARAM).decode(u,l)}catch{throw new Z}let r=0;for(let o=0;o<s;o++)r=(r<<4)+u[o];return r}getBullsEyeCorners(e){let t=e,i=e,s=e,l=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let x=this.getFirstDifferent(t,u,1,-1),m=this.getFirstDifferent(i,u,1,1),y=this.getFirstDifferent(s,u,-1,1),C=this.getFirstDifferent(l,u,-1,-1);if(this.nbCenterLayers>2){let I=this.distancePoint(C,x)*this.nbCenterLayers/(this.distancePoint(l,t)*(this.nbCenterLayers+2));if(I<.75||I>1.25||!this.isWhiteOrBlackRectangle(x,m,y,C))break}t=x,i=m,s=y,l=C,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let r=new j(t.getX()+.5,t.getY()-.5),o=new j(i.getX()+.5,i.getY()+.5),f=new j(s.getX()-.5,s.getY()+.5),d=new j(l.getX()-.5,l.getY()-.5);return this.expandSquare([r,o,f,d],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,i,s;try{let r=new Le(this.image).detect();e=r[0],t=r[1],i=r[2],s=r[3]}catch{let o=this.image.getWidth()/2,f=this.image.getHeight()/2;e=this.getFirstDifferent(new dt(o+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dt(o+7,f+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new dt(o-7,f+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new dt(o-7,f-7),!1,-1,-1).toResultPoint()}let l=le.round((e.getX()+s.getX()+t.getX()+i.getX())/4),u=le.round((e.getY()+s.getY()+t.getY()+i.getY())/4);try{let r=new Le(this.image,15,l,u).detect();e=r[0],t=r[1],i=r[2],s=r[3]}catch{e=this.getFirstDifferent(new dt(l+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dt(l+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new dt(l-7,u+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new dt(l-7,u-7),!1,-1,-1).toResultPoint()}return l=le.round((e.getX()+s.getX()+t.getX()+i.getX())/4),u=le.round((e.getY()+s.getY()+t.getY()+i.getY())/4),new dt(l,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,i,s,l){let u=it.getInstance(),r=this.getDimension(),o=r/2-this.nbCenterLayers,f=r/2+this.nbCenterLayers;return u.sampleGrid(e,r,r,o,o,f,o,f,f,o,f,t.getX(),t.getY(),i.getX(),i.getY(),s.getX(),s.getY(),l.getX(),l.getY())}sampleLine(e,t,i){let s=0,l=this.distanceResultPoint(e,t),u=l/i,r=e.getX(),o=e.getY(),f=u*(t.getX()-e.getX())/l,d=u*(t.getY()-e.getY())/l;for(let x=0;x<i;x++)this.image.get(le.round(r+x*f),le.round(o+x*d))&&(s|=1<<i-x-1);return s}isWhiteOrBlackRectangle(e,t,i,s){let l=3;e=new dt(e.getX()-l,e.getY()+l),t=new dt(t.getX()-l,t.getY()-l),i=new dt(i.getX()+l,i.getY()-l),s=new dt(s.getX()+l,s.getY()+l);let u=this.getColor(s,e);if(u===0)return!1;let r=this.getColor(e,t);return r!==u||(r=this.getColor(t,i),r!==u)?!1:(r=this.getColor(i,s),r===u)}getColor(e,t){let i=this.distancePoint(e,t),s=(t.getX()-e.getX())/i,l=(t.getY()-e.getY())/i,u=0,r=e.getX(),o=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(i);for(let m=0;m<d;m++)r+=s,o+=l,this.image.get(le.round(r),le.round(o))!==f&&u++;let x=u/i;return x>.1&&x<.9?0:x<=.1===f?1:-1}getFirstDifferent(e,t,i,s){let l=e.getX()+i,u=e.getY()+s;for(;this.isValid(l,u)&&this.image.get(l,u)===t;)l+=i,u+=s;for(l-=i,u-=s;this.isValid(l,u)&&this.image.get(l,u)===t;)l+=i;for(l-=i;this.isValid(l,u)&&this.image.get(l,u)===t;)u+=s;return u-=s,new dt(l,u)}expandSquare(e,t,i){let s=i/(2*t),l=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),r=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,f=new j(r+s*l,o+s*u),d=new j(r-s*l,o-s*u);l=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),r=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2;let x=new j(r+s*l,o+s*u),m=new j(r-s*l,o-s*u);return[f,x,d,m]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=le.round(e.getX()),i=le.round(e.getY());return this.isValid(t,i)}distancePoint(e,t){return le.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return le.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ae.truncDivision(this.nbLayers-4,8)+1)+15}}class ln{decode(e,t=null){let i=null,s=new rn(e.getBlackMatrix()),l=null,u=null;try{let d=s.detectMirror(!1);l=d.getPoints(),this.reportFoundResultPoints(t,l),u=new de().decode(d)}catch(d){i=d}if(u==null)try{let d=s.detectMirror(!0);l=d.getPoints(),this.reportFoundResultPoints(t,l),u=new de().decode(d)}catch(d){throw i??d}let r=new Vt(u.getText(),u.getRawBytes(),u.getNumBits(),l,Me.AZTEC,ee.currentTimeMillis()),o=u.getByteSegments();o!=null&&r.putMetadata(Ce.BYTE_SEGMENTS,o);let f=u.getECLevel();return f!=null&&r.putMetadata(Ce.ERROR_CORRECTION_LEVEL,f),r}reportFoundResultPoints(e,t){if(e!=null){let i=e.get(ve.NEED_RESULT_POINT_CALLBACK);i!=null&&t.forEach((s,l,u)=>{i.foundPossibleResultPoint(s)})}}reset(){}}class cn extends nn{constructor(e=500){super(new ln,e)}}class It{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ve.TRY_HARDER)===!0&&e.isRotateSupported()){const l=e.rotateCounterClockwise(),u=this.doDecode(l,t),r=u.getResultMetadata();let o=270;r!==null&&r.get(Ce.ORIENTATION)===!0&&(o=o+r.get(Ce.ORIENTATION)%360),u.putMetadata(Ce.ORIENTATION,o);const f=u.getResultPoints();if(f!==null){const d=l.getHeight();for(let x=0;x<f.length;x++)f[x]=new j(d-f[x].getY()-1,f[x].getX())}return u}else throw new Z}}reset(){}doDecode(e,t){const i=e.getWidth(),s=e.getHeight();let l=new J(i);const u=t&&t.get(ve.TRY_HARDER)===!0,r=Math.max(1,s>>(u?8:5));let o;u?o=s:o=15;const f=Math.trunc(s/2);for(let d=0;d<o;d++){const x=Math.trunc((d+1)/2),m=(d&1)===0,y=f+r*(m?x:-x);if(y<0||y>=s)break;try{l=e.getBlackRow(y,l)}catch{continue}for(let C=0;C<2;C++){if(C===1&&(l.reverse(),t&&t.get(ve.NEED_RESULT_POINT_CALLBACK)===!0)){const I=new Map;t.forEach((T,O)=>I.set(O,T)),I.delete(ve.NEED_RESULT_POINT_CALLBACK),t=I}try{const I=this.decodeRow(y,l,t);if(C===1){I.putMetadata(Ce.ORIENTATION,180);const T=I.getResultPoints();T!==null&&(T[0]=new j(i-T[0].getX()-1,T[0].getY()),T[1]=new j(i-T[1].getX()-1,T[1].getY()))}return I}catch{}}}throw new Z}static recordPattern(e,t,i){const s=i.length;for(let f=0;f<s;f++)i[f]=0;const l=e.getSize();if(t>=l)throw new Z;let u=!e.get(t),r=0,o=t;for(;o<l;){if(e.get(o)!==u)i[r]++;else{if(++r===s)break;i[r]=1,u=!u}o++}if(!(r===s||r===s-1&&o===l))throw new Z}static recordPatternInReverse(e,t,i){let s=i.length,l=e.get(t);for(;t>0&&s>=0;)e.get(--t)!==l&&(s--,l=!l);if(s>=0)throw new Z;It.recordPattern(e,t+1,i)}static patternMatchVariance(e,t,i){const s=e.length;let l=0,u=0;for(let f=0;f<s;f++)l+=e[f],u+=t[f];if(l<u)return Number.POSITIVE_INFINITY;const r=l/u;i*=r;let o=0;for(let f=0;f<s;f++){const d=e[f],x=t[f]*r,m=d>x?d-x:x-d;if(m>i)return Number.POSITIVE_INFINITY;o+=m}return o/l}}class be extends It{static findStartPattern(e){const t=e.getSize(),i=e.getNextSet(0);let s=0,l=Int32Array.from([0,0,0,0,0,0]),u=i,r=!1;const o=6;for(let f=i;f<t;f++)if(e.get(f)!==r)l[s]++;else{if(s===o-1){let d=be.MAX_AVG_VARIANCE,x=-1;for(let m=be.CODE_START_A;m<=be.CODE_START_C;m++){const y=It.patternMatchVariance(l,be.CODE_PATTERNS[m],be.MAX_INDIVIDUAL_VARIANCE);y<d&&(d=y,x=m)}if(x>=0&&e.isRange(Math.max(0,u-(f-u)/2),u,!1))return Int32Array.from([u,f,x]);u+=l[0]+l[1],l=l.slice(2,l.length-1),l[s-1]=0,l[s]=0,s--}else s++;l[s]=1,r=!r}throw new Z}static decodeCode(e,t,i){It.recordPattern(e,i,t);let s=be.MAX_AVG_VARIANCE,l=-1;for(let u=0;u<be.CODE_PATTERNS.length;u++){const r=be.CODE_PATTERNS[u],o=this.patternMatchVariance(t,r,be.MAX_INDIVIDUAL_VARIANCE);o<s&&(s=o,l=u)}if(l>=0)return l;throw new Z}decodeRow(e,t,i){const s=i&&i.get(ve.ASSUME_GS1)===!0,l=be.findStartPattern(t),u=l[2];let r=0;const o=new Uint8Array(20);o[r++]=u;let f;switch(u){case be.CODE_START_A:f=be.CODE_CODE_A;break;case be.CODE_START_B:f=be.CODE_CODE_B;break;case be.CODE_START_C:f=be.CODE_CODE_C;break;default:throw new K}let d=!1,x=!1,m="",y=l[0],C=l[1];const I=Int32Array.from([0,0,0,0,0,0]);let T=0,O=0,R=u,P=0,N=!0,F=!1,L=!1;for(;!d;){const pe=x;switch(x=!1,T=O,O=be.decodeCode(t,I,C),o[r++]=O,O!==be.CODE_STOP&&(N=!0),O!==be.CODE_STOP&&(P++,R+=P*O),y=C,C+=I.reduce((Ee,Se)=>Ee+Se,0),O){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new K}switch(f){case be.CODE_CODE_A:if(O<64)L===F?m+=String.fromCharCode(32+O):m+=String.fromCharCode(32+O+128),L=!1;else if(O<96)L===F?m+=String.fromCharCode(O-64):m+=String.fromCharCode(O+64),L=!1;else switch(O!==be.CODE_STOP&&(N=!1),O){case be.CODE_FNC_1:s&&(m.length===0?m+="]C1":m+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!F&&L?(F=!0,L=!1):F&&L?(F=!1,L=!1):L=!0;break;case be.CODE_SHIFT:x=!0,f=be.CODE_CODE_B;break;case be.CODE_CODE_B:f=be.CODE_CODE_B;break;case be.CODE_CODE_C:f=be.CODE_CODE_C;break;case be.CODE_STOP:d=!0;break}break;case be.CODE_CODE_B:if(O<96)L===F?m+=String.fromCharCode(32+O):m+=String.fromCharCode(32+O+128),L=!1;else switch(O!==be.CODE_STOP&&(N=!1),O){case be.CODE_FNC_1:s&&(m.length===0?m+="]C1":m+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!F&&L?(F=!0,L=!1):F&&L?(F=!1,L=!1):L=!0;break;case be.CODE_SHIFT:x=!0,f=be.CODE_CODE_A;break;case be.CODE_CODE_A:f=be.CODE_CODE_A;break;case be.CODE_CODE_C:f=be.CODE_CODE_C;break;case be.CODE_STOP:d=!0;break}break;case be.CODE_CODE_C:if(O<100)O<10&&(m+="0"),m+=O;else switch(O!==be.CODE_STOP&&(N=!1),O){case be.CODE_FNC_1:s&&(m.length===0?m+="]C1":m+="");break;case be.CODE_CODE_A:f=be.CODE_CODE_A;break;case be.CODE_CODE_B:f=be.CODE_CODE_B;break;case be.CODE_STOP:d=!0;break}break}pe&&(f=f===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const H=C-y;if(C=t.getNextUnset(C),!t.isRange(C,Math.min(t.getSize(),C+(C-y)/2),!1))throw new Z;if(R-=P*T,R%103!==T)throw new U;const G=m.length;if(G===0)throw new Z;G>0&&N&&(f===be.CODE_CODE_C?m=m.substring(0,G-2):m=m.substring(0,G-1));const X=(l[1]+l[0])/2,Y=y+H/2,ie=o.length,ge=new Uint8Array(ie);for(let pe=0;pe<ie;pe++)ge[pe]=o[pe];const Ae=[new j(X,e),new j(Y,e)];return new Vt(m,ge,0,Ae,Me.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class st extends It{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,i){let s=this.counters;s.fill(0),this.decodeRowResult="";let l=st.findAsteriskPattern(t,s),u=t.getNextSet(l[1]),r=t.getSize(),o,f;do{st.recordPattern(t,u,s);let I=st.toNarrowWidePattern(s);if(I<0)throw new Z;o=st.patternToChar(I),this.decodeRowResult+=o,f=u;for(let T of s)u+=T;u=t.getNextSet(u)}while(o!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let d=0;for(let I of s)d+=I;let x=u-f-d;if(u!==r&&x*2<d)throw new Z;if(this.usingCheckDigit){let I=this.decodeRowResult.length-1,T=0;for(let O=0;O<I;O++)T+=st.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(O));if(this.decodeRowResult.charAt(I)!==st.ALPHABET_STRING.charAt(T%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,I)}if(this.decodeRowResult.length===0)throw new Z;let m;this.extendedMode?m=st.decodeExtended(this.decodeRowResult):m=this.decodeRowResult;let y=(l[1]+l[0])/2,C=f+d/2;return new Vt(m,null,0,[new j(y,e),new j(C,e)],Me.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let i=e.getSize(),s=e.getNextSet(0),l=0,u=s,r=!1,o=t.length;for(let f=s;f<i;f++)if(e.get(f)!==r)t[l]++;else{if(l===o-1){if(this.toNarrowWidePattern(t)===st.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((f-u)/2)),u,!1))return[u,f];u+=t[0]+t[1],t.copyWithin(0,2,2+l-1),t[l-1]=0,t[l]=0,l--}else l++;t[l]=1,r=!r}throw new Z}static toNarrowWidePattern(e){let t=e.length,i=0,s;do{let l=2147483647;for(let o of e)o<l&&o>i&&(l=o);i=l,s=0;let u=0,r=0;for(let o=0;o<t;o++){let f=e[o];f>i&&(r|=1<<t-1-o,s++,u+=f)}if(s===3){for(let o=0;o<t&&s>0;o++){let f=e[o];if(f>i&&(s--,f*2>=u))return-1}return r}}while(s>3);return-1}static patternToChar(e){for(let t=0;t<st.CHARACTER_ENCODINGS.length;t++)if(st.CHARACTER_ENCODINGS[t]===e)return st.ALPHABET_STRING.charAt(t);if(e===st.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(e){let t=e.length,i="";for(let s=0;s<t;s++){let l=e.charAt(s);if(l==="+"||l==="$"||l==="%"||l==="/"){let u=e.charAt(s+1),r="\0";switch(l){case"+":if(u>="A"&&u<="Z")r=String.fromCharCode(u.charCodeAt(0)+32);else throw new K;break;case"$":if(u>="A"&&u<="Z")r=String.fromCharCode(u.charCodeAt(0)-64);else throw new K;break;case"%":if(u>="A"&&u<="E")r=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")r=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")r=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")r=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")r="\0";else if(u==="V")r="@";else if(u==="W")r="`";else if(u==="X"||u==="Y"||u==="Z")r="";else throw new K;break;case"/":if(u>="A"&&u<="O")r=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")r=":";else throw new K;break}i+=r,s++}else i+=l}return i}}st.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",st.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],st.ASTERISK_ENCODING=148;class xe extends It{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,i){let s=this.decodeStart(t),l=this.decodeEnd(t),u=new Oe;xe.decodeMiddle(t,s[1],l[0],u);let r=u.toString(),o=null;i!=null&&(o=i.get(ve.ALLOWED_LENGTHS)),o==null&&(o=xe.DEFAULT_ALLOWED_LENGTHS);let f=r.length,d=!1,x=0;for(let C of o){if(f===C){d=!0;break}C>x&&(x=C)}if(!d&&f>x&&(d=!0),!d)throw new K;const m=[new j(s[1],e),new j(l[0],e)];return new Vt(r,null,0,m,Me.ITF,new Date().getTime())}static decodeMiddle(e,t,i,s){let l=new Int32Array(10),u=new Int32Array(5),r=new Int32Array(5);for(l.fill(0),u.fill(0),r.fill(0);t<i;){It.recordPattern(e,t,l);for(let f=0;f<5;f++){let d=2*f;u[f]=l[d],r[f]=l[d+1]}let o=xe.decodeDigit(u);s.append(o.toString()),o=this.decodeDigit(r),s.append(o.toString()),l.forEach(function(f){t+=f})}}decodeStart(e){let t=xe.skipWhiteSpace(e),i=xe.findGuardPattern(e,t,xe.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,t){let i=this.narrowLineWidth*10;i=i<t?i:t;for(let s=t-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new Z}static skipWhiteSpace(e){const t=e.getSize(),i=e.getNextSet(0);if(i===t)throw new Z;return i}decodeEnd(e){e.reverse();try{let t=xe.skipWhiteSpace(e),i;try{i=xe.findGuardPattern(e,t,xe.END_PATTERN_REVERSED[0])}catch(l){l instanceof Z&&(i=xe.findGuardPattern(e,t,xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}}static findGuardPattern(e,t,i){let s=i.length,l=new Int32Array(s),u=e.getSize(),r=!1,o=0,f=t;l.fill(0);for(let d=t;d<u;d++)if(e.get(d)!==r)l[o]++;else{if(o===s-1){if(It.patternMatchVariance(l,i,xe.MAX_INDIVIDUAL_VARIANCE)<xe.MAX_AVG_VARIANCE)return[f,d];f+=l[0]+l[1],ee.arraycopy(l,2,l,0,o-1),l[o-1]=0,l[o]=0,o--}else o++;l[o]=1,r=!r}throw new Z}static decodeDigit(e){let t=xe.MAX_AVG_VARIANCE,i=-1,s=xe.PATTERNS.length;for(let l=0;l<s;l++){let u=xe.PATTERNS[l],r=It.patternMatchVariance(e,u,xe.MAX_INDIVIDUAL_VARIANCE);r<t?(t=r,i=l):r===t&&(i=-1)}if(i>=0)return i%10;throw new Z}}xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xe.MAX_AVG_VARIANCE=.38,xe.MAX_INDIVIDUAL_VARIANCE=.5,xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xe.START_PATTERN=Int32Array.from([1,1,1,1]),xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class St extends It{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,i,s=0,l=Int32Array.from([0,0,0]);for(;!t;){l=Int32Array.from([0,0,0]),i=St.findGuardPattern(e,s,!1,this.START_END_PATTERN,l);let u=i[0];s=i[1];let r=u-(s-u);r>=0&&(t=e.isRange(r,u,!1))}return i}static checkChecksum(e){return St.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let i=parseInt(e.charAt(t-1),10);return St.getStandardUPCEANChecksum(e.substring(0,t-1))===i}static getStandardUPCEANChecksum(e){let t=e.length,i=0;for(let s=t-1;s>=0;s-=2){let l=e.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new K;i+=l}i*=3;for(let s=t-2;s>=0;s-=2){let l=e.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new K;i+=l}return(1e3-i)%10}static decodeEnd(e,t){return St.findGuardPattern(e,t,!1,St.START_END_PATTERN,new Int32Array(St.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,i,s){return this.findGuardPattern(e,t,i,s,new Int32Array(s.length))}static findGuardPattern(e,t,i,s,l){let u=e.getSize();t=i?e.getNextUnset(t):e.getNextSet(t);let r=0,o=t,f=s.length,d=i;for(let x=t;x<u;x++)if(e.get(x)!==d)l[r]++;else{if(r===f-1){if(It.patternMatchVariance(l,s,St.MAX_INDIVIDUAL_VARIANCE)<St.MAX_AVG_VARIANCE)return Int32Array.from([o,x]);o+=l[0]+l[1];let m=l.slice(2,l.length-1);for(let y=0;y<r-1;y++)l[y]=m[y];l[r-1]=0,l[r]=0,r--}else r++;l[r]=1,d=!d}throw new Z}static decodeDigit(e,t,i,s){this.recordPattern(e,i,t);let l=this.MAX_AVG_VARIANCE,u=-1,r=s.length;for(let o=0;o<r;o++){let f=s[o],d=It.patternMatchVariance(t,f,St.MAX_INDIVIDUAL_VARIANCE);d<l&&(l=d,u=o)}if(u>=0)return u;throw new Z}}St.MAX_AVG_VARIANCE=.48,St.MAX_INDIVIDUAL_VARIANCE=.7,St.START_END_PATTERN=Int32Array.from([1,1,1]),St.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),St.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),St.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class vn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,i){let s=this.decodeRowStringBuffer,l=this.decodeMiddle(t,i,s),u=s.toString(),r=vn.parseExtensionString(u),o=[new j((i[0]+i[1])/2,e),new j(l,e)],f=new Vt(u,null,0,o,Me.UPC_EAN_EXTENSION,new Date().getTime());return r!=null&&f.putAllMetadata(r),f}decodeMiddle(e,t,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),u=t[1],r=0;for(let f=0;f<5&&u<l;f++){let d=St.decodeDigit(e,s,u,St.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);for(let x of s)u+=x;d>=10&&(r|=1<<4-f),f!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new Z;let o=this.determineCheckDigit(r);if(vn.extensionChecksum(i.toString())!==o)throw new Z;return u}static extensionChecksum(e){let t=e.length,i=0;for(let s=t-2;s>=0;s-=2)i+=e.charAt(s).charCodeAt(0)-48;i*=3;for(let s=t-1;s>=0;s-=2)i+=e.charAt(s).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Z}static parseExtensionString(e){if(e.length!==5)return null;let t=vn.parseExtension5String(e);return t==null?null:new Map([[Ce.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let i=parseInt(e.substring(1)),s=(i/100).toString(),l=i%100,u=l<10?"0"+l:l.toString();return t+s+"."+u}}class li{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,i){let s=this.decodeRowStringBuffer,l=this.decodeMiddle(t,i,s),u=s.toString(),r=li.parseExtensionString(u),o=[new j((i[0]+i[1])/2,e),new j(l,e)],f=new Vt(u,null,0,o,Me.UPC_EAN_EXTENSION,new Date().getTime());return r!=null&&f.putAllMetadata(r),f}decodeMiddle(e,t,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),u=t[1],r=0;for(let o=0;o<2&&u<l;o++){let f=St.decodeDigit(e,s,u,St.L_AND_G_PATTERNS);i+=String.fromCharCode(48+f%10);for(let d of s)u+=d;f>=10&&(r|=1<<1-o),o!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new Z;if(parseInt(i.toString())%4!==r)throw new Z;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[Ce.ISSUE_NUMBER,parseInt(e)]])}}class Re{static decodeRow(e,t,i){let s=St.findGuardPattern(t,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new vn().decodeRow(e,t,s)}catch{return new li().decodeRow(e,t,s)}}}Re.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pt extends St{constructor(){super(),this.decodeRowStringBuffer="",pt.L_AND_G_PATTERNS=pt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=pt.L_PATTERNS[e-10],i=new Int32Array(t.length);for(let s=0;s<t.length;s++)i[s]=t[t.length-s-1];pt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,t,i){let s=pt.findStartGuardPattern(t),l=i==null?null:i.get(ve.NEED_RESULT_POINT_CALLBACK);if(l!=null){const N=new j((s[0]+s[1])/2,e);l.foundPossibleResultPoint(N)}let u=this.decodeMiddle(t,s,this.decodeRowStringBuffer),r=u.rowOffset,o=u.resultString;if(l!=null){const N=new j(r,e);l.foundPossibleResultPoint(N)}let f=this.decodeEnd(t,r);if(l!=null){const N=new j((f[0]+f[1])/2,e);l.foundPossibleResultPoint(N)}let d=f[1],x=d+(d-f[0]);if(x>=t.getSize()||!t.isRange(d,x,!1))throw new Z;let m=o.toString();if(m.length<8)throw new K;if(!pt.checkChecksum(m))throw new U;let y=(s[1]+s[0])/2,C=(f[1]+f[0])/2,I=this.getBarcodeFormat(),T=[new j(y,e),new j(C,e)],O=new Vt(m,null,0,T,I,new Date().getTime()),R=0;try{let N=Re.decodeRow(e,t,f[1]);O.putMetadata(Ce.UPC_EAN_EXTENSION,N.getText()),O.putAllMetadata(N.getResultMetadata()),O.addResultPoints(N.getResultPoints()),R=N.getText().length}catch{}let P=i==null?null:i.get(ve.ALLOWED_EAN_EXTENSIONS);if(P!=null){let N=!1;for(let F in P)if(R.toString()===F){N=!0;break}if(!N)throw new Z}return O}decodeEnd(e,t){return pt.findGuardPattern(e,t,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return pt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let i=parseInt(e.charAt(t-1),10);return pt.getStandardUPCEANChecksum(e.substring(0,t-1))===i}static getStandardUPCEANChecksum(e){let t=e.length,i=0;for(let s=t-1;s>=0;s-=2){let l=e.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new K;i+=l}i*=3;for(let s=t-2;s>=0;s-=2){let l=e.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new K;i+=l}return(1e3-i)%10}}class Sr extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),u=t[1],r=0;for(let f=0;f<6&&u<l;f++){let d=pt.decodeDigit(e,s,u,pt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);for(let x of s)u+=x;d>=10&&(r|=1<<5-f)}i=Sr.determineFirstDigit(i,r),u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<6&&u<l;f++){let d=pt.decodeDigit(e,s,u,pt.L_PATTERNS);i+=String.fromCharCode(48+d);for(let x of s)u+=x}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return Me.EAN_13}static determineFirstDigit(e,t){for(let i=0;i<10;i++)if(t===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Z}}Sr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class zi extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,i){const s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),u=t[1];for(let o=0;o<4&&u<l;o++){let f=pt.decodeDigit(e,s,u,pt.L_PATTERNS);i+=String.fromCharCode(48+f);for(let d of s)u+=d}u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&u<l;o++){let f=pt.decodeDigit(e,s,u,pt.L_PATTERNS);i+=String.fromCharCode(48+f);for(let d of s)u+=d}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return Me.EAN_8}}class Is extends pt{constructor(){super(...arguments),this.ean13Reader=new Sr}getBarcodeFormat(){return Me.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,i))}decodeMiddle(e,t,i){return this.ean13Reader.decodeMiddle(e,t,i)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let i=new Vt(t.substring(1),null,null,e.getResultPoints(),Me.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Z}reset(){this.ean13Reader.reset()}}class Dn extends pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,i){const s=this.decodeMiddleCounters.map(f=>f);s[0]=0,s[1]=0,s[2]=0,s[3]=0;const l=e.getSize();let u=t[1],r=0;for(let f=0;f<6&&u<l;f++){const d=Dn.decodeDigit(e,s,u,Dn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);for(let x of s)u+=x;d>=10&&(r|=1<<5-f)}let o=Dn.determineNumSysAndCheckDigit(i,r);return{rowOffset:u,resultString:o}}decodeEnd(e,t){return Dn.findGuardPatternWithoutCounters(e,t,!0,Dn.MIDDLE_END_PATTERN)}checkChecksum(e){return pt.checkChecksum(Dn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let i=0;i<=1;i++)for(let s=0;s<10;s++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){let l=String.fromCharCode(48+i),u=String.fromCharCode(48+s);return l+e+u}throw Z.getNotFoundInstance()}getBarcodeFormat(){return Me.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(l=>l.charCodeAt(0)),i=new Oe;i.append(e.charAt(0));let s=t[5];switch(s){case 0:case 1:case 2:i.appendChars(t,0,2),i.append(s),i.append("0000"),i.appendChars(t,2,3);break;case 3:i.appendChars(t,0,3),i.append("00000"),i.appendChars(t,3,2);break;case 4:i.appendChars(t,0,4),i.append("00000"),i.append(t[4]);break;default:i.appendChars(t,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Dn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ss extends It{constructor(e){super();let t=e==null?null:e.get(ve.POSSIBLE_FORMATS),i=[];h(t)?(i.push(new Sr),i.push(new Is),i.push(new zi),i.push(new Dn)):(t.indexOf(Me.EAN_13)>-1&&i.push(new Sr),t.indexOf(Me.UPC_A)>-1&&i.push(new Is),t.indexOf(Me.EAN_8)>-1&&i.push(new zi),t.indexOf(Me.UPC_E)>-1&&i.push(new Dn)),this.readers=i}decodeRow(e,t,i){for(let s of this.readers)try{const l=s.decodeRow(e,t,i),u=l.getBarcodeFormat()===Me.EAN_13&&l.getText().charAt(0)==="0",r=i==null?null:i.get(ve.POSSIBLE_FORMATS),o=r==null||r.includes(Me.UPC_A);if(u&&o){const f=l.getRawBytes(),d=new Vt(l.getText().substring(1),f,f?f.length:null,l.getResultPoints(),Me.UPC_A);return d.putAllMetadata(l.getResultMetadata()),d}return l}catch{}throw new Z}reset(){for(let e of this.readers)e.reset()}}class mn extends It{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let i=0;i<t.length;i++)if(It.patternMatchVariance(e,t[i],mn.MAX_INDIVIDUAL_VARIANCE)<mn.MAX_AVG_VARIANCE)return i;throw new Z}static count(e){return le.sum(new Int32Array(e))}static increment(e,t){let i=0,s=t[0];for(let l=1;l<e.length;l++)t[l]>s&&(s=t[l],i=l);e[i]++}static decrement(e,t){let i=0,s=t[0];for(let l=1;l<e.length;l++)t[l]<s&&(s=t[l],i=l);e[i]--}static isFinderPattern(e){let t=e[0]+e[1],i=t+e[2]+e[3],s=t/i;if(s>=mn.MIN_FINDER_PATTERN_RATIO&&s<=mn.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let r of e)r>u&&(u=r),r<l&&(l=r);return u<10*l}return!1}}mn.MAX_AVG_VARIANCE=.2,mn.MAX_INDIVIDUAL_VARIANCE=.45,mn.MIN_FINDER_PATTERN_RATIO=9.5/12,mn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Zn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class pr{constructor(e,t,i,s,l){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new j(i,l)),this.resultPoints.push(new j(s,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof pr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Gn{constructor(){}static getRSSvalue(e,t,i){let s=0;for(let o of e)s+=o;let l=0,u=0,r=e.length;for(let o=0;o<r-1;o++){let f;for(f=1,u|=1<<o;f<e[o];f++,u&=~(1<<o)){let d=Gn.combins(s-f-1,r-o-2);if(i&&u===0&&s-f-(r-o-1)>=r-o-1&&(d-=Gn.combins(s-f-(r-o),r-o-2)),r-o-1>1){let x=0;for(let m=s-f-(r-o-2);m>t;m--)x+=Gn.combins(s-f-m-1,r-o-3);d-=x*(r-1-o)}else s-f>t&&d--;l+=d}s-=f}return l}static combins(e,t){let i,s;e-t>t?(s=t,i=e-t):(s=e-t,i=t);let l=1,u=1;for(let r=e;r>i;r--)l*=r,u<=s&&(l/=u,u++);for(;u<=s;)l/=u,u++;return l}}class Yi{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let i=12*t,s=new J(i),l=0,r=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)r&1<<o&&s.set(l),l++;for(let o=1;o<e.length;++o){let f=e[o],d=f.getLeftChar().getValue();for(let x=11;x>=0;--x)d&1<<x&&s.set(l),l++;if(f.getRightChar()!=null){let x=f.getRightChar().getValue();for(let m=11;m>=0;--m)x&1<<m&&s.set(l),l++}}return s}}class At{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Qt{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class _n extends Qt{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===_n.FNC1}}_n.FNC1="$";class or extends Qt{constructor(e,t,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class bn extends Qt{constructor(e,t,i){if(super(e),t<0||t>10||i<0||i>10)throw new K;this.firstDigit=t,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===bn.FNC1}isSecondDigitFNC1(){return this.secondDigit===bn.FNC1}isAnyFNC1(){return this.firstDigit===bn.FNC1||this.secondDigit===bn.FNC1}}bn.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Z;let t=e.substring(0,2);for(let l of De.TWO_DIGIT_DATA_LENGTH)if(l[0]===t)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,l[2],e):De.processFixedAI(2,l[1],e);if(e.length<3)throw new Z;let i=e.substring(0,3);for(let l of De.THREE_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,l[2],e):De.processFixedAI(3,l[1],e);for(let l of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,l[2],e):De.processFixedAI(4,l[1],e);if(e.length<4)throw new Z;let s=e.substring(0,4);for(let l of De.FOUR_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,l[2],e):De.processFixedAI(4,l[1],e);throw new Z}static processFixedAI(e,t,i){if(i.length<e)throw new Z;let s=i.substring(0,e);if(i.length<e+t)throw new Z;let l=i.substring(e,e+t),u=i.substring(e+t),r="("+s+")"+l,o=De.parseFieldsInGeneralPurpose(u);return o==null?r:r+o}static processVariableAI(e,t,i){let s=i.substring(0,e),l;i.length<e+t?l=i.length:l=e+t;let u=i.substring(e,l),r=i.substring(l),o="("+s+")"+u,f=De.parseFieldsInGeneralPurpose(r);return f==null?o:o+f}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class ci{constructor(e){this.buffer=new Oe,this.information=e}decodeAllCodes(e,t){let i=t,s=null;do{let l=this.decodeGeneralPurposeField(i,s),u=De.parseFieldsInGeneralPurpose(l.getNewString());if(u!=null&&e.append(u),l.isRemaining()?s=""+l.getRemainingValue():s=null,i===l.getNewPosition())break;i=l.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(e,4);return l===0?new bn(this.information.getSize(),bn.FNC1,bn.FNC1):new bn(this.information.getSize(),l-1,bn.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),i=(t-8)/11,s=(t-8)%11;return new bn(e+7,i,s)}extractNumericValueFromBitArray(e,t){return ci.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,i){let s=0;for(let l=0;l<i;++l)e.get(t+l)&&(s|=1<<i-l-1);return s}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new or(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new or(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let i=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new or(this.current.getPosition(),this.buffer.toString()):t=new or(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new At(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new or(this.current.getPosition(),this.buffer.toString());return new At(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new At(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new or(this.current.getPosition(),this.buffer.toString());return new At(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new At(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new or(this.current.getPosition(),this.buffer.toString());return new At(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new At(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,8);return s>=232&&s<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _n(e+5,_n.FNC1);if(t>=5&&t<15)return new _n(e+5,"0"+(t-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new _n(e+7,""+(i+1));if(i>=90&&i<116)return new _n(e+7,""+(i+7));let s=this.extractNumericValueFromBitArray(e,8),l;switch(s){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new K}return new _n(e+8,l)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _n(e+5,_n.FNC1);if(t>=5&&t<15)return new _n(e+5,"0"+(t-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new _n(e+6,""+(i+33));let s;switch(i){case 58:s="*";break;case 59:s=",";break;case 60:s="-";break;case 61:s=".";break;case 62:s="/";break;default:throw new re("Decoding invalid alphanumeric value: "+i)}return new _n(e+6,s)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class ar{constructor(e){this.information=e,this.generalDecoder=new ci(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class sn extends ar{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,i)}encodeCompressedGtinWithoutAI(e,t,i){for(let s=0;s<4;++s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*s,10);l/100===0&&e.append("0"),l/10===0&&e.append("0"),e.append(l)}sn.appendCheckDigit(e,i)}static appendCheckDigit(e,t){let i=0;for(let s=0;s<13;s++){let l=e.charAt(s+t).charCodeAt(0)-48;i+=s&1?l:3*l}i=10-i%10,i===10&&(i=0),e.append(i)}}sn.GTIN_SIZE=40;class Mn extends sn{constructor(e){super(e)}parseInformation(){let e=new Oe;e.append("(01)");let t=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Mn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Mn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Mn.HEADER_SIZE+44)}}Mn.HEADER_SIZE=4;class Gr extends ar{constructor(e){super(e)}parseInformation(){let e=new Oe;return this.getGeneralDecoder().decodeAllCodes(e,Gr.HEADER_SIZE)}}Gr.HEADER_SIZE=5;class qi extends sn{constructor(e){super(e)}encodeCompressedWeight(e,t,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(t,i);this.addWeightCode(e,s);let l=this.checkWeight(s),u=1e5;for(let r=0;r<5;++r)l/u===0&&e.append("0"),u/=10;e.append(l)}}class fn extends qi{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=fn.HEADER_SIZE+qi.GTIN_SIZE+fn.WEIGHT_SIZE)throw new Z;let e=new Oe;return this.encodeCompressedGtin(e,fn.HEADER_SIZE),this.encodeCompressedWeight(e,fn.HEADER_SIZE+qi.GTIN_SIZE,fn.WEIGHT_SIZE),e.toString()}}fn.HEADER_SIZE=5,fn.WEIGHT_SIZE=15;class fo extends fn{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Wr extends fn{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Qn extends sn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+sn.GTIN_SIZE)throw new Z;let e=new Oe;this.encodeCompressedGtin(e,Qn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+sn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+sn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2;class hn extends sn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+sn.GTIN_SIZE)throw new Z;let e=new Oe;this.encodeCompressedGtin(e,hn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+sn.GTIN_SIZE,hn.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+sn.GTIN_SIZE+hn.LAST_DIGIT_SIZE,hn.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let s=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+sn.GTIN_SIZE+hn.LAST_DIGIT_SIZE+hn.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2,hn.FIRST_THREE_DIGITS_SIZE=10;class Ze extends qi{constructor(e,t,i){super(e),this.dateCode=i,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+Ze.GTIN_SIZE+Ze.WEIGHT_SIZE+Ze.DATE_SIZE)throw new Z;let e=new Oe;return this.encodeCompressedGtin(e,Ze.HEADER_SIZE),this.encodeCompressedWeight(e,Ze.HEADER_SIZE+Ze.GTIN_SIZE,Ze.WEIGHT_SIZE),this.encodeCompressedDate(e,Ze.HEADER_SIZE+Ze.GTIN_SIZE+Ze.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,Ze.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let s=i%32;i/=32;let l=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),l/10==0&&e.append("0"),e.append(l),s/10==0&&e.append("0"),e.append(s)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}Ze.HEADER_SIZE=8,Ze.WEIGHT_SIZE=20,Ze.DATE_SIZE=16;function Tr(v){try{if(v.get(1))return new Mn(v);if(!v.get(2))return new Gr(v);switch(ci.extractNumericValueFromBitArray(v,1,4)){case 4:return new fo(v);case 5:return new Wr(v)}switch(ci.extractNumericValueFromBitArray(v,1,5)){case 12:return new Qn(v);case 13:return new hn(v)}switch(ci.extractNumericValueFromBitArray(v,1,7)){case 56:return new Ze(v,"310","11");case 57:return new Ze(v,"320","11");case 58:return new Ze(v,"310","13");case 59:return new Ze(v,"320","13");case 60:return new Ze(v,"310","15");case 61:return new Ze(v,"320","15");case 62:return new Ze(v,"310","17");case 63:return new Ze(v,"320","17")}}catch(e){throw console.log(e),new re("unknown decoder: "+v)}}class wn{constructor(e,t,i,s){this.leftchar=e,this.rightchar=t,this.finderpattern=i,this.maybeLast=s}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof wn?wn.equalsOrNull(e.leftchar,t.leftchar)&&wn.equalsOrNull(e.rightchar,t.rightchar)&&wn.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:wn.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zi{constructor(e,t,i){this.pairs=e,this.rowNumber=t,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Zi?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let i;return e.forEach((s,l)=>{t.forEach(u=>{s.getLeftChar().getValue()===u.getLeftChar().getValue()&&s.getRightChar().getValue()===u.getRightChar().getValue()&&s.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class ue extends mn{constructor(e){super(...arguments),this.pairs=new Array(ue.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,i){this.pairs.length=0,this.startFromEven=!1;try{return ue.constructResult(this.decodeRow2pairs(e,t))}catch(s){this.verbose&&console.log(s)}return this.pairs.length=0,this.startFromEven=!0,ue.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(l){if(l instanceof Z){if(!this.pairs.length)throw new Z;i=!0}}if(this.checkChecksum())return this.pairs;let s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new Z}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let i=t;i<this.rows.length;i++){let s=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(s.getPairs()),!ue.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(e);l.push(s);try{return this.checkRows(l,i+1)}catch(u){this.verbose&&console.log(u)}}throw new Z}static isValidSequence(e){for(let t of ue.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let i=!0;for(let s=0;s<e.length;s++)if(e[s].getFinderPattern().getValue()!=t[s]){i=!1;break}if(i)return!0}return!1}storeRow(e,t){let i=0,s=!1,l=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){l=u.isEquivalent(this.pairs);break}s=u.isEquivalent(this.pairs),i++}l||s||ue.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Zi(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let i of t)if(i.getPairs().length!==e.length){for(let s of i.getPairs())for(let l of e)if(wn.equals(s,l))break}}static isPartialRow(e,t){for(let i of t){let s=!0;for(let l of e){let u=!1;for(let r of i.getPairs())if(l.equals(r)){u=!0;break}if(!u){s=!1;break}}if(s)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Yi.buildBitArray(e),s=Tr(t).parseInformation(),l=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),r=[l[0],l[1],u[0],u[1]];return new Vt(s,null,null,r,Me.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let s=i.getChecksumPortion(),l=2;for(let r=1;r<this.pairs.size();++r){let o=this.pairs.get(r);s+=o.getLeftChar().getChecksumPortion(),l++;let f=o.getRightChar();f!=null&&(s+=f.getChecksumPortion(),l++)}return s%=211,211*(l-4)+s==t.getValue()}static getNextSecondBar(e,t){let i;return e.get(t)?(i=e.getNextUnset(t),i=e.getNextSet(i)):(i=e.getNextSet(t),i=e.getNextUnset(i)),i}retrieveNextPair(e,t,i){let s=t.length%2==0;this.startFromEven&&(s=!s);let l,u=!0,r=-1;do this.findNextPair(e,t,r),l=this.parseFoundFinderPattern(e,i,s),l==null?r=ue.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let o=this.decodeDataCharacter(e,l,s,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new Z;let f;try{f=this.decodeDataCharacter(e,l,s,!1)}catch(d){f=null,this.verbose&&console.log(d)}return new wn(o,f,l,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),u;i>=0?u=i:this.isEmptyPair(t)?u=0:u=t[t.length-1].getFinderPattern().getStartEnd()[1];let r=t.length%2!=0;this.startFromEven&&(r=!r);let o=!1;for(;u<l&&(o=!e.get(u),!!o);)u++;let f=0,d=u;for(let x=u;x<l;x++)if(e.get(x)!=o)s[f]++;else{if(f==3){if(r&&ue.reverseCounters(s),ue.isFinderPattern(s)){this.startEnd[0]=d,this.startEnd[1]=x;return}r&&ue.reverseCounters(s),d+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,o=!o}throw new Z}static reverseCounters(e){let t=e.length;for(let i=0;i<t/2;++i){let s=e[i];e[i]=e[t-i-1],e[t-i-1]=s}}parseFoundFinderPattern(e,t,i){let s,l,u;if(i){let f=this.startEnd[0]-1;for(;f>=0&&!e.get(f);)f--;f++,s=this.startEnd[0]-f,l=f,u=this.startEnd[1]}else l=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),s=u-this.startEnd[1];let r=this.getDecodeFinderCounters();ee.arraycopy(r,0,r,1,r.length-1),r[0]=s;let o;try{o=this.parseFinderValue(r,ue.FINDER_PATTERNS)}catch{return null}return new pr(o,[l,u],l,u,t)}decodeDataCharacter(e,t,i,s){let l=this.getDataCharacterCounters();for(let Y=0;Y<l.length;Y++)l[Y]=0;if(s)ue.recordPatternInReverse(e,t.getStartEnd()[0],l);else{ue.recordPattern(e,t.getStartEnd()[1],l);for(let Y=0,ie=l.length-1;Y<ie;Y++,ie--){let ge=l[Y];l[Y]=l[ie],l[ie]=ge}}let u=17,r=le.sum(new Int32Array(l))/u,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(r-o)/o>.3)throw new Z;let f=this.getOddCounts(),d=this.getEvenCounts(),x=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(let Y=0;Y<l.length;Y++){let ie=1*l[Y]/r,ge=ie+.5;if(ge<1){if(ie<.3)throw new Z;ge=1}else if(ge>8){if(ie>8.7)throw new Z;ge=8}let Ae=Y/2;Y&1?(d[Ae]=ge,m[Ae]=ie-ge):(f[Ae]=ge,x[Ae]=ie-ge)}this.adjustOddEvenCounts(u);let y=4*t.getValue()+(i?0:2)+(s?0:1)-1,C=0,I=0;for(let Y=f.length-1;Y>=0;Y--){if(ue.isNotA1left(t,i,s)){let ie=ue.WEIGHTS[y][2*Y];I+=f[Y]*ie}C+=f[Y]}let T=0;for(let Y=d.length-1;Y>=0;Y--)if(ue.isNotA1left(t,i,s)){let ie=ue.WEIGHTS[y][2*Y+1];T+=d[Y]*ie}let O=I+T;if(C&1||C>13||C<4)throw new Z;let R=(13-C)/2,P=ue.SYMBOL_WIDEST[R],N=9-P,F=Gn.getRSSvalue(f,P,!0),L=Gn.getRSSvalue(d,N,!1),H=ue.EVEN_TOTAL_SUBSET[R],G=ue.GSUM[R],X=F*H+L+G;return new Zn(X,O)}static isNotA1left(e,t,i){return!(e.getValue()==0&&t&&i)}adjustOddEvenCounts(e){let t=le.sum(new Int32Array(this.getOddCounts())),i=le.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1;t>13?l=!0:t<4&&(s=!0);let u=!1,r=!1;i>13?r=!0:i<4&&(u=!0);let o=t+i-e,f=(t&1)==1,d=(i&1)==0;if(o==1)if(f){if(d)throw new Z;l=!0}else{if(!d)throw new Z;r=!0}else if(o==-1)if(f){if(d)throw new Z;s=!0}else{if(!d)throw new Z;u=!0}else if(o==0){if(f){if(!d)throw new Z;t<i?(s=!0,r=!0):(l=!0,u=!0)}else if(d)throw new Z}else throw new Z;if(s){if(l)throw new Z;ue.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ue.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(r)throw new Z;ue.increment(this.getEvenCounts(),this.getOddRoundingErrors())}r&&ue.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ue.SYMBOL_WIDEST=[7,5,4,3,1],ue.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ue.GSUM=[0,348,1388,2948,3988],ue.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ue.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ue.FINDER_PAT_A=0,ue.FINDER_PAT_B=1,ue.FINDER_PAT_C=2,ue.FINDER_PAT_D=3,ue.FINDER_PAT_E=4,ue.FINDER_PAT_F=5,ue.FINDER_PATTERN_SEQUENCES=[[ue.FINDER_PAT_A,ue.FINDER_PAT_A],[ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B],[ue.FINDER_PAT_A,ue.FINDER_PAT_C,ue.FINDER_PAT_B,ue.FINDER_PAT_D],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_C],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_D,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_D],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_E],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F]],ue.MAX_PAIRS=11;class Qi extends Zn{constructor(e,t,i){super(e,t),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class kt extends mn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,i){const s=this.decodePair(t,!1,e,i);kt.addOrTally(this.possibleLeftPairs,s),t.reverse();let l=this.decodePair(t,!0,e,i);kt.addOrTally(this.possibleRightPairs,l),t.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let r of this.possibleRightPairs)if(r.getCount()>1&&kt.checkChecksum(u,r))return kt.constructResult(u,r)}throw new Z}static addOrTally(e,t){if(t==null)return;let i=!1;for(let s of e)if(s.getValue()===t.getValue()){s.incrementCount(),i=!0;break}i||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let i=4537077*e.getValue()+t.getValue(),s=new String(i).toString(),l=new Oe;for(let f=13-s.length;f>0;f--)l.append("0");l.append(s);let u=0;for(let f=0;f<13;f++){let d=l.charAt(f).charCodeAt(0)-48;u+=f&1?d:3*d}u=10-u%10,u===10&&(u=0),l.append(u.toString());let r=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new Vt(l.toString(),null,0,[r[0],r[1],o[0],o[1]],Me.RSS_14,new Date().getTime())}static checkChecksum(e,t){let i=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s}decodePair(e,t,i,s){try{let l=this.findFinderPattern(e,t),u=this.parseFoundFinderPattern(e,i,t,l),r=s==null?null:s.get(ve.NEED_RESULT_POINT_CALLBACK);if(r!=null){let d=(l[0]+l[1])/2;t&&(d=e.getSize()-1-d),r.foundPossibleResultPoint(new j(d,i))}let o=this.decodeDataCharacter(e,u,!0),f=this.decodeDataCharacter(e,u,!1);return new Qi(1597*o.getValue()+f.getValue(),o.getChecksumPortion()+4*f.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,t,i){let s=this.getDataCharacterCounters();for(let T=0;T<s.length;T++)s[T]=0;if(i)It.recordPatternInReverse(e,t.getStartEnd()[0],s);else{It.recordPattern(e,t.getStartEnd()[1]+1,s);for(let T=0,O=s.length-1;T<O;T++,O--){let R=s[T];s[T]=s[O],s[O]=R}}let l=i?16:15,u=le.sum(new Int32Array(s))/l,r=this.getOddCounts(),o=this.getEvenCounts(),f=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let T=0;T<s.length;T++){let O=s[T]/u,R=Math.floor(O+.5);R<1?R=1:R>8&&(R=8);let P=Math.floor(T/2);T&1?(o[P]=R,d[P]=O-R):(r[P]=R,f[P]=O-R)}this.adjustOddEvenCounts(i,l);let x=0,m=0;for(let T=r.length-1;T>=0;T--)m*=9,m+=r[T],x+=r[T];let y=0,C=0;for(let T=o.length-1;T>=0;T--)y*=9,y+=o[T],C+=o[T];let I=m+3*y;if(i){if(x&1||x>12||x<4)throw new Z;let T=(12-x)/2,O=kt.OUTSIDE_ODD_WIDEST[T],R=9-O,P=Gn.getRSSvalue(r,O,!1),N=Gn.getRSSvalue(o,R,!0),F=kt.OUTSIDE_EVEN_TOTAL_SUBSET[T],L=kt.OUTSIDE_GSUM[T];return new Zn(P*F+N+L,I)}else{if(C&1||C>10||C<4)throw new Z;let T=(10-C)/2,O=kt.INSIDE_ODD_WIDEST[T],R=9-O,P=Gn.getRSSvalue(r,O,!0),N=Gn.getRSSvalue(o,R,!1),F=kt.INSIDE_ODD_TOTAL_SUBSET[T],L=kt.INSIDE_GSUM[T];return new Zn(N*F+P+L,I)}}findFinderPattern(e,t){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let s=e.getSize(),l=!1,u=0;for(;u<s&&(l=!e.get(u),t!==l);)u++;let r=0,o=u;for(let f=u;f<s;f++)if(e.get(f)!==l)i[r]++;else{if(r===3){if(mn.isFinderPattern(i))return[o,f];o+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,r--}else r++;i[r]=1,l=!l}throw new Z}parseFoundFinderPattern(e,t,i,s){let l=e.get(s[0]),u=s[0]-1;for(;u>=0&&l!==e.get(u);)u--;u++;const r=s[0]-u,o=this.getDecodeFinderCounters(),f=new Int32Array(o.length);ee.arraycopy(o,0,f,1,o.length-1),f[0]=r;const d=this.parseFinderValue(f,kt.FINDER_PATTERNS);let x=u,m=s[1];return i&&(x=e.getSize()-1-x,m=e.getSize()-1-m),new pr(d,[u,s[1]],x,m,t)}adjustOddEvenCounts(e,t){let i=le.sum(new Int32Array(this.getOddCounts())),s=le.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1,r=!1,o=!1;e?(i>12?u=!0:i<4&&(l=!0),s>12?o=!0:s<4&&(r=!0)):(i>11?u=!0:i<5&&(l=!0),s>10?o=!0:s<4&&(r=!0));let f=i+s-t,d=(i&1)===(e?1:0),x=(s&1)===1;if(f===1)if(d){if(x)throw new Z;u=!0}else{if(!x)throw new Z;o=!0}else if(f===-1)if(d){if(x)throw new Z;l=!0}else{if(!x)throw new Z;r=!0}else if(f===0){if(d){if(!x)throw new Z;i<s?(l=!0,o=!0):(u=!0,r=!0)}else if(x)throw new Z}else throw new Z;if(l){if(u)throw new Z;mn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&mn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),r){if(o)throw new Z;mn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&mn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],kt.OUTSIDE_GSUM=[0,161,961,2015,2715],kt.INSIDE_GSUM=[0,336,1036,1516],kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],kt.INSIDE_ODD_WIDEST=[2,4,6,8],kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Or extends It{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const i=e?e.get(ve.POSSIBLE_FORMATS):null,s=e&&e.get(ve.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(Me.EAN_13)||i.includes(Me.UPC_A)||i.includes(Me.EAN_8)||i.includes(Me.UPC_E))&&this.readers.push(new Ss(e)),i.includes(Me.CODE_39)&&this.readers.push(new st(s)),i.includes(Me.CODE_128)&&this.readers.push(new be),i.includes(Me.ITF)&&this.readers.push(new xe),i.includes(Me.RSS_14)&&this.readers.push(new kt),i.includes(Me.RSS_EXPANDED)&&this.readers.push(new ue(this.verbose))):(this.readers.push(new Ss(e)),this.readers.push(new st),this.readers.push(new Ss(e)),this.readers.push(new be),this.readers.push(new xe),this.readers.push(new kt),this.readers.push(new ue(this.verbose)))}decodeRow(e,t,i){for(let s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,t,i)}catch{}throw new Z}reset(){this.readers.forEach(e=>e.reset())}}class jr extends nn{constructor(e=500,t){super(new Or(t),e,t)}}class wt{constructor(e,t,i){this.ecCodewords=e,this.ecBlocks=[t],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class gt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ut{constructor(e,t,i,s,l,u){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=i,this.dataRegionSizeRows=s,this.dataRegionSizeColumns=l,this.ecBlocks=u;let r=0;const o=u.getECCodewords(),f=u.getECBlocks();for(let d of f)r+=d.getCount()*(d.getDataCodewords()+o);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new K;for(let i of ut.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===t)return i;throw new K}toString(){return""+this.versionNumber}static buildVersions(){return[new ut(1,10,10,8,8,new wt(5,new gt(1,3))),new ut(2,12,12,10,10,new wt(7,new gt(1,5))),new ut(3,14,14,12,12,new wt(10,new gt(1,8))),new ut(4,16,16,14,14,new wt(12,new gt(1,12))),new ut(5,18,18,16,16,new wt(14,new gt(1,18))),new ut(6,20,20,18,18,new wt(18,new gt(1,22))),new ut(7,22,22,20,20,new wt(20,new gt(1,30))),new ut(8,24,24,22,22,new wt(24,new gt(1,36))),new ut(9,26,26,24,24,new wt(28,new gt(1,44))),new ut(10,32,32,14,14,new wt(36,new gt(1,62))),new ut(11,36,36,16,16,new wt(42,new gt(1,86))),new ut(12,40,40,18,18,new wt(48,new gt(1,114))),new ut(13,44,44,20,20,new wt(56,new gt(1,144))),new ut(14,48,48,22,22,new wt(68,new gt(1,174))),new ut(15,52,52,24,24,new wt(42,new gt(2,102))),new ut(16,64,64,14,14,new wt(56,new gt(2,140))),new ut(17,72,72,16,16,new wt(36,new gt(4,92))),new ut(18,80,80,18,18,new wt(48,new gt(4,114))),new ut(19,88,88,20,20,new wt(56,new gt(4,144))),new ut(20,96,96,22,22,new wt(68,new gt(4,174))),new ut(21,104,104,24,24,new wt(56,new gt(6,136))),new ut(22,120,120,18,18,new wt(68,new gt(6,175))),new ut(23,132,132,20,20,new wt(62,new gt(8,163))),new ut(24,144,144,22,22,new wt(62,new gt(8,156),new gt(2,155))),new ut(25,8,18,6,16,new wt(7,new gt(1,5))),new ut(26,8,32,6,14,new wt(11,new gt(1,10))),new ut(27,12,26,10,24,new wt(14,new gt(1,16))),new ut(28,12,36,10,16,new wt(18,new gt(1,22))),new ut(29,16,36,14,16,new wt(24,new gt(1,32))),new ut(30,16,48,14,22,new wt(28,new gt(1,49)))]}}ut.VERSIONS=ut.buildVersions();class ct{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new K;this.version=ct.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),i=e.getWidth();return ut.getVersionForDimensions(t,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,i=4,s=0;const l=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let r=!1,o=!1,f=!1,d=!1;do if(i===l&&s===0&&!r)e[t++]=this.readCorner1(l,u)&255,i-=2,s+=2,r=!0;else if(i===l-2&&s===0&&u&3&&!o)e[t++]=this.readCorner2(l,u)&255,i-=2,s+=2,o=!0;else if(i===l+4&&s===2&&!(u&7)&&!f)e[t++]=this.readCorner3(l,u)&255,i-=2,s+=2,f=!0;else if(i===l-2&&s===0&&(u&7)===4&&!d)e[t++]=this.readCorner4(l,u)&255,i-=2,s+=2,d=!0;else{do i<l&&s>=0&&!this.readMappingMatrix.get(s,i)&&(e[t++]=this.readUtah(i,s,l,u)&255),i-=2,s+=2;while(i>=0&&s<u);i+=1,s+=3;do i>=0&&s<u&&!this.readMappingMatrix.get(s,i)&&(e[t++]=this.readUtah(i,s,l,u)&255),i+=2,s-=2;while(i<l&&s>=0);i+=3,s+=1}while(i<l||s<u);if(t!==this.version.getTotalCodewords())throw new K;return e}readModule(e,t,i,s){return e<0&&(e+=i,t+=4-(i+4&7)),t<0&&(t+=s,e+=4-(s+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,i,s){let l=0;return this.readModule(e-2,t-2,i,s)&&(l|=1),l<<=1,this.readModule(e-2,t-1,i,s)&&(l|=1),l<<=1,this.readModule(e-1,t-2,i,s)&&(l|=1),l<<=1,this.readModule(e-1,t-1,i,s)&&(l|=1),l<<=1,this.readModule(e-1,t,i,s)&&(l|=1),l<<=1,this.readModule(e,t-2,i,s)&&(l|=1),l<<=1,this.readModule(e,t-1,i,s)&&(l|=1),l<<=1,this.readModule(e,t,i,s)&&(l|=1),l}readCorner1(e,t){let i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,1,e,t)&&(i|=1),i<<=1,this.readModule(e-1,2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i}readCorner2(e,t){let i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-4,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i}readCorner3(e,t){let i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-3,e,t)&&(i|=1),i<<=1,this.readModule(1,t-2,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i}readCorner4(e,t){let i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new S("Dimension of bitMatrix must match the version size");const s=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),u=t/s|0,r=i/l|0,o=u*s,f=r*l,d=new Je(f,o);for(let x=0;x<u;++x){const m=x*s;for(let y=0;y<r;++y){const C=y*l;for(let I=0;I<s;++I){const T=x*(s+2)+1+I,O=m+I;for(let R=0;R<l;++R){const P=y*(l+2)+1+R;if(e.get(P,T)){const N=C+R;d.set(N,O)}}}}}return d}}class Ji{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const i=t.getECBlocks();let s=0;const l=i.getECBlocks();for(let I of l)s+=I.getCount();const u=new Array(s);let r=0;for(let I of l)for(let T=0;T<I.getCount();T++){const O=I.getDataCodewords(),R=i.getECCodewords()+O;u[r++]=new Ji(O,new Uint8Array(R))}const f=u[0].codewords.length-i.getECCodewords(),d=f-1;let x=0;for(let I=0;I<d;I++)for(let T=0;T<r;T++)u[T].codewords[I]=e[x++];const m=t.getVersionNumber()===24,y=m?8:r;for(let I=0;I<y;I++)u[I].codewords[f-1]=e[x++];const C=u[0].codewords.length;for(let I=f;I<C;I++)for(let T=0;T<r;T++){const O=m?(T+8)%r:T,R=m&&O>7?I-1:I;u[O].codewords[R]=e[x++]}if(x!==e.length)throw new S;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class $i{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new S(""+e);let t=0,i=this.bitOffset,s=this.byteOffset;const l=this.bytes;if(i>0){const u=8-i,r=e<u?e:u,o=u-r,f=255>>8-r<<o;t=(l[s]&f)>>o,e-=r,i+=r,i===8&&(i=0,s++)}if(e>0){for(;e>=8;)t=t<<8|l[s]&255,s++,e-=8;if(e>0){const u=8-e,r=255>>u<<u;t=t<<e|(l[s]&r)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=s,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xt;(function(v){v[v.PAD_ENCODE=0]="PAD_ENCODE",v[v.ASCII_ENCODE=1]="ASCII_ENCODE",v[v.C40_ENCODE=2]="C40_ENCODE",v[v.TEXT_ENCODE=3]="TEXT_ENCODE",v[v.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",v[v.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",v[v.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xt||(Xt={}));class Wn{static decode(e){const t=new $i(e),i=new Oe,s=new Oe,l=new Array;let u=Xt.ASCII_ENCODE;do if(u===Xt.ASCII_ENCODE)u=this.decodeAsciiSegment(t,i,s);else{switch(u){case Xt.C40_ENCODE:this.decodeC40Segment(t,i);break;case Xt.TEXT_ENCODE:this.decodeTextSegment(t,i);break;case Xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,i);break;case Xt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,i);break;case Xt.BASE256_ENCODE:this.decodeBase256Segment(t,i,l);break;default:throw new K}u=Xt.ASCII_ENCODE}while(u!==Xt.PAD_ENCODE&&t.available()>0);return s.length()>0&&i.append(s.toString()),new ne(e,i.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(e,t,i){let s=!1;do{let l=e.readBits(8);if(l===0)throw new K;if(l<=128)return s&&(l+=128),t.append(String.fromCharCode(l-1)),Xt.ASCII_ENCODE;if(l===129)return Xt.PAD_ENCODE;if(l<=229){const u=l-130;u<10&&t.append("0"),t.append(""+u)}else switch(l){case 230:return Xt.C40_ENCODE;case 231:return Xt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:s=!0;break;case 236:t.append("[)>05"),i.insert(0,"");break;case 237:t.append("[)>06"),i.insert(0,"");break;case 238:return Xt.ANSIX12_ENCODE;case 239:return Xt.TEXT_ENCODE;case 240:return Xt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||e.available()!==0)throw new K;break}}while(e.available()>0);return Xt.ASCII_ENCODE}static decodeC40Segment(e,t){let i=!1;const s=[];let l=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),s);for(let r=0;r<3;r++){const o=s[r];switch(l){case 0:if(o<3)l=o+1;else if(o<this.C40_BASIC_SET_CHARS.length){const f=this.C40_BASIC_SET_CHARS[o];i?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),i=!1):t.append(f)}else throw new K;break;case 1:i?(t.append(String.fromCharCode(o+128)),i=!1):t.append(String.fromCharCode(o)),l=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const f=this.C40_SHIFT2_SET_CHARS[o];i?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),i=!1):t.append(f)}else switch(o){case 27:t.append("");break;case 30:i=!0;break;default:throw new K}l=0;break;case 3:i?(t.append(String.fromCharCode(o+224)),i=!1):t.append(String.fromCharCode(o+96)),l=0;break;default:throw new K}}}while(e.available()>0)}static decodeTextSegment(e,t){let i=!1,s=[],l=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),s);for(let r=0;r<3;r++){const o=s[r];switch(l){case 0:if(o<3)l=o+1;else if(o<this.TEXT_BASIC_SET_CHARS.length){const f=this.TEXT_BASIC_SET_CHARS[o];i?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),i=!1):t.append(f)}else throw new K;break;case 1:i?(t.append(String.fromCharCode(o+128)),i=!1):t.append(String.fromCharCode(o)),l=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const f=this.TEXT_SHIFT2_SET_CHARS[o];i?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),i=!1):t.append(f)}else switch(o){case 27:t.append("");break;case 30:i=!0;break;default:throw new K}l=0;break;case 3:if(o<this.TEXT_SHIFT3_SET_CHARS.length){const f=this.TEXT_SHIFT3_SET_CHARS[o];i?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),i=!1):t.append(f),l=0}else throw new K;break;default:throw new K}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const i=[];do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(let l=0;l<3;l++){const u=i[l];switch(u){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(u<14)t.append(String.fromCharCode(u+44));else if(u<40)t.append(String.fromCharCode(u+51));else throw new K;break}}}while(e.available()>0)}static parseTwoBytes(e,t,i){let s=(e<<8)+t-1,l=Math.floor(s/1600);i[0]=l,s-=l*1600,l=Math.floor(s/40),i[1]=l,i[2]=s-l*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let s=e.readBits(6);if(s===31){const l=8-e.getBitOffset();l!==8&&e.readBits(l);return}s&32||(s|=64),t.append(String.fromCharCode(s))}}while(e.available()>0)}static decodeBase256Segment(e,t,i){let s=1+e.getByteOffset();const l=this.unrandomize255State(e.readBits(8),s++);let u;if(l===0?u=e.available()/8|0:l<250?u=l:u=250*(l-249)+this.unrandomize255State(e.readBits(8),s++),u<0)throw new K;const r=new Uint8Array(u);for(let o=0;o<u;o++){if(e.available()<8)throw new K;r[o]=this.unrandomize255State(e.readBits(8),s++)}i.push(r);try{t.append(Ne.decode(r,$.ISO88591))}catch(o){throw new re("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const i=149*t%255+1,s=e-i;return s>=0?s:s+256}}Wn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wn.TEXT_SHIFT2_SET_CHARS=Wn.C40_SHIFT2_SET_CHARS,Wn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ho{constructor(){this.rsDecoder=new ce(B.DATA_MATRIX_FIELD_256)}decode(e){const t=new ct(e),i=t.getVersion(),s=t.readCodewords(),l=Ji.getDataBlocks(s,i);let u=0;for(let f of l)u+=f.getNumDataCodewords();const r=new Uint8Array(u),o=l.length;for(let f=0;f<o;f++){const d=l[f],x=d.getCodewords(),m=d.getNumDataCodewords();this.correctErrors(x,m);for(let y=0;y<m;y++)r[y*o+f]=x[y]}return Wn.decode(r)}correctErrors(e,t){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new U}for(let s=0;s<t;s++)e[s]=i[s]}}class zt{constructor(e){this.image=e,this.rectangleDetector=new Le(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new Z;t=this.shiftToModuleCenter(t);const i=t[0],s=t[1],l=t[2],u=t[3];let r=this.transitionsBetween(i,u)+1,o=this.transitionsBetween(l,u)+1;(r&1)===1&&(r+=1),(o&1)===1&&(o+=1),4*r<7*o&&4*o<7*r&&(r=o=Math.max(r,o));let f=zt.sampleGrid(this.image,i,s,l,u,r,o);return new He(f,[i,s,l,u])}static shiftPoint(e,t,i){let s=(t.getX()-e.getX())/(i+1),l=(t.getY()-e.getY())/(i+1);return new j(e.getX()+s,e.getY()+l)}static moveAway(e,t,i){let s=e.getX(),l=e.getY();return s<t?s-=1:s+=1,l<i?l-=1:l+=1,new j(s,l)}detectSolid1(e){let t=e[0],i=e[1],s=e[3],l=e[2],u=this.transitionsBetween(t,i),r=this.transitionsBetween(i,s),o=this.transitionsBetween(s,l),f=this.transitionsBetween(l,t),d=u,x=[l,t,i,s];return d>r&&(d=r,x[0]=t,x[1]=i,x[2]=s,x[3]=l),d>o&&(d=o,x[0]=i,x[1]=s,x[2]=l,x[3]=t),d>f&&(x[0]=s,x[1]=l,x[2]=t,x[3]=i),x}detectSolid2(e){let t=e[0],i=e[1],s=e[2],l=e[3],u=this.transitionsBetween(t,l),r=zt.shiftPoint(i,s,(u+1)*4),o=zt.shiftPoint(s,i,(u+1)*4),f=this.transitionsBetween(r,t),d=this.transitionsBetween(o,l);return f<d?(e[0]=t,e[1]=i,e[2]=s,e[3]=l):(e[0]=i,e[1]=s,e[2]=l,e[3]=t),e}correctTopRight(e){let t=e[0],i=e[1],s=e[2],l=e[3],u=this.transitionsBetween(t,l),r=this.transitionsBetween(i,l),o=zt.shiftPoint(t,i,(r+1)*4),f=zt.shiftPoint(s,i,(u+1)*4);u=this.transitionsBetween(o,l),r=this.transitionsBetween(f,l);let d=new j(l.getX()+(s.getX()-i.getX())/(u+1),l.getY()+(s.getY()-i.getY())/(u+1)),x=new j(l.getX()+(t.getX()-i.getX())/(r+1),l.getY()+(t.getY()-i.getY())/(r+1));if(!this.isValid(d))return this.isValid(x)?x:null;if(!this.isValid(x))return d;let m=this.transitionsBetween(o,d)+this.transitionsBetween(f,d),y=this.transitionsBetween(o,x)+this.transitionsBetween(f,x);return m>y?d:x}shiftToModuleCenter(e){let t=e[0],i=e[1],s=e[2],l=e[3],u=this.transitionsBetween(t,l)+1,r=this.transitionsBetween(s,l)+1,o=zt.shiftPoint(t,i,r*4),f=zt.shiftPoint(s,i,u*4);u=this.transitionsBetween(o,l)+1,r=this.transitionsBetween(f,l)+1,(u&1)===1&&(u+=1),(r&1)===1&&(r+=1);let d=(t.getX()+i.getX()+s.getX()+l.getX())/4,x=(t.getY()+i.getY()+s.getY()+l.getY())/4;t=zt.moveAway(t,d,x),i=zt.moveAway(i,d,x),s=zt.moveAway(s,d,x),l=zt.moveAway(l,d,x);let m,y;return o=zt.shiftPoint(t,i,r*4),o=zt.shiftPoint(o,l,u*4),m=zt.shiftPoint(i,t,r*4),m=zt.shiftPoint(m,s,u*4),f=zt.shiftPoint(s,l,r*4),f=zt.shiftPoint(f,i,u*4),y=zt.shiftPoint(l,s,r*4),y=zt.shiftPoint(y,t,u*4),[o,m,f,y]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,i,s,l,u,r){return it.getInstance().sampleGrid(e,u,r,.5,.5,u-.5,.5,u-.5,r-.5,.5,r-.5,t.getX(),t.getY(),l.getX(),l.getY(),s.getX(),s.getY(),i.getX(),i.getY())}transitionsBetween(e,t){let i=Math.trunc(e.getX()),s=Math.trunc(e.getY()),l=Math.trunc(t.getX()),u=Math.trunc(t.getY()),r=Math.abs(u-s)>Math.abs(l-i);if(r){let I=i;i=s,s=I,I=l,l=u,u=I}let o=Math.abs(l-i),f=Math.abs(u-s),d=-o/2,x=s<u?1:-1,m=i<l?1:-1,y=0,C=this.image.get(r?s:i,r?i:s);for(let I=i,T=s;I!==l;I+=m){let O=this.image.get(r?T:I,r?I:T);if(O!==C&&(y++,C=O),d+=f,d>0){if(T===u)break;T+=x,d-=o}}return y}}class xr{constructor(){this.decoder=new ho}decode(e,t=null){let i,s;if(t!=null&&t.has(ve.PURE_BARCODE)){const f=xr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(f),s=xr.NO_POINTS}else{const f=new zt(e.getBlackMatrix()).detect();i=this.decoder.decode(f.getBits()),s=f.getPoints()}const l=i.getRawBytes(),u=new Vt(i.getText(),l,8*l.length,s,Me.DATA_MATRIX,ee.currentTimeMillis()),r=i.getByteSegments();r!=null&&u.putMetadata(Ce.BYTE_SEGMENTS,r);const o=i.getECLevel();return o!=null&&u.putMetadata(Ce.ERROR_CORRECTION_LEVEL,o),u}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t==null||i==null)throw new Z;const s=this.moduleSize(t,e);let l=t[1];const u=i[1];let r=t[0];const f=(i[0]-r+1)/s,d=(u-l+1)/s;if(f<=0||d<=0)throw new Z;const x=s/2;l+=x,r+=x;const m=new Je(f,d);for(let y=0;y<d;y++){const C=l+y*s;for(let I=0;I<f;I++)e.get(r+I*s,C)&&m.set(I,y)}return m}static moduleSize(e,t){const i=t.getWidth();let s=e[0];const l=e[1];for(;s<i&&t.get(s,l);)s++;if(s===i)throw new Z;const u=s-e[0];if(u===0)throw new Z;return u}}xr.NO_POINTS=[];class Dt extends nn{constructor(e=500){super(new xr,e)}}var lr;(function(v){v[v.L=0]="L",v[v.M=1]="M",v[v.Q=2]="Q",v[v.H=3]="H"})(lr||(lr={}));class Et{constructor(e,t,i){this.value=e,this.stringValue=t,this.bits=i,Et.FOR_BITS.set(i,this),Et.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new _(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Et))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Et.FOR_BITS.size)throw new S;return Et.FOR_BITS.get(e)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(lr.L,"L",1),Et.M=new Et(lr.M,"M",0),Et.Q=new Et(lr.Q,"Q",3),Et.H=new Et(lr.H,"H",2);class Zt{constructor(e){this.errorCorrectionLevel=Et.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return ae.bitCount(e^t)}static decodeFormatInformation(e,t){const i=Zt.doDecodeFormatInformation(e,t);return i!==null?i:Zt.doDecodeFormatInformation(e^Zt.FORMAT_INFO_MASK_QR,t^Zt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let i=Number.MAX_SAFE_INTEGER,s=0;for(const l of Zt.FORMAT_INFO_DECODE_LOOKUP){const u=l[0];if(u===e||u===t)return new Zt(l[1]);let r=Zt.numBitsDiffering(e,u);r<i&&(s=l[1],i=r),e!==t&&(r=Zt.numBitsDiffering(t,u),r<i&&(s=l[1],i=r))}return i<=3?new Zt(s):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Zt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Zt.FORMAT_INFO_MASK_QR=21522,Zt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class z{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const i of t)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ve{constructor(e,t,...i){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;let s=0;const l=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const r of u)s+=r.getCount()*(r.getDataCodewords()+l);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new K;try{return this.getVersionForNumber((e-17)/4)}catch{throw new K}}static getVersionForNumber(e){if(e<1||e>40)throw new S;return Ve.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,i=0;for(let s=0;s<Ve.VERSION_DECODE_INFO.length;s++){const l=Ve.VERSION_DECODE_INFO[s];if(l===e)return Ve.getVersionForNumber(s+7);const u=Zt.numBitsDiffering(e,l);u<t&&(i=s+7,t=u)}return t<=3?Ve.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Je(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let s=0;s<i;s++){const l=this.alignmentPatternCenters[s]-2;for(let u=0;u<i;u++)s===0&&(u===0||u===i-1)||s===i-1&&u===0||t.setRegion(this.alignmentPatternCenters[u]-2,l,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Ve.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ve.VERSIONS=[new Ve(1,new Int32Array(0),new z(7,new D(1,19)),new z(10,new D(1,16)),new z(13,new D(1,13)),new z(17,new D(1,9))),new Ve(2,Int32Array.from([6,18]),new z(10,new D(1,34)),new z(16,new D(1,28)),new z(22,new D(1,22)),new z(28,new D(1,16))),new Ve(3,Int32Array.from([6,22]),new z(15,new D(1,55)),new z(26,new D(1,44)),new z(18,new D(2,17)),new z(22,new D(2,13))),new Ve(4,Int32Array.from([6,26]),new z(20,new D(1,80)),new z(18,new D(2,32)),new z(26,new D(2,24)),new z(16,new D(4,9))),new Ve(5,Int32Array.from([6,30]),new z(26,new D(1,108)),new z(24,new D(2,43)),new z(18,new D(2,15),new D(2,16)),new z(22,new D(2,11),new D(2,12))),new Ve(6,Int32Array.from([6,34]),new z(18,new D(2,68)),new z(16,new D(4,27)),new z(24,new D(4,19)),new z(28,new D(4,15))),new Ve(7,Int32Array.from([6,22,38]),new z(20,new D(2,78)),new z(18,new D(4,31)),new z(18,new D(2,14),new D(4,15)),new z(26,new D(4,13),new D(1,14))),new Ve(8,Int32Array.from([6,24,42]),new z(24,new D(2,97)),new z(22,new D(2,38),new D(2,39)),new z(22,new D(4,18),new D(2,19)),new z(26,new D(4,14),new D(2,15))),new Ve(9,Int32Array.from([6,26,46]),new z(30,new D(2,116)),new z(22,new D(3,36),new D(2,37)),new z(20,new D(4,16),new D(4,17)),new z(24,new D(4,12),new D(4,13))),new Ve(10,Int32Array.from([6,28,50]),new z(18,new D(2,68),new D(2,69)),new z(26,new D(4,43),new D(1,44)),new z(24,new D(6,19),new D(2,20)),new z(28,new D(6,15),new D(2,16))),new Ve(11,Int32Array.from([6,30,54]),new z(20,new D(4,81)),new z(30,new D(1,50),new D(4,51)),new z(28,new D(4,22),new D(4,23)),new z(24,new D(3,12),new D(8,13))),new Ve(12,Int32Array.from([6,32,58]),new z(24,new D(2,92),new D(2,93)),new z(22,new D(6,36),new D(2,37)),new z(26,new D(4,20),new D(6,21)),new z(28,new D(7,14),new D(4,15))),new Ve(13,Int32Array.from([6,34,62]),new z(26,new D(4,107)),new z(22,new D(8,37),new D(1,38)),new z(24,new D(8,20),new D(4,21)),new z(22,new D(12,11),new D(4,12))),new Ve(14,Int32Array.from([6,26,46,66]),new z(30,new D(3,115),new D(1,116)),new z(24,new D(4,40),new D(5,41)),new z(20,new D(11,16),new D(5,17)),new z(24,new D(11,12),new D(5,13))),new Ve(15,Int32Array.from([6,26,48,70]),new z(22,new D(5,87),new D(1,88)),new z(24,new D(5,41),new D(5,42)),new z(30,new D(5,24),new D(7,25)),new z(24,new D(11,12),new D(7,13))),new Ve(16,Int32Array.from([6,26,50,74]),new z(24,new D(5,98),new D(1,99)),new z(28,new D(7,45),new D(3,46)),new z(24,new D(15,19),new D(2,20)),new z(30,new D(3,15),new D(13,16))),new Ve(17,Int32Array.from([6,30,54,78]),new z(28,new D(1,107),new D(5,108)),new z(28,new D(10,46),new D(1,47)),new z(28,new D(1,22),new D(15,23)),new z(28,new D(2,14),new D(17,15))),new Ve(18,Int32Array.from([6,30,56,82]),new z(30,new D(5,120),new D(1,121)),new z(26,new D(9,43),new D(4,44)),new z(28,new D(17,22),new D(1,23)),new z(28,new D(2,14),new D(19,15))),new Ve(19,Int32Array.from([6,30,58,86]),new z(28,new D(3,113),new D(4,114)),new z(26,new D(3,44),new D(11,45)),new z(26,new D(17,21),new D(4,22)),new z(26,new D(9,13),new D(16,14))),new Ve(20,Int32Array.from([6,34,62,90]),new z(28,new D(3,107),new D(5,108)),new z(26,new D(3,41),new D(13,42)),new z(30,new D(15,24),new D(5,25)),new z(28,new D(15,15),new D(10,16))),new Ve(21,Int32Array.from([6,28,50,72,94]),new z(28,new D(4,116),new D(4,117)),new z(26,new D(17,42)),new z(28,new D(17,22),new D(6,23)),new z(30,new D(19,16),new D(6,17))),new Ve(22,Int32Array.from([6,26,50,74,98]),new z(28,new D(2,111),new D(7,112)),new z(28,new D(17,46)),new z(30,new D(7,24),new D(16,25)),new z(24,new D(34,13))),new Ve(23,Int32Array.from([6,30,54,78,102]),new z(30,new D(4,121),new D(5,122)),new z(28,new D(4,47),new D(14,48)),new z(30,new D(11,24),new D(14,25)),new z(30,new D(16,15),new D(14,16))),new Ve(24,Int32Array.from([6,28,54,80,106]),new z(30,new D(6,117),new D(4,118)),new z(28,new D(6,45),new D(14,46)),new z(30,new D(11,24),new D(16,25)),new z(30,new D(30,16),new D(2,17))),new Ve(25,Int32Array.from([6,32,58,84,110]),new z(26,new D(8,106),new D(4,107)),new z(28,new D(8,47),new D(13,48)),new z(30,new D(7,24),new D(22,25)),new z(30,new D(22,15),new D(13,16))),new Ve(26,Int32Array.from([6,30,58,86,114]),new z(28,new D(10,114),new D(2,115)),new z(28,new D(19,46),new D(4,47)),new z(28,new D(28,22),new D(6,23)),new z(30,new D(33,16),new D(4,17))),new Ve(27,Int32Array.from([6,34,62,90,118]),new z(30,new D(8,122),new D(4,123)),new z(28,new D(22,45),new D(3,46)),new z(30,new D(8,23),new D(26,24)),new z(30,new D(12,15),new D(28,16))),new Ve(28,Int32Array.from([6,26,50,74,98,122]),new z(30,new D(3,117),new D(10,118)),new z(28,new D(3,45),new D(23,46)),new z(30,new D(4,24),new D(31,25)),new z(30,new D(11,15),new D(31,16))),new Ve(29,Int32Array.from([6,30,54,78,102,126]),new z(30,new D(7,116),new D(7,117)),new z(28,new D(21,45),new D(7,46)),new z(30,new D(1,23),new D(37,24)),new z(30,new D(19,15),new D(26,16))),new Ve(30,Int32Array.from([6,26,52,78,104,130]),new z(30,new D(5,115),new D(10,116)),new z(28,new D(19,47),new D(10,48)),new z(30,new D(15,24),new D(25,25)),new z(30,new D(23,15),new D(25,16))),new Ve(31,Int32Array.from([6,30,56,82,108,134]),new z(30,new D(13,115),new D(3,116)),new z(28,new D(2,46),new D(29,47)),new z(30,new D(42,24),new D(1,25)),new z(30,new D(23,15),new D(28,16))),new Ve(32,Int32Array.from([6,34,60,86,112,138]),new z(30,new D(17,115)),new z(28,new D(10,46),new D(23,47)),new z(30,new D(10,24),new D(35,25)),new z(30,new D(19,15),new D(35,16))),new Ve(33,Int32Array.from([6,30,58,86,114,142]),new z(30,new D(17,115),new D(1,116)),new z(28,new D(14,46),new D(21,47)),new z(30,new D(29,24),new D(19,25)),new z(30,new D(11,15),new D(46,16))),new Ve(34,Int32Array.from([6,34,62,90,118,146]),new z(30,new D(13,115),new D(6,116)),new z(28,new D(14,46),new D(23,47)),new z(30,new D(44,24),new D(7,25)),new z(30,new D(59,16),new D(1,17))),new Ve(35,Int32Array.from([6,30,54,78,102,126,150]),new z(30,new D(12,121),new D(7,122)),new z(28,new D(12,47),new D(26,48)),new z(30,new D(39,24),new D(14,25)),new z(30,new D(22,15),new D(41,16))),new Ve(36,Int32Array.from([6,24,50,76,102,128,154]),new z(30,new D(6,121),new D(14,122)),new z(28,new D(6,47),new D(34,48)),new z(30,new D(46,24),new D(10,25)),new z(30,new D(2,15),new D(64,16))),new Ve(37,Int32Array.from([6,28,54,80,106,132,158]),new z(30,new D(17,122),new D(4,123)),new z(28,new D(29,46),new D(14,47)),new z(30,new D(49,24),new D(10,25)),new z(30,new D(24,15),new D(46,16))),new Ve(38,Int32Array.from([6,32,58,84,110,136,162]),new z(30,new D(4,122),new D(18,123)),new z(28,new D(13,46),new D(32,47)),new z(30,new D(48,24),new D(14,25)),new z(30,new D(42,15),new D(32,16))),new Ve(39,Int32Array.from([6,26,54,82,110,138,166]),new z(30,new D(20,117),new D(4,118)),new z(28,new D(40,47),new D(7,48)),new z(30,new D(43,24),new D(22,25)),new z(30,new D(10,15),new D(67,16))),new Ve(40,Int32Array.from([6,30,58,86,114,142,170]),new z(30,new D(19,118),new D(6,119)),new z(28,new D(18,47),new D(31,48)),new z(30,new D(34,24),new D(34,25)),new z(30,new D(20,15),new D(61,16)))];var on;(function(v){v[v.DATA_MASK_000=0]="DATA_MASK_000",v[v.DATA_MASK_001=1]="DATA_MASK_001",v[v.DATA_MASK_010=2]="DATA_MASK_010",v[v.DATA_MASK_011=3]="DATA_MASK_011",v[v.DATA_MASK_100=4]="DATA_MASK_100",v[v.DATA_MASK_101=5]="DATA_MASK_101",v[v.DATA_MASK_110=6]="DATA_MASK_110",v[v.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class An{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let i=0;i<t;i++)for(let s=0;s<t;s++)this.isMasked(i,s)&&e.flip(s,i)}}An.values=new Map([[on.DATA_MASK_000,new An(on.DATA_MASK_000,(v,e)=>(v+e&1)===0)],[on.DATA_MASK_001,new An(on.DATA_MASK_001,(v,e)=>(v&1)===0)],[on.DATA_MASK_010,new An(on.DATA_MASK_010,(v,e)=>e%3===0)],[on.DATA_MASK_011,new An(on.DATA_MASK_011,(v,e)=>(v+e)%3===0)],[on.DATA_MASK_100,new An(on.DATA_MASK_100,(v,e)=>(Math.floor(v/2)+Math.floor(e/3)&1)===0)],[on.DATA_MASK_101,new An(on.DATA_MASK_101,(v,e)=>v*e%6===0)],[on.DATA_MASK_110,new An(on.DATA_MASK_110,(v,e)=>v*e%6<3)],[on.DATA_MASK_111,new An(on.DATA_MASK_111,(v,e)=>(v+e+v*e%3&1)===0)]]);class go{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new K;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let l=0;l<6;l++)e=this.copyBit(l,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let l=5;l>=0;l--)e=this.copyBit(8,l,e);const t=this.bitMatrix.getHeight();let i=0;const s=t-7;for(let l=t-1;l>=s;l--)i=this.copyBit(8,l,i);for(let l=t-8;l<t;l++)i=this.copyBit(l,8,i);if(this.parsedFormatInfo=Zt.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ve.getVersionForNumber(t);let i=0;const s=e-11;for(let u=5;u>=0;u--)for(let r=e-9;r>=s;r--)i=this.copyBit(r,u,i);let l=Ve.decodeVersionInformation(i);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;i=0;for(let u=5;u>=0;u--)for(let r=e-9;r>=s;r--)i=this.copyBit(u,r,i);if(l=Ve.decodeVersionInformation(i),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new K}copyBit(e,t,i){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),i=An.values.get(e.getDataMask()),s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s);const l=t.buildFunctionPattern();let u=!0;const r=new Uint8Array(t.getTotalCodewords());let o=0,f=0,d=0;for(let x=s-1;x>0;x-=2){x===6&&x--;for(let m=0;m<s;m++){const y=u?s-1-m:m;for(let C=0;C<2;C++)l.get(x-C,y)||(d++,f<<=1,this.bitMatrix.get(x-C,y)&&(f|=1),d===8&&(r[o++]=f,d=0,f=0))}u=!u}if(o!==t.getTotalCodewords())throw new K;return r}remask(){if(this.parsedFormatInfo===null)return;const e=An.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,i=e.getWidth();t<i;t++)for(let s=t+1,l=e.getHeight();s<l;s++)e.get(t,s)!==e.get(s,t)&&(e.flip(s,t),e.flip(t,s))}}class Ts{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,i){if(e.length!==t.getTotalCodewords())throw new S;const s=t.getECBlocksForLevel(i);let l=0;const u=s.getECBlocks();for(const C of u)l+=C.getCount();const r=new Array(l);let o=0;for(const C of u)for(let I=0;I<C.getCount();I++){const T=C.getDataCodewords(),O=s.getECCodewordsPerBlock()+T;r[o++]=new Ts(T,new Uint8Array(O))}const f=r[0].codewords.length;let d=r.length-1;for(;d>=0&&r[d].codewords.length!==f;)d--;d++;const x=f-s.getECCodewordsPerBlock();let m=0;for(let C=0;C<x;C++)for(let I=0;I<o;I++)r[I].codewords[C]=e[m++];for(let C=d;C<o;C++)r[C].codewords[x]=e[m++];const y=r[0].codewords.length;for(let C=x;C<y;C++)for(let I=0;I<o;I++){const T=I<d?C:C+1;r[I].codewords[T]=e[m++]}return r}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var $e;(function(v){v[v.TERMINATOR=0]="TERMINATOR",v[v.NUMERIC=1]="NUMERIC",v[v.ALPHANUMERIC=2]="ALPHANUMERIC",v[v.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",v[v.BYTE=4]="BYTE",v[v.ECI=5]="ECI",v[v.KANJI=6]="KANJI",v[v.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",v[v.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",v[v.HANZI=9]="HANZI"})($e||($e={}));class Ge{constructor(e,t,i,s){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=i,this.bits=s,Ge.FOR_BITS.set(s,this),Ge.FOR_VALUE.set(e,this)}static forBits(e){const t=Ge.FOR_BITS.get(e);if(t===void 0)throw new S;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let i;return t<=9?i=0:t<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ge))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.TERMINATOR=new Ge($e.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ge.NUMERIC=new Ge($e.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ge.ALPHANUMERIC=new Ge($e.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ge.STRUCTURED_APPEND=new Ge($e.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ge.BYTE=new Ge($e.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ge.ECI=new Ge($e.ECI,"ECI",Int32Array.from([0,0,0]),7),Ge.KANJI=new Ge($e.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ge.FNC1_FIRST_POSITION=new Ge($e.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ge.FNC1_SECOND_POSITION=new Ge($e.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ge.HANZI=new Ge($e.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ht{static decode(e,t,i,s){const l=new $i(e);let u=new Oe;const r=new Array;let o=-1,f=-1;try{let d=null,x=!1,m;do{if(l.available()<4)m=Ge.TERMINATOR;else{const y=l.readBits(4);m=Ge.forBits(y)}switch(m){case Ge.TERMINATOR:break;case Ge.FNC1_FIRST_POSITION:case Ge.FNC1_SECOND_POSITION:x=!0;break;case Ge.STRUCTURED_APPEND:if(l.available()<16)throw new K;o=l.readBits(8),f=l.readBits(8);break;case Ge.ECI:const y=Ht.parseECIValue(l);if(d=V.getCharacterSetECIByValue(y),d===null)throw new K;break;case Ge.HANZI:const C=l.readBits(4),I=l.readBits(m.getCharacterCountBits(t));C===Ht.GB2312_SUBSET&&Ht.decodeHanziSegment(l,u,I);break;default:const T=l.readBits(m.getCharacterCountBits(t));switch(m){case Ge.NUMERIC:Ht.decodeNumericSegment(l,u,T);break;case Ge.ALPHANUMERIC:Ht.decodeAlphanumericSegment(l,u,T,x);break;case Ge.BYTE:Ht.decodeByteSegment(l,u,T,d,r,s);break;case Ge.KANJI:Ht.decodeKanjiSegment(l,u,T);break;default:throw new K}break}}while(m!==Ge.TERMINATOR)}catch{throw new K}return new ne(e,u.toString(),r.length===0?null:r,i===null?null:i.toString(),o,f)}static decodeHanziSegment(e,t,i){if(i*13>e.available())throw new K;const s=new Uint8Array(2*i);let l=0;for(;i>0;){const u=e.readBits(13);let r=u/96<<8&4294967295|u%96;r<959?r+=41377:r+=42657,s[l]=r>>8&255,s[l+1]=r&255,l+=2,i--}try{t.append(Ne.decode(s,$.GB2312))}catch(u){throw new K(u)}}static decodeKanjiSegment(e,t,i){if(i*13>e.available())throw new K;const s=new Uint8Array(2*i);let l=0;for(;i>0;){const u=e.readBits(13);let r=u/192<<8&4294967295|u%192;r<7936?r+=33088:r+=49472,s[l]=r>>8,s[l+1]=r,l+=2,i--}try{t.append(Ne.decode(s,$.SHIFT_JIS))}catch(u){throw new K(u)}}static decodeByteSegment(e,t,i,s,l,u){if(8*i>e.available())throw new K;const r=new Uint8Array(i);for(let f=0;f<i;f++)r[f]=e.readBits(8);let o;s===null?o=$.guessEncoding(r,u):o=s.getName();try{t.append(Ne.decode(r,o))}catch(f){throw new K(f)}l.push(r)}static toAlphaNumericChar(e){if(e>=Ht.ALPHANUMERIC_CHARS.length)throw new K;return Ht.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,i,s){const l=t.length();for(;i>1;){if(e.available()<11)throw new K;const u=e.readBits(11);t.append(Ht.toAlphaNumericChar(Math.floor(u/45))),t.append(Ht.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new K;t.append(Ht.toAlphaNumericChar(e.readBits(6)))}if(s)for(let u=l;u<t.length();u++)t.charAt(u)==="%"&&(u<t.length()-1&&t.charAt(u+1)==="%"?t.deleteCharAt(u+1):t.setCharAt(u,""))}static decodeNumericSegment(e,t,i){for(;i>=3;){if(e.available()<10)throw new K;const s=e.readBits(10);if(s>=1e3)throw new K;t.append(Ht.toAlphaNumericChar(Math.floor(s/100))),t.append(Ht.toAlphaNumericChar(Math.floor(s/10)%10)),t.append(Ht.toAlphaNumericChar(s%10)),i-=3}if(i===2){if(e.available()<7)throw new K;const s=e.readBits(7);if(s>=100)throw new K;t.append(Ht.toAlphaNumericChar(Math.floor(s/10))),t.append(Ht.toAlphaNumericChar(s%10))}else if(i===1){if(e.available()<4)throw new K;const s=e.readBits(4);if(s>=10)throw new K;t.append(Ht.toAlphaNumericChar(s))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const i=e.readBits(8);return(t&63)<<8&4294967295|i}if((t&224)===192){const i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new K}}Ht.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ht.GB2312_SUBSET=1;class po{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Pn{constructor(){this.rsDecoder=new ce(B.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Je.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const i=new go(e);let s=null;try{return this.decodeBitMatrixParser(i,t)}catch(l){s=l}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const l=this.decodeBitMatrixParser(i,t);return l.setOther(new po(!0)),l}catch(l){throw s!==null?s:l}}decodeBitMatrixParser(e,t){const i=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),u=Ts.getDataBlocks(l,i,s);let r=0;for(const d of u)r+=d.getNumDataCodewords();const o=new Uint8Array(r);let f=0;for(const d of u){const x=d.getCodewords(),m=d.getNumDataCodewords();this.correctErrors(x,m);for(let y=0;y<m;y++)o[f++]=x[y]}return Ht.decode(o,i,s,t)}correctErrors(e,t){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new U}for(let s=0;s<t;s++)e[s]=i[s]}}class Rr extends j{constructor(e,t,i){super(e,t),this.estimatedModuleSize=i}aboutEquals(e,t,i){if(Math.abs(t-this.getY())<=e&&Math.abs(i-this.getX())<=e){const s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(e,t,i){const s=(this.getX()+t)/2,l=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Rr(s,l,u)}}class Kr{constructor(e,t,i,s,l,u,r){this.image=e,this.startX=t,this.startY=i,this.width=s,this.height=l,this.moduleSize=u,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,i=this.width,s=e+i,l=this.startY+t/2,u=new Int32Array(3),r=this.image;for(let o=0;o<t;o++){const f=l+(o&1?-Math.floor((o+1)/2):Math.floor((o+1)/2));u[0]=0,u[1]=0,u[2]=0;let d=e;for(;d<s&&!r.get(d,f);)d++;let x=0;for(;d<s;){if(r.get(d,f))if(x===1)u[1]++;else if(x===2){if(this.foundPatternCross(u)){const m=this.handlePossibleCenter(u,f,d);if(m!==null)return m}u[0]=u[2],u[1]=1,u[2]=0,x=1}else u[++x]++;else x===1&&x++,u[x]++;d++}if(this.foundPatternCross(u)){const m=this.handlePossibleCenter(u,f,s);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,i=t/2;for(let s=0;s<3;s++)if(Math.abs(t-e[s])>=i)return!1;return!0}crossCheckVertical(e,t,i,s){const l=this.image,u=l.getHeight(),r=this.crossCheckStateCount;r[0]=0,r[1]=0,r[2]=0;let o=e;for(;o>=0&&l.get(t,o)&&r[1]<=i;)r[1]++,o--;if(o<0||r[1]>i)return NaN;for(;o>=0&&!l.get(t,o)&&r[0]<=i;)r[0]++,o--;if(r[0]>i)return NaN;for(o=e+1;o<u&&l.get(t,o)&&r[1]<=i;)r[1]++,o++;if(o===u||r[1]>i)return NaN;for(;o<u&&!l.get(t,o)&&r[2]<=i;)r[2]++,o++;if(r[2]>i)return NaN;const f=r[0]+r[1]+r[2];return 5*Math.abs(f-s)>=2*s?NaN:this.foundPatternCross(r)?Kr.centerFromEnd(r,o):NaN}handlePossibleCenter(e,t,i){const s=e[0]+e[1]+e[2],l=Kr.centerFromEnd(e,i),u=this.crossCheckVertical(t,l,2*e[1],s);if(!isNaN(u)){const r=(e[0]+e[1]+e[2])/3;for(const f of this.possibleCenters)if(f.aboutEquals(r,u,l))return f.combineEstimate(u,l,r);const o=new Rr(l,u,r);this.possibleCenters.push(o),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(o)}return null}}class cr extends j{constructor(e,t,i,s){super(e,t),this.estimatedModuleSize=i,this.count=s,s===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,i){if(Math.abs(t-this.getY())<=e&&Math.abs(i-this.getX())<=e){const s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(e,t,i){const s=this.count+1,l=(this.count*this.getX()+t)/s,u=(this.count*this.getY()+e)/s,r=(this.count*this.estimatedModuleSize+i)/s;return new cr(l,u,r,s)}}class xo{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class an{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(ve.TRY_HARDER)!==void 0,i=e!=null&&e.get(ve.PURE_BARCODE)!==void 0,s=this.image,l=s.getHeight(),u=s.getWidth();let r=Math.floor(3*l/(4*an.MAX_MODULES));(r<an.MIN_SKIP||t)&&(r=an.MIN_SKIP);let o=!1;const f=new Int32Array(5);for(let x=r-1;x<l&&!o;x+=r){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;let m=0;for(let y=0;y<u;y++)if(s.get(y,x))(m&1)===1&&m++,f[m]++;else if(m&1)f[m]++;else if(m===4)if(an.foundPatternCross(f)){if(this.handlePossibleCenter(f,x,y,i)===!0)if(r=2,this.hasSkipped===!0)o=this.haveMultiplyConfirmedCenters();else{const I=this.findRowSkip();I>f[2]&&(x+=I-f[2]-r,y=u-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;continue}m=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;else f[++m]++;an.foundPatternCross(f)&&this.handlePossibleCenter(f,x,u,i)===!0&&(r=f[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}const d=this.selectBestPatterns();return j.orderBestPatterns(d),new xo(d)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let l=0;l<5;l++){const u=e[l];if(u===0)return!1;t+=u}if(t<7)return!1;const i=t/7,s=i/2;return Math.abs(i-e[0])<s&&Math.abs(i-e[1])<s&&Math.abs(3*i-e[2])<3*s&&Math.abs(i-e[3])<s&&Math.abs(i-e[4])<s}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,i,s){const l=this.getCrossCheckStateCount();let u=0;const r=this.image;for(;e>=u&&t>=u&&r.get(t-u,e-u);)l[2]++,u++;if(e<u||t<u)return!1;for(;e>=u&&t>=u&&!r.get(t-u,e-u)&&l[1]<=i;)l[1]++,u++;if(e<u||t<u||l[1]>i)return!1;for(;e>=u&&t>=u&&r.get(t-u,e-u)&&l[0]<=i;)l[0]++,u++;if(l[0]>i)return!1;const o=r.getHeight(),f=r.getWidth();for(u=1;e+u<o&&t+u<f&&r.get(t+u,e+u);)l[2]++,u++;if(e+u>=o||t+u>=f)return!1;for(;e+u<o&&t+u<f&&!r.get(t+u,e+u)&&l[3]<i;)l[3]++,u++;if(e+u>=o||t+u>=f||l[3]>=i)return!1;for(;e+u<o&&t+u<f&&r.get(t+u,e+u)&&l[4]<i;)l[4]++,u++;if(l[4]>=i)return!1;const d=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(d-s)<2*s&&an.foundPatternCross(l)}crossCheckVertical(e,t,i,s){const l=this.image,u=l.getHeight(),r=this.getCrossCheckStateCount();let o=e;for(;o>=0&&l.get(t,o);)r[2]++,o--;if(o<0)return NaN;for(;o>=0&&!l.get(t,o)&&r[1]<=i;)r[1]++,o--;if(o<0||r[1]>i)return NaN;for(;o>=0&&l.get(t,o)&&r[0]<=i;)r[0]++,o--;if(r[0]>i)return NaN;for(o=e+1;o<u&&l.get(t,o);)r[2]++,o++;if(o===u)return NaN;for(;o<u&&!l.get(t,o)&&r[3]<i;)r[3]++,o++;if(o===u||r[3]>=i)return NaN;for(;o<u&&l.get(t,o)&&r[4]<i;)r[4]++,o++;if(r[4]>=i)return NaN;const f=r[0]+r[1]+r[2]+r[3]+r[4];return 5*Math.abs(f-s)>=2*s?NaN:an.foundPatternCross(r)?an.centerFromEnd(r,o):NaN}crossCheckHorizontal(e,t,i,s){const l=this.image,u=l.getWidth(),r=this.getCrossCheckStateCount();let o=e;for(;o>=0&&l.get(o,t);)r[2]++,o--;if(o<0)return NaN;for(;o>=0&&!l.get(o,t)&&r[1]<=i;)r[1]++,o--;if(o<0||r[1]>i)return NaN;for(;o>=0&&l.get(o,t)&&r[0]<=i;)r[0]++,o--;if(r[0]>i)return NaN;for(o=e+1;o<u&&l.get(o,t);)r[2]++,o++;if(o===u)return NaN;for(;o<u&&!l.get(o,t)&&r[3]<i;)r[3]++,o++;if(o===u||r[3]>=i)return NaN;for(;o<u&&l.get(o,t)&&r[4]<i;)r[4]++,o++;if(r[4]>=i)return NaN;const f=r[0]+r[1]+r[2]+r[3]+r[4];return 5*Math.abs(f-s)>=s?NaN:an.foundPatternCross(r)?an.centerFromEnd(r,o):NaN}handlePossibleCenter(e,t,i,s){const l=e[0]+e[1]+e[2]+e[3]+e[4];let u=an.centerFromEnd(e,i),r=this.crossCheckVertical(t,Math.floor(u),e[2],l);if(!isNaN(r)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(r),e[2],l),!isNaN(u)&&(!s||this.crossCheckDiagonal(Math.floor(r),Math.floor(u),e[2],l)))){const o=l/7;let f=!1;const d=this.possibleCenters;for(let x=0,m=d.length;x<m;x++){const y=d[x];if(y.aboutEquals(o,r,u)){d[x]=y.combineEstimate(r,u,o),f=!0;break}}if(!f){const x=new cr(u,r,o);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const i of this.possibleCenters)if(i.getCount()>=an.CENTER_QUORUM)if(t==null)t=i;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-i.getX())-Math.abs(t.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=an.CENTER_QUORUM&&(e++,t+=u.getEstimatedModuleSize());if(e<3)return!1;const s=t/i;let l=0;for(const u of this.possibleCenters)l+=Math.abs(u.getEstimatedModuleSize()-s);return l<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Z;const t=this.possibleCenters;let i;if(e>3){let s=0,l=0;for(const o of this.possibleCenters){const f=o.getEstimatedModuleSize();s+=f,l+=f*f}i=s/e;let u=Math.sqrt(l/e-i*i);t.sort((o,f)=>{const d=Math.abs(f.getEstimatedModuleSize()-i),x=Math.abs(o.getEstimatedModuleSize()-i);return d<x?-1:d>x?1:0});const r=Math.max(.2*i,u);for(let o=0;o<t.length&&t.length>3;o++){const f=t[o];Math.abs(f.getEstimatedModuleSize()-i)>r&&(t.splice(o,1),o--)}}if(t.length>3){let s=0;for(const l of t)s+=l.getEstimatedModuleSize();i=s/t.length,t.sort((l,u)=>{if(u.getCount()===l.getCount()){const r=Math.abs(u.getEstimatedModuleSize()-i),o=Math.abs(l.getEstimatedModuleSize()-i);return r<o?1:r>o?-1:0}else return u.getCount()-l.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}an.CENTER_QUORUM=2,an.MIN_SKIP=3,an.MAX_MODULES=57;class Yt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ve.NEED_RESULT_POINT_CALLBACK);const i=new an(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const t=e.getTopLeft(),i=e.getTopRight(),s=e.getBottomLeft(),l=this.calculateModuleSize(t,i,s);if(l<1)throw new Z("No pattern found in proccess finder.");const u=Yt.computeDimension(t,i,s,l),r=Ve.getProvisionalVersionForDimension(u),o=r.getDimensionForVersion()-7;let f=null;if(r.getAlignmentPatternCenters().length>0){const y=i.getX()-t.getX()+s.getX(),C=i.getY()-t.getY()+s.getY(),I=1-3/o,T=Math.floor(t.getX()+I*(y-t.getX())),O=Math.floor(t.getY()+I*(C-t.getY()));for(let R=4;R<=16;R<<=1)try{f=this.findAlignmentInRegion(l,T,O,R);break}catch(P){if(!(P instanceof Z))throw P}}const d=Yt.createTransform(t,i,s,f,u),x=Yt.sampleGrid(this.image,d,u);let m;return f===null?m=[s,t,i]:m=[s,t,i,f],new He(x,m)}static createTransform(e,t,i,s,l){const u=l-3.5;let r,o,f,d;return s!==null?(r=s.getX(),o=s.getY(),f=u-3,d=f):(r=t.getX()-e.getX()+i.getX(),o=t.getY()-e.getY()+i.getY(),f=u,d=u),ze.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,f,d,3.5,u,e.getX(),e.getY(),t.getX(),t.getY(),r,o,i.getX(),i.getY())}static sampleGrid(e,t,i){return it.getInstance().sampleGridWithTransform(e,i,i,t)}static computeDimension(e,t,i,s){const l=le.round(j.distance(e,t)/s),u=le.round(j.distance(e,i)/s);let r=Math.floor((l+u)/2)+7;switch(r&3){case 0:r++;break;case 2:r--;break;case 3:throw new Z("Dimensions could be not found.")}return r}calculateModuleSize(e,t,i){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,t){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?s/7:isNaN(s)?i/7:(i+s)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,i,s){let l=this.sizeOfBlackWhiteBlackRun(e,t,i,s),u=1,r=e-(i-e);r<0?(u=e/(e-r),r=0):r>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(r-e),r=this.image.getWidth()-1);let o=Math.floor(t-(s-t)*u);return u=1,o<0?(u=t/(t-o),o=0):o>=this.image.getHeight()&&(u=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),r=Math.floor(e+(r-e)*u),l+=this.sizeOfBlackWhiteBlackRun(e,t,r,o),l-1}sizeOfBlackWhiteBlackRun(e,t,i,s){const l=Math.abs(s-t)>Math.abs(i-e);if(l){let y=e;e=t,t=y,y=i,i=s,s=y}const u=Math.abs(i-e),r=Math.abs(s-t);let o=-u/2;const f=e<i?1:-1,d=t<s?1:-1;let x=0;const m=i+f;for(let y=e,C=t;y!==m;y+=f){const I=l?C:y,T=l?y:C;if(x===1===this.image.get(I,T)){if(x===2)return le.distance(y,C,e,t);x++}if(o+=r,o>0){if(C===s)break;C+=d,o-=u}}return x===2?le.distance(i+f,s,e,t):NaN}findAlignmentInRegion(e,t,i,s){const l=Math.floor(s*e),u=Math.max(0,t-l),r=Math.min(this.image.getWidth()-1,t+l);if(r-u<e*3)throw new Z("Alignment top exceeds estimated module size.");const o=Math.max(0,i-l),f=Math.min(this.image.getHeight()-1,i+l);if(f-o<e*3)throw new Z("Alignment bottom exceeds estimated module size.");return new Kr(this.image,u,o,r-u,f-o,e,this.resultPointCallback).find()}}class dn{constructor(){this.decoder=new Pn}getDecoder(){return this.decoder}decode(e,t){let i,s;if(t!=null&&t.get(ve.PURE_BARCODE)!==void 0){const o=dn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(o,t),s=dn.NO_POINTS}else{const o=new Yt(e.getBlackMatrix()).detect(t);i=this.decoder.decodeBitMatrix(o.getBits(),t),s=o.getPoints()}i.getOther()instanceof po&&i.getOther().applyMirroredCorrection(s);const l=new Vt(i.getText(),i.getRawBytes(),void 0,s,Me.QR_CODE,void 0),u=i.getByteSegments();u!==null&&l.putMetadata(Ce.BYTE_SEGMENTS,u);const r=i.getECLevel();return r!==null&&l.putMetadata(Ce.ERROR_CORRECTION_LEVEL,r),i.hasStructuredAppend()&&(l.putMetadata(Ce.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),l.putMetadata(Ce.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),l}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t===null||i===null)throw new Z;const s=this.moduleSize(t,e);let l=t[1],u=i[1],r=t[0],o=i[0];if(r>=o||l>=u)throw new Z;if(u-l!==o-r&&(o=r+(u-l),o>=e.getWidth()))throw new Z;const f=Math.round((o-r+1)/s),d=Math.round((u-l+1)/s);if(f<=0||d<=0)throw new Z;if(d!==f)throw new Z;const x=Math.floor(s/2);l+=x,r+=x;const m=r+Math.floor((f-1)*s)-o;if(m>0){if(m>x)throw new Z;r-=m}const y=l+Math.floor((d-1)*s)-u;if(y>0){if(y>x)throw new Z;l-=y}const C=new Je(f,d);for(let I=0;I<d;I++){const T=l+Math.floor(I*s);for(let O=0;O<f;O++)e.get(r+Math.floor(O*s),T)&&C.set(O,I)}return C}static moduleSize(e,t){const i=t.getHeight(),s=t.getWidth();let l=e[0],u=e[1],r=!0,o=0;for(;l<s&&u<i;){if(r!==t.get(l,u)){if(++o===5)break;r=!r}l++,u++}if(l===s||u===i)throw new Z;return(l-e[0])/7}}dn.NO_POINTS=new Array;class Ke{PDF417Common(){}static getBitCountSum(e){return le.sum(e)}static toIntArray(e){if(e==null||!e.length)return Ke.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let i=0;for(const s of e)t[i++]=s;return t}static getCodeword(e){const t=fe.binarySearch(Ke.SYMBOL_TABLE,e&262143);return t<0?-1:(Ke.CODEWORD_TABLE[t]-1)%Ke.NUMBER_OF_CODEWORDS}}Ke.NUMBER_OF_CODEWORDS=929,Ke.MAX_CODEWORDS_IN_BARCODE=Ke.NUMBER_OF_CODEWORDS-1,Ke.MIN_ROWS_IN_BARCODE=3,Ke.MAX_ROWS_IN_BARCODE=90,Ke.MODULES_IN_CODEWORD=17,Ke.MODULES_IN_STOP_PATTERN=18,Ke.BARS_IN_MODULE=8,Ke.EMPTY_INT_ARRAY=new Int32Array([]),Ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class _i{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class tt{static detectMultiple(e,t,i){let s=e.getBlackMatrix(),l=tt.detect(i,s);return l.length||(s=s.clone(),s.rotate180(),l=tt.detect(i,s)),new _i(s,l)}static detect(e,t){const i=new Array;let s=0,l=0,u=!1;for(;s<t.getHeight();){const r=tt.findVertices(t,s,l);if(r[0]==null&&r[3]==null){if(!u)break;u=!1,l=0;for(const o of i)o[1]!=null&&(s=Math.trunc(Math.max(s,o[1].getY()))),o[3]!=null&&(s=Math.max(s,Math.trunc(o[3].getY())));s+=tt.ROW_STEP;continue}if(u=!0,i.push(r),!e)break;r[2]!=null?(l=Math.trunc(r[2].getX()),s=Math.trunc(r[2].getY())):(l=Math.trunc(r[4].getX()),s=Math.trunc(r[4].getY()))}return i}static findVertices(e,t,i){const s=e.getHeight(),l=e.getWidth(),u=new Array(8);return tt.copyToResult(u,tt.findRowsWithPattern(e,s,l,t,i,tt.START_PATTERN),tt.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),t=Math.trunc(u[4].getY())),tt.copyToResult(u,tt.findRowsWithPattern(e,s,l,t,i,tt.STOP_PATTERN),tt.INDEXES_STOP_PATTERN),u}static copyToResult(e,t,i){for(let s=0;s<i.length;s++)e[i[s]]=t[s]}static findRowsWithPattern(e,t,i,s,l,u){const r=new Array(4);let o=!1;const f=new Int32Array(u.length);for(;s<t;s+=tt.ROW_STEP){let x=tt.findGuardPattern(e,l,s,i,!1,u,f);if(x!=null){for(;s>0;){const m=tt.findGuardPattern(e,l,--s,i,!1,u,f);if(m!=null)x=m;else{s++;break}}r[0]=new j(x[0],s),r[1]=new j(x[1],s),o=!0;break}}let d=s+1;if(o){let x=0,m=Int32Array.from([Math.trunc(r[0].getX()),Math.trunc(r[1].getX())]);for(;d<t;d++){const y=tt.findGuardPattern(e,m[0],d,i,!1,u,f);if(y!=null&&Math.abs(m[0]-y[0])<tt.MAX_PATTERN_DRIFT&&Math.abs(m[1]-y[1])<tt.MAX_PATTERN_DRIFT)m=y,x=0;else{if(x>tt.SKIPPED_ROW_COUNT_MAX)break;x++}}d-=x+1,r[2]=new j(m[0],d),r[3]=new j(m[1],d)}return d-s<tt.BARCODE_MIN_HEIGHT&&fe.fill(r,null),r}static findGuardPattern(e,t,i,s,l,u,r){fe.fillWithin(r,0,r.length,0);let o=t,f=0;for(;e.get(o,i)&&o>0&&f++<tt.MAX_PIXEL_DRIFT;)o--;let d=o,x=0,m=u.length;for(let y=l;d<s;d++)if(e.get(d,i)!==y)r[x]++;else{if(x===m-1){if(tt.patternMatchVariance(r,u,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return new Int32Array([o,d]);o+=r[0]+r[1],ee.arraycopy(r,2,r,0,x-1),r[x-1]=0,r[x]=0,x--}else x++;r[x]=1,y=!y}return x===m-1&&tt.patternMatchVariance(r,u,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE?new Int32Array([o,d-1]):null}static patternMatchVariance(e,t,i){let s=e.length,l=0,u=0;for(let f=0;f<s;f++)l+=e[f],u+=t[f];if(l<u)return 1/0;let r=l/u;i*=r;let o=0;for(let f=0;f<s;f++){let d=e[f],x=t[f]*r,m=d>x?d-x:x-d;if(m>i)return 1/0;o+=m}return o/l}}tt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tt.MAX_AVG_VARIANCE=.42,tt.MAX_INDIVIDUAL_VARIANCE=.8,tt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tt.MAX_PIXEL_DRIFT=3,tt.MAX_PATTERN_DRIFT=5,tt.SKIPPED_ROW_COUNT_MAX=25,tt.ROW_STEP=5,tt.BARCODE_MIN_HEIGHT=10;class Lt{constructor(e,t){if(t.length===0)throw new S;this.field=e;let i=t.length;if(i>1&&t[0]===0){let s=1;for(;s<i&&t[s]===0;)s++;s===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-s),ee.arraycopy(t,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let s=0;for(let l of this.coefficients)s=this.field.add(s,l);return s}let t=this.coefficients[0],i=this.coefficients.length;for(let s=1;s<i;s++)t=this.field.add(this.field.multiply(e,t),this.coefficients[s]);return t}add(e){if(!this.field.equals(e.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,i=e.coefficients;if(t.length>i.length){let u=t;t=i,i=u}let s=new Int32Array(i.length),l=i.length-t.length;ee.arraycopy(i,0,s,0,l);for(let u=l;u<i.length;u++)s[u]=this.field.add(t[u-l],i[u]);return new Lt(this.field,s)}subtract(e){if(!this.field.equals(e.field))throw new S("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Lt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Lt(this.field,new Int32Array([0]));let t=this.coefficients,i=t.length,s=e.coefficients,l=s.length,u=new Int32Array(i+l-1);for(let r=0;r<i;r++){let o=t[r];for(let f=0;f<l;f++)u[r+f]=this.field.add(u[r+f],this.field.multiply(o,s[f]))}return new Lt(this.field,u)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=this.field.subtract(0,this.coefficients[i]);return new Lt(this.field,t)}multiplyScalar(e){if(e===0)return new Lt(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new Lt(this.field,i)}multiplyByMonomial(e,t){if(e<0)throw new S;if(t===0)return new Lt(this.field,new Int32Array([0]));let i=this.coefficients.length,s=new Int32Array(i+e);for(let l=0;l<i;l++)s[l]=this.field.multiply(this.coefficients[l],t);return new Lt(this.field,s)}toString(){let e=new Oe;for(let t=this.getDegree();t>=0;t--){let i=this.getCoefficient(t);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(t===0||i!==1)&&e.append(i),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class ya{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new S;return this.logTable[e]}inverse(e){if(e===0)throw new M;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class jn extends ya{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let s=0;s<e;s++)this.expTable[s]=i,i=i*t%e;for(let s=0;s<e-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new Lt(this,new Int32Array([0])),this.one=new Lt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new S;if(t===0)return this.zero;let i=new Int32Array(e+1);return i[0]=t,new Lt(this,i)}}jn.PDF417_GF=new jn(Ke.NUMBER_OF_CODEWORDS,3);class es{constructor(){this.field=jn.PDF417_GF}decode(e,t,i){let s=new Lt(this.field,e),l=new Int32Array(t),u=!1;for(let C=t;C>0;C--){let I=s.evaluateAt(this.field.exp(C));l[t-C]=I,I!==0&&(u=!0)}if(!u)return 0;let r=this.field.getOne();if(i!=null)for(const C of i){let I=this.field.exp(e.length-1-C),T=new Lt(this.field,new Int32Array([this.field.subtract(0,I),1]));r=r.multiply(T)}let o=new Lt(this.field,l),f=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),d=f[0],x=f[1],m=this.findErrorLocations(d),y=this.findErrorMagnitudes(x,d,m);for(let C=0;C<m.length;C++){let I=e.length-1-this.field.log(m[C]);if(I<0)throw U.getChecksumInstance();e[I]=this.field.subtract(e[I],y[C])}return m.length}runEuclideanAlgorithm(e,t,i){if(e.getDegree()<t.getDegree()){let m=e;e=t,t=m}let s=e,l=t,u=this.field.getZero(),r=this.field.getOne();for(;l.getDegree()>=Math.round(i/2);){let m=s,y=u;if(s=l,u=r,s.isZero())throw U.getChecksumInstance();l=m;let C=this.field.getZero(),I=s.getCoefficient(s.getDegree()),T=this.field.inverse(I);for(;l.getDegree()>=s.getDegree()&&!l.isZero();){let O=l.getDegree()-s.getDegree(),R=this.field.multiply(l.getCoefficient(l.getDegree()),T);C=C.add(this.field.buildMonomial(O,R)),l=l.subtract(s.multiplyByMonomial(O,R))}r=C.multiply(u).subtract(y).negative()}let o=r.getCoefficient(0);if(o===0)throw U.getChecksumInstance();let f=this.field.inverse(o),d=r.multiply(f),x=l.multiply(f);return[d,x]}findErrorLocations(e){let t=e.getDegree(),i=new Int32Array(t),s=0;for(let l=1;l<this.field.getSize()&&s<t;l++)e.evaluateAt(l)===0&&(i[s]=this.field.inverse(l),s++);if(s!==t)throw U.getChecksumInstance();return i}findErrorMagnitudes(e,t,i){let s=t.getDegree(),l=new Int32Array(s);for(let f=1;f<=s;f++)l[s-f]=this.field.multiply(f,t.getCoefficient(f));let u=new Lt(this.field,l),r=i.length,o=new Int32Array(r);for(let f=0;f<r;f++){let d=this.field.inverse(i[f]),x=this.field.subtract(0,e.evaluateAt(d)),m=this.field.inverse(u.evaluateAt(d));o[f]=this.field.multiply(x,m)}return o}}class Nr{constructor(e,t,i,s,l){e instanceof Nr?this.constructor_2(e):this.constructor_1(e,t,i,s,l)}constructor_1(e,t,i,s,l){const u=t==null||i==null,r=s==null||l==null;if(u&&r)throw new Z;u?(t=new j(0,s.getY()),i=new j(0,l.getY())):r&&(s=new j(e.getWidth()-1,t.getY()),l=new j(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=t,this.bottomLeft=i,this.topRight=s,this.bottomRight=l,this.minX=Math.trunc(Math.min(t.getX(),i.getX())),this.maxX=Math.trunc(Math.max(s.getX(),l.getX())),this.minY=Math.trunc(Math.min(t.getY(),s.getY())),this.maxY=Math.trunc(Math.max(i.getY(),l.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Nr(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,i){let s=this.topLeft,l=this.bottomLeft,u=this.topRight,r=this.bottomRight;if(e>0){let o=i?this.topLeft:this.topRight,f=Math.trunc(o.getY()-e);f<0&&(f=0);let d=new j(o.getX(),f);i?s=d:u=d}if(t>0){let o=i?this.bottomLeft:this.bottomRight,f=Math.trunc(o.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);let d=new j(o.getX(),f);i?l=d:r=d}return new Nr(this.image,s,l,u,r)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Os{constructor(e,t,i,s){this.columnCount=e,this.errorCorrectionLevel=s,this.rowCountUpperPart=t,this.rowCountLowerPart=i,this.rowCount=t+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class mr{constructor(){this.buffer=""}static form(e,t){let i=-1;function s(u,r,o,f,d,x){if(u==="%%")return"%";if(t[++i]===void 0)return;u=f?parseInt(f.substr(1)):void 0;let m=d?parseInt(d.substr(1)):void 0,y;switch(x){case"s":y=t[i];break;case"c":y=t[i][0];break;case"f":y=parseFloat(t[i]).toFixed(u);break;case"p":y=parseFloat(t[i]).toPrecision(u);break;case"e":y=parseFloat(t[i]).toExponential(u);break;case"x":y=parseInt(t[i]).toString(m||16);break;case"d":y=parseFloat(parseInt(t[i],m||10).toPrecision(u)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);let C=parseInt(o),I=o&&o[0]+""=="0"?"0":" ";for(;y.length<C;)y=r!==void 0?y+I:I+y;return y}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,s)}format(e,...t){this.buffer+=mr.form(e,t)}toString(){return this.buffer}}class Xr{constructor(e){this.boundingBox=new Nr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let i=1;i<Xr.MAX_NEARBY_DISTANCE;i++){let s=this.imageRowToCodewordIndex(e)-i;if(s>=0&&(t=this.codewords[s],t!=null)||(s=this.imageRowToCodewordIndex(e)+i,s<this.codewords.length&&(t=this.codewords[s],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new mr;let t=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,i.getRowNumber(),i.getValue())}return e.toString()}}Xr.MAX_NEARBY_DISTANCE=5;class ui{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[i,s]of this.values.entries()){const l={getKey:()=>i,getValue:()=>s};l.getValue()>e?(e=l.getValue(),t=[],t.push(l.getKey())):l.getValue()===e&&t.push(l.getKey())}return Ke.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class mo extends Xr{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),r=this.imageRowToCodewordIndex(Math.trunc(l.getY())),o=-1,f=1,d=0;for(let x=u;x<r;x++){if(t[x]==null)continue;let m=t[x],y=m.getRowNumber()-o;if(y===0)d++;else if(y===1)f=Math.max(f,d),d=1,o=m.getRowNumber();else if(y<0||m.getRowNumber()>=e.getRowCount()||y>x)t[x]=null;else{let C;f>2?C=(f-2)*y:C=y;let I=C>=x;for(let T=1;T<=C&&!I;T++)I=t[x-T]!=null;I?t[x]=null:(o=m.getRowNumber(),d=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=t.length)continue;t[s]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),i=this._isLeft?t.getTopLeft():t.getTopRight(),s=this._isLeft?t.getBottomLeft():t.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),r=this.getCodewords(),o=-1;for(let f=l;f<u;f++){if(r[f]==null)continue;let d=r[f];d.setRowNumberAsRowIndicatorColumn();let x=d.getRowNumber()-o;x===0||(x===1?o=d.getRowNumber():d.getRowNumber()>=e.getRowCount()?r[f]=null:o=d.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new ui,i=new ui,s=new ui,l=new ui;for(let r of e){if(r==null)continue;r.setRowNumberAsRowIndicatorColumn();let o=r.getValue()%30,f=r.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:i.setValue(o*3+1);break;case 1:l.setValue(o/3),s.setValue(o%3);break;case 2:t.setValue(o+1);break}}if(t.getValue().length===0||i.getValue().length===0||s.getValue().length===0||l.getValue().length===0||t.getValue()[0]<1||i.getValue()[0]+s.getValue()[0]<Ke.MIN_ROWS_IN_BARCODE||i.getValue()[0]+s.getValue()[0]>Ke.MAX_ROWS_IN_BARCODE)return null;let u=new Os(t.getValue()[0],i.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,t){for(let i=0;i<e.length;i++){let s=e[i];if(e[i]==null)continue;let l=s.getValue()%30,u=s.getRowNumber();if(u>t.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:l*3+1!==t.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(l/3)!==t.getErrorCorrectionLevel()||l%3!==t.getRowCountLowerPart())&&(e[i]=null);break;case 2:l+1!==t.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class wr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Ke.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let i=this.detectionResultColumns[t].getCodewords();for(let s=0;s<i.length;s++)i[s]!=null&&(i[s].hasValidRowNumber()||this.adjustRowNumbers(t,s,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&t[i]!=null&&e[i].getRowNumber()===t[i].getRowNumber())for(let s=1;s<=this.barcodeColumnCount;s++){let l=this.detectionResultColumns[s].getCodewords()[i];l!=null&&(l.setRowNumber(e[i].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[s].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<t.length;i++){if(t[i]==null)continue;let s=t[i].getRowNumber(),l=0;for(let u=this.barcodeColumnCount+1;u>0&&l<this.ADJUST_ROW_NUMBER_SKIP;u--){let r=this.detectionResultColumns[u].getCodewords()[i];r!=null&&(l=wr.adjustRowNumberIfValid(s,l,r),r.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let i=0;i<t.length;i++){if(t[i]==null)continue;let s=t[i].getRowNumber(),l=0;for(let u=1;u<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;u++){let r=this.detectionResultColumns[u].getCodewords()[i];r!=null&&(l=wr.adjustRowNumberIfValid(s,l,r),r.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,i){if(!this.detectionResultColumns[e-1])return;let s=i[t],l=this.detectionResultColumns[e-1].getCodewords(),u=l;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let r=new Array(14);r[2]=l[t],r[3]=u[t],t>0&&(r[0]=i[t-1],r[4]=l[t-1],r[5]=u[t-1]),t>1&&(r[8]=i[t-2],r[10]=l[t-2],r[11]=u[t-2]),t<i.length-1&&(r[1]=i[t+1],r[6]=l[t+1],r[7]=u[t+1]),t<i.length-2&&(r[9]=i[t+2],r[12]=l[t+2],r[13]=u[t+2]);for(let o of r)if(wr.adjustRowNumber(s,o))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new mr;for(let i=0;i<e.getCodewords().length;i++){t.format("CW %3d:",i);for(let s=0;s<this.barcodeColumnCount+2;s++){if(this.detectionResultColumns[s]==null){t.format("    |   ");continue}let l=this.detectionResultColumns[s].getCodewords()[i];if(l==null){t.format("    |   ");continue}t.format(" %3d|%3d",l.getRowNumber(),l.getValue())}t.format("%n")}return t.toString()}}class Ii{constructor(e,t,i,s){this.rowNumber=Ii.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(i),this.value=Math.trunc(s)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ii.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ii.BARCODE_ROW_UNKNOWN=-1;class In{static initialize(){for(let e=0;e<Ke.SYMBOL_TABLE.length;e++){let t=Ke.SYMBOL_TABLE[e],i=t&1;for(let s=0;s<Ke.BARS_IN_MODULE;s++){let l=0;for(;(t&1)===i;)l+=1,t>>=1;i=t&1,In.RATIOS_TABLE[e]||(In.RATIOS_TABLE[e]=new Array(Ke.BARS_IN_MODULE)),In.RATIOS_TABLE[e][Ke.BARS_IN_MODULE-s-1]=Math.fround(l/Ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=In.getDecodedCodewordValue(In.sampleBitCounts(e));return t!==-1?t:In.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=le.sum(e),i=new Int32Array(Ke.BARS_IN_MODULE),s=0,l=0;for(let u=0;u<Ke.MODULES_IN_CODEWORD;u++){let r=t/(2*Ke.MODULES_IN_CODEWORD)+u*t/Ke.MODULES_IN_CODEWORD;l+e[s]<=r&&(l+=e[s],s++),i[s]++}return i}static getDecodedCodewordValue(e){let t=In.getBitValue(e);return Ke.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let i=0;i<e.length;i++)for(let s=0;s<e[i];s++)t=t<<1|(i%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=le.sum(e),i=new Array(Ke.BARS_IN_MODULE);if(t>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/t);let s=we.MAX_VALUE,l=-1;this.bSymbolTableReady||In.initialize();for(let u=0;u<In.RATIOS_TABLE.length;u++){let r=0,o=In.RATIOS_TABLE[u];for(let f=0;f<Ke.BARS_IN_MODULE;f++){let d=Math.fround(o[f]-i[f]);if(r+=Math.fround(d*d),r>=s)break}r<s&&(s=r,l=Ke.SYMBOL_TABLE[u])}return l}}In.bSymbolTableReady=!1,In.RATIOS_TABLE=new Array(Ke.SYMBOL_TABLE.length).map(v=>new Array(Ke.BARS_IN_MODULE));class Si{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ti{static parseLong(e,t=void 0){return parseInt(e,t)}}class ts extends b{}ts.kind="NullPointerException";class ba{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,i){if(e==null)throw new ts;if(t<0||t>e.length||i<0||t+i>e.length||t+i<0)throw new me;if(i===0)return;for(let s=0;s<i;s++)this.write(e[t+s])}flush(){}close(){}}class Aa extends b{}class Ea extends ba{constructor(e=32){if(super(),this.count=0,e<0)throw new S("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new Aa;i=ae.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,i){if(t<0||t>e.length||i<0||t+i-e.length>0)throw new me;this.ensureCapacity(this.count+i),ee.arraycopy(e,t,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ct;(function(v){v[v.ALPHA=0]="ALPHA",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.PUNCT=3]="PUNCT",v[v.ALPHA_SHIFT=4]="ALPHA_SHIFT",v[v.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ct||(Ct={}));function ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Vi<"u")return Vi.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Oi;function Jn(v){if(typeof Oi>"u"&&(Oi=ns()),Oi===null)throw new Error("BigInt is not supported!");return Oi(v)}function rs(){let v=[];v[0]=Jn(1);let e=Jn(900);v[1]=e;for(let t=2;t<16;t++)v[t]=v[t-1]*e;return v}class q{static decode(e,t){let i=new Oe(""),s=V.ISO8859_1;i.enableDecoding(s);let l=1,u=e[l++],r=new Si;for(;l<e[0];){switch(u){case q.TEXT_COMPACTION_MODE_LATCH:l=q.textCompaction(e,l,i);break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:l=q.byteCompaction(u,e,s,l,i);break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l++]);break;case q.NUMERIC_COMPACTION_MODE_LATCH:l=q.numericCompaction(e,l,i);break;case q.ECI_CHARSET:V.getCharacterSetECIByValue(e[l++]);break;case q.ECI_GENERAL_PURPOSE:l+=2;break;case q.ECI_USER_DEFINED:l++;break;case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=q.decodeMacroBlock(e,l,r);break;case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:throw new K;default:l--,l=q.textCompaction(e,l,i);break}if(l<e.length)u=e[l++];else throw K.getFormatInstance()}if(i.length()===0)throw K.getFormatInstance();let o=new ne(null,i.toString(),null,t);return o.setOther(r),o}static decodeMacroBlock(e,t,i){if(t+q.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw K.getFormatInstance();let s=new Int32Array(q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let r=0;r<q.NUMBER_OF_SEQUENCE_CODEWORDS;r++,t++)s[r]=e[t];i.setSegmentIndex(ae.parseInt(q.decodeBase900toBase10(s,q.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new Oe;t=q.textCompaction(e,t,l),i.setFileId(l.toString());let u=-1;for(e[t]===q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=t+1);t<e[0];)switch(e[t]){case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new Oe;t=q.textCompaction(e,t+1,r),i.setFileName(r.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let o=new Oe;t=q.textCompaction(e,t+1,o),i.setSender(o.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let f=new Oe;t=q.textCompaction(e,t+1,f),i.setAddressee(f.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let d=new Oe;t=q.numericCompaction(e,t+1,d),i.setSegmentCount(ae.parseInt(d.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let x=new Oe;t=q.numericCompaction(e,t+1,x),i.setTimestamp(Ti.parseLong(x.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let m=new Oe;t=q.numericCompaction(e,t+1,m),i.setChecksum(ae.parseInt(m.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let y=new Oe;t=q.numericCompaction(e,t+1,y),i.setFileSize(Ti.parseLong(y.toString()));break;default:throw K.getFormatInstance()}break;case q.MACRO_PDF417_TERMINATOR:t++,i.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(u!==-1){let r=t-u;i.isLastSegment()&&r--,i.setOptionalData(fe.copyOfRange(e,u,u+r))}return t}static textCompaction(e,t,i){let s=new Int32Array((e[0]-t)*2),l=new Int32Array((e[0]-t)*2),u=0,r=!1;for(;t<e[0]&&!r;){let o=e[t++];if(o<q.TEXT_COMPACTION_MODE_LATCH)s[u]=o/30,s[u+1]=o%30,u+=2;else switch(o){case q.TEXT_COMPACTION_MODE_LATCH:s[u++]=q.TEXT_COMPACTION_MODE_LATCH;break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:t--,r=!0;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s[u]=q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,o=e[t++],l[u]=o,u++;break}}return q.decodeTextCompaction(s,l,u,i),t}static decodeTextCompaction(e,t,i,s){let l=Ct.ALPHA,u=Ct.ALPHA,r=0;for(;r<i;){let o=e[r],f="";switch(l){case Ct.ALPHA:if(o<26)f=String.fromCharCode(65+o);else switch(o){case 26:f=" ";break;case q.LL:l=Ct.LOWER;break;case q.ML:l=Ct.MIXED;break;case q.PS:u=l,l=Ct.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[r]);break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break;case Ct.LOWER:if(o<26)f=String.fromCharCode(97+o);else switch(o){case 26:f=" ";break;case q.AS:u=l,l=Ct.ALPHA_SHIFT;break;case q.ML:l=Ct.MIXED;break;case q.PS:u=l,l=Ct.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[r]);break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break;case Ct.MIXED:if(o<q.PL)f=q.MIXED_CHARS[o];else switch(o){case q.PL:l=Ct.PUNCT;break;case 26:f=" ";break;case q.LL:l=Ct.LOWER;break;case q.AL:l=Ct.ALPHA;break;case q.PS:u=l,l=Ct.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[r]);break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break;case Ct.PUNCT:if(o<q.PAL)f=q.PUNCT_CHARS[o];else switch(o){case q.PAL:l=Ct.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[r]);break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(l=u,o<26)f=String.fromCharCode(65+o);else switch(o){case 26:f=" ";break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(l=u,o<q.PAL)f=q.PUNCT_CHARS[o];else switch(o){case q.PAL:l=Ct.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[r]);break;case q.TEXT_COMPACTION_MODE_LATCH:l=Ct.ALPHA;break}break}f!==""&&s.append(f),r++}}static byteCompaction(e,t,i,s,l){let u=new Ea,r=0,o=0,f=!1;switch(e){case q.BYTE_COMPACTION_MODE_LATCH:let d=new Int32Array(6),x=t[s++];for(;s<t[0]&&!f;)switch(d[r++]=x,o=900*o+x,x=t[s++],x){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,f=!0;break;default:if(r%5===0&&r>0){for(let m=0;m<6;++m)u.write(Number(Jn(o)>>Jn(8*(5-m))));o=0,r=0}break}s===t[0]&&x<q.TEXT_COMPACTION_MODE_LATCH&&(d[r++]=x);for(let m=0;m<r;m++)u.write(d[m]);break;case q.BYTE_COMPACTION_MODE_LATCH_6:for(;s<t[0]&&!f;){let m=t[s++];if(m<q.TEXT_COMPACTION_MODE_LATCH)r++,o=900*o+m;else switch(m){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,f=!0;break}if(r%5===0&&r>0){for(let y=0;y<6;++y)u.write(Number(Jn(o)>>Jn(8*(5-y))));o=0,r=0}}break}return l.append(Ne.decode(u.toByteArray(),i)),s}static numericCompaction(e,t,i){let s=0,l=!1,u=new Int32Array(q.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!l;){let r=e[t++];if(t===e[0]&&(l=!0),r<q.TEXT_COMPACTION_MODE_LATCH)u[s]=r,s++;else switch(r){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:t--,l=!0;break}(s%q.MAX_NUMERIC_CODEWORDS===0||r===q.NUMERIC_COMPACTION_MODE_LATCH||l)&&s>0&&(i.append(q.decodeBase900toBase10(u,s)),s=0)}return t}static decodeBase900toBase10(e,t){let i=Jn(0);for(let l=0;l<t;l++)i+=q.EXP900[t-l-1]*Jn(e[l]);let s=i.toString();if(s.charAt(0)!=="1")throw new K;return s.substring(1)}}q.TEXT_COMPACTION_MODE_LATCH=900,q.BYTE_COMPACTION_MODE_LATCH=901,q.NUMERIC_COMPACTION_MODE_LATCH=902,q.BYTE_COMPACTION_MODE_LATCH_6=924,q.ECI_USER_DEFINED=925,q.ECI_GENERAL_PURPOSE=926,q.ECI_CHARSET=927,q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,q.MACRO_PDF417_TERMINATOR=922,q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,q.MAX_NUMERIC_CODEWORDS=15,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,q.PL=25,q.LL=27,q.AS=27,q.ML=28,q.AL=28,q.PS=29,q.PAL=29,q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",q.EXP900=ns()?rs():[],q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ot{constructor(){}static decode(e,t,i,s,l,u,r){let o=new Nr(e,t,i,s,l),f=null,d=null,x;for(let C=!0;;C=!1){if(t!=null&&(f=ot.getRowIndicatorColumn(e,o,t,!0,u,r)),s!=null&&(d=ot.getRowIndicatorColumn(e,o,s,!1,u,r)),x=ot.merge(f,d),x==null)throw Z.getNotFoundInstance();let I=x.getBoundingBox();if(C&&I!=null&&(I.getMinY()<o.getMinY()||I.getMaxY()>o.getMaxY()))o=I;else break}x.setBoundingBox(o);let m=x.getBarcodeColumnCount()+1;x.setDetectionResultColumn(0,f),x.setDetectionResultColumn(m,d);let y=f!=null;for(let C=1;C<=m;C++){let I=y?C:m-C;if(x.getDetectionResultColumn(I)!==void 0)continue;let T;I===0||I===m?T=new mo(o,I===0):T=new Xr(o),x.setDetectionResultColumn(I,T);let O=-1,R=O;for(let P=o.getMinY();P<=o.getMaxY();P++){if(O=ot.getStartColumn(x,I,P,y),O<0||O>o.getMaxX()){if(R===-1)continue;O=R}let N=ot.detectCodeword(e,o.getMinX(),o.getMaxX(),y,O,P,u,r);N!=null&&(T.setCodeword(P,N),R=O,u=Math.min(u,N.getWidth()),r=Math.max(r,N.getWidth()))}}return ot.createDecoderResult(x)}static merge(e,t){if(e==null&&t==null)return null;let i=ot.getBarcodeMetadata(e,t);if(i==null)return null;let s=Nr.merge(ot.adjustBoundingBox(e),ot.adjustBoundingBox(t));return new wr(i,s)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let i=ot.getMax(t),s=0;for(let r of t)if(s+=i-r,r>0)break;let l=e.getCodewords();for(let r=0;s>0&&l[r]==null;r++)s--;let u=0;for(let r=t.length-1;r>=0&&(u+=i-t[r],!(t[r]>0));r--);for(let r=l.length-1;u>0&&l[r]==null;r--)u--;return e.getBoundingBox().addMissingRows(s,u,e.isLeft())}static getMax(e){let t=-1;for(let i of e)t=Math.max(t,i);return t}static getBarcodeMetadata(e,t){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let s;return t==null||(s=t.getBarcodeMetadata())==null?i:i.getColumnCount()!==s.getColumnCount()&&i.getErrorCorrectionLevel()!==s.getErrorCorrectionLevel()&&i.getRowCount()!==s.getRowCount()?null:i}static getRowIndicatorColumn(e,t,i,s,l,u){let r=new mo(t,s);for(let o=0;o<2;o++){let f=o===0?1:-1,d=Math.trunc(Math.trunc(i.getX()));for(let x=Math.trunc(Math.trunc(i.getY()));x<=t.getMaxY()&&x>=t.getMinY();x+=f){let m=ot.detectCodeword(e,0,e.getWidth(),s,d,x,l,u);m!=null&&(r.setCodeword(x,m),s?d=m.getStartX():d=m.getEndX())}}return r}static adjustCodewordCount(e,t){let i=t[0][1],s=i.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ot.getNumberOfECCodeWords(e.getBarcodeECLevel());if(s.length===0){if(l<1||l>Ke.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();i.setValue(l)}else s[0]!==l&&i.setValue(l)}static createDecoderResult(e){let t=ot.createBarcodeMatrix(e);ot.adjustCodewordCount(e,t);let i=new Array,s=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],u=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let f=0;f<e.getBarcodeColumnCount();f++){let d=t[o][f+1].getValue(),x=o*e.getBarcodeColumnCount()+f;d.length===0?i.push(x):d.length===1?s[x]=d[0]:(u.push(x),l.push(d))}let r=new Array(l.length);for(let o=0;o<r.length;o++)r[o]=l[o];return ot.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),s,Ke.toIntArray(i),Ke.toIntArray(u),r)}static createDecoderResultFromAmbiguousValues(e,t,i,s,l){let u=new Int32Array(s.length),r=100;for(;r-- >0;){for(let o=0;o<u.length;o++)t[s[o]]=l[o][u[o]];try{return ot.decodeCodewords(t,e,i)}catch(o){if(!(o instanceof U))throw o}if(u.length===0)throw U.getChecksumInstance();for(let o=0;o<u.length;o++)if(u[o]<l[o].length-1){u[o]++;break}else if(u[o]=0,o===u.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let s=0;s<t.length;s++)for(let l=0;l<t[s].length;l++)t[s][l]=new ui;let i=0;for(let s of e.getDetectionResultColumns()){if(s!=null){for(let l of s.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=0){if(u>=t.length)continue;t[u][i].setValue(l.getValue())}}}i++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,i,s){let l=s?1:-1,u=null;if(ot.isValidBarcodeColumn(e,t-l)&&(u=e.getDetectionResultColumn(t-l).getCodeword(i)),u!=null)return s?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(i),u!=null)return s?u.getStartX():u.getEndX();if(ot.isValidBarcodeColumn(e,t-l)&&(u=e.getDetectionResultColumn(t-l).getCodewordNearby(i)),u!=null)return s?u.getEndX():u.getStartX();let r=0;for(;ot.isValidBarcodeColumn(e,t-l);){t-=l;for(let o of e.getDetectionResultColumn(t).getCodewords())if(o!=null)return(s?o.getEndX():o.getStartX())+l*r*(o.getEndX()-o.getStartX());r++}return s?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,i,s,l,u,r,o){l=ot.adjustCodewordStartColumn(e,t,i,s,l,u);let f=ot.getModuleBitCount(e,t,i,s,l,u);if(f==null)return null;let d,x=le.sum(f);if(s)d=l+x;else{for(let C=0;C<f.length/2;C++){let I=f[C];f[C]=f[f.length-1-C],f[f.length-1-C]=I}d=l,l=d-x}if(!ot.checkCodewordSkew(x,r,o))return null;let m=In.getDecodedValue(f),y=Ke.getCodeword(m);return y===-1?null:new Ii(l,d,ot.getCodewordBucketNumber(m),y)}static getModuleBitCount(e,t,i,s,l,u){let r=l,o=new Int32Array(8),f=0,d=s?1:-1,x=s;for(;(s?r<i:r>=t)&&f<o.length;)e.get(r,u)===x?(o[f]++,r+=d):(f++,x=!x);return f===o.length||r===(s?i:t)&&f===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,i,s,l,u){let r=l,o=s?-1:1;for(let f=0;f<2;f++){for(;(s?r>=t:r<i)&&s===e.get(r,u);){if(Math.abs(l-r)>ot.CODEWORD_SKEW_SIZE)return l;r+=o}o=-o,s=!s}return r}static checkCodewordSkew(e,t,i){return t-ot.CODEWORD_SKEW_SIZE<=e&&e<=i+ot.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,i){if(e.length===0)throw K.getFormatInstance();let s=1<<t+1,l=ot.correctErrors(e,i,s);ot.verifyCodewordCount(e,s);let u=q.decode(e,""+t);return u.setErrorsCorrected(l),u.setErasures(i.length),u}static correctErrors(e,t,i){if(t!=null&&t.length>i/2+ot.MAX_ERRORS||i<0||i>ot.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return ot.errorCorrection.decode(e,i,t)}static verifyCodewordCount(e,t){if(e.length<4)throw K.getFormatInstance();let i=e[0];if(i>e.length)throw K.getFormatInstance();if(i===0)if(t<e.length)e[0]=e.length-t;else throw K.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),i=0,s=t.length-1;for(;!((e&1)!==i&&(i=e&1,s--,s<0));)t[s]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ot.getCodewordBucketNumber(ot.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new mr;for(let i=0;i<e.length;i++){t.format("Row %2d: ",i);for(let s=0;s<e[i].length;s++){let l=e[i][s];l.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}t.format("%n")}return t.toString()}}ot.CODEWORD_SKEW_SIZE=2,ot.MAX_ERRORS=3,ot.MAX_EC_CODEWORDS=512,ot.errorCorrection=new es;class gn{decode(e,t=null){let i=gn.decode(e,t,!1);if(i==null||i.length===0||i[0]==null)throw Z.getNotFoundInstance();return i[0]}decodeMultiple(e,t=null){try{return gn.decode(e,t,!0)}catch(i){throw i instanceof K||i instanceof U?Z.getNotFoundInstance():i}}static decode(e,t,i){const s=new Array,l=tt.detectMultiple(e,t,i);for(const u of l.getPoints()){const r=ot.decode(l.getBits(),u[4],u[5],u[6],u[7],gn.getMinCodewordWidth(u),gn.getMaxCodewordWidth(u)),o=new Vt(r.getText(),r.getRawBytes(),void 0,u,Me.PDF_417);o.putMetadata(Ce.ERROR_CORRECTION_LEVEL,r.getECLevel());const f=r.getOther();f!=null&&o.putMetadata(Ce.PDF417_EXTRA_METADATA,f),s.push(o)}return s.map(u=>u)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?ae.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class yr extends b{}yr.kind="ReaderException";class is{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!h(e)&&e.get(ve.TRY_HARDER)===!0,i=h(e)?null:e.get(ve.POSSIBLE_FORMATS),s=new Array;if(!h(i)){const l=i.some(u=>u===Me.UPC_A||u===Me.UPC_E||u===Me.EAN_13||u===Me.EAN_8||u===Me.CODABAR||u===Me.CODE_39||u===Me.CODE_93||u===Me.CODE_128||u===Me.ITF||u===Me.RSS_14||u===Me.RSS_EXPANDED);l&&!t&&s.push(new Or(e,this.verbose)),i.includes(Me.QR_CODE)&&s.push(new dn),i.includes(Me.DATA_MATRIX)&&s.push(new xr),i.includes(Me.AZTEC)&&s.push(new ln),i.includes(Me.PDF_417)&&s.push(new gn),l&&t&&s.push(new Or(e,this.verbose))}s.length===0&&(t||s.push(new Or(e,this.verbose)),s.push(new dn),s.push(new xr),s.push(new ln),s.push(new gn),t&&s.push(new Or(e,this.verbose))),this.readers=s}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new yr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(i){if(i instanceof yr)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class Rs extends nn{constructor(e=null,t=500){const i=new is;i.setHints(e),super(i,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Ns extends nn{constructor(e=500){super(new gn,e)}}class Ds extends nn{constructor(e=500){super(new dn,e)}}var un;(function(v){v[v.ERROR_CORRECTION=0]="ERROR_CORRECTION",v[v.CHARACTER_SET=1]="CHARACTER_SET",v[v.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",v[v.MIN_SIZE=3]="MIN_SIZE",v[v.MAX_SIZE=4]="MAX_SIZE",v[v.MARGIN=5]="MARGIN",v[v.PDF417_COMPACT=6]="PDF417_COMPACT",v[v.PDF417_COMPACTION=7]="PDF417_COMPACTION",v[v.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",v[v.AZTEC_LAYERS=9]="AZTEC_LAYERS",v[v.QR_VERSION=10]="QR_VERSION"})(un||(un={}));var Gt=un;class zr{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let i=t[t.length-1];const s=this.field;for(let l=t.length;l<=e;l++){const u=i.multiply(new Xe(s,Int32Array.from([1,s.exp(l-1+s.getGeneratorBase())])));t.push(u),i=u}}return t[e]}encode(e,t){if(t===0)throw new S("No error correction bytes");const i=e.length-t;if(i<=0)throw new S("No data bytes provided");const s=this.buildGenerator(t),l=new Int32Array(i);ee.arraycopy(e,0,l,0,i);let u=new Xe(this.field,l);u=u.multiplyByMonomial(t,1);const o=u.divide(s)[1].getCoefficients(),f=t-o.length;for(let d=0;d<f;d++)e[i+d]=0;ee.arraycopy(o,0,e,i+f,o.length)}}class Wt{constructor(){}static applyMaskPenaltyRule1(e){return Wt.applyMaskPenaltyRule1Internal(e,!0)+Wt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const i=e.getArray(),s=e.getWidth(),l=e.getHeight();for(let u=0;u<l-1;u++){const r=i[u];for(let o=0;o<s-1;o++){const f=r[o];f===r[o+1]&&f===i[u+1][o]&&f===i[u+1][o+1]&&t++}}return Wt.N2*t}static applyMaskPenaltyRule3(e){let t=0;const i=e.getArray(),s=e.getWidth(),l=e.getHeight();for(let u=0;u<l;u++)for(let r=0;r<s;r++){const o=i[u];r+6<s&&o[r]===1&&o[r+1]===0&&o[r+2]===1&&o[r+3]===1&&o[r+4]===1&&o[r+5]===0&&o[r+6]===1&&(Wt.isWhiteHorizontal(o,r-4,r)||Wt.isWhiteHorizontal(o,r+7,r+11))&&t++,u+6<l&&i[u][r]===1&&i[u+1][r]===0&&i[u+2][r]===1&&i[u+3][r]===1&&i[u+4][r]===1&&i[u+5][r]===0&&i[u+6][r]===1&&(Wt.isWhiteVertical(i,r,u-4,u)||Wt.isWhiteVertical(i,r,u+7,u+11))&&t++}return t*Wt.N3}static isWhiteHorizontal(e,t,i){t=Math.max(t,0),i=Math.min(i,e.length);for(let s=t;s<i;s++)if(e[s]===1)return!1;return!0}static isWhiteVertical(e,t,i,s){i=Math.max(i,0),s=Math.min(s,e.length);for(let l=i;l<s;l++)if(e[l][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const i=e.getArray(),s=e.getWidth(),l=e.getHeight();for(let o=0;o<l;o++){const f=i[o];for(let d=0;d<s;d++)f[d]===1&&t++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-u)*10/u)*Wt.N4}static getDataMaskBit(e,t,i){let s,l;switch(e){case 0:s=i+t&1;break;case 1:s=i&1;break;case 2:s=t%3;break;case 3:s=(i+t)%3;break;case 4:s=Math.floor(i/2)+Math.floor(t/3)&1;break;case 5:l=i*t,s=(l&1)+l%3;break;case 6:l=i*t,s=(l&1)+l%3&1;break;case 7:l=i*t,s=l%3+(i+t&1)&1;break;default:throw new S("Invalid mask pattern: "+e)}return s===0}static applyMaskPenaltyRule1Internal(e,t){let i=0;const s=t?e.getHeight():e.getWidth(),l=t?e.getWidth():e.getHeight(),u=e.getArray();for(let r=0;r<s;r++){let o=0,f=-1;for(let d=0;d<l;d++){const x=t?u[r][d]:u[d][r];x===f?o++:(o>=5&&(i+=Wt.N1+(o-5)),o=1,f=x)}o>=5&&(i+=Wt.N1+(o-5))}return i}}Wt.N1=3,Wt.N2=3,Wt.N3=40,Wt.N4=10;class Yr{constructor(e,t){this.width=e,this.height=t;const i=new Array(t);for(let s=0;s!==t;s++)i[s]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,i){this.bytes[t][e]=i}setBoolean(e,t,i){this.bytes[t][e]=i?1:0}clear(e){for(const t of this.bytes)fe.fill(t,e)}equals(e){if(!(e instanceof Yr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let i=0,s=this.height;i<s;++i){const l=this.bytes[i],u=t.bytes[i];for(let r=0,o=this.width;r<o;++r)if(l[r]!==u[r])return!1}return!0}toString(){const e=new Oe;for(let t=0,i=this.height;t<i;++t){const s=this.bytes[t];for(let l=0,u=this.width;l<u;++l)switch(s[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Dr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Dr.NUM_MASK_PATTERNS}}Dr.NUM_MASK_PATTERNS=8;class Tt extends b{}Tt.kind="WriterException";class We{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,i,s,l){We.clearMatrix(l),We.embedBasicPatterns(i,l),We.embedTypeInfo(t,s,l),We.maybeEmbedVersionInfo(i,l),We.embedDataBits(e,s,l)}static embedBasicPatterns(e,t){We.embedPositionDetectionPatternsAndSeparators(t),We.embedDarkDotAtLeftBottomCorner(t),We.maybeEmbedPositionAdjustmentPatterns(e,t),We.embedTimingPatterns(t)}static embedTypeInfo(e,t,i){const s=new J;We.makeTypeInfoBits(e,t,s);for(let l=0,u=s.getSize();l<u;++l){const r=s.get(s.getSize()-1-l),o=We.TYPE_INFO_COORDINATES[l],f=o[0],d=o[1];if(i.setBoolean(f,d,r),l<8){const x=i.getWidth()-l-1;i.setBoolean(x,8,r)}else{const m=i.getHeight()-7+(l-8);i.setBoolean(8,m,r)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const i=new J;We.makeVersionInfoBits(e,i);let s=6*3-1;for(let l=0;l<6;++l)for(let u=0;u<3;++u){const r=i.get(s);s--,t.setBoolean(l,t.getHeight()-11+u,r),t.setBoolean(t.getHeight()-11+u,l,r)}}static embedDataBits(e,t,i){let s=0,l=-1,u=i.getWidth()-1,r=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);r>=0&&r<i.getHeight();){for(let o=0;o<2;++o){const f=u-o;if(!We.isEmpty(i.get(f,r)))continue;let d;s<e.getSize()?(d=e.get(s),++s):d=!1,t!==255&&Wt.getDataMaskBit(t,f,r)&&(d=!d),i.setBoolean(f,r,d)}r+=l}l=-l,r+=l,u-=2}if(s!==e.getSize())throw new Tt("Not all bits consumed: "+s+"/"+e.getSize())}static findMSBSet(e){return 32-ae.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new S("0 polynomial");const i=We.findMSBSet(t);for(e<<=i-1;We.findMSBSet(e)>=i;)e^=t<<We.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,t,i){if(!Dr.isValidMaskPattern(t))throw new Tt("Invalid mask pattern");const s=e.getBits()<<3|t;i.appendBits(s,5);const l=We.calculateBCHCode(s,We.TYPE_INFO_POLY);i.appendBits(l,10);const u=new J;if(u.appendBits(We.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Tt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const i=We.calculateBCHCode(e.getVersionNumber(),We.VERSION_INFO_POLY);if(t.appendBits(i,12),t.getSize()!==18)throw new Tt("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const i=(t+1)%2;We.isEmpty(e.get(t,6))&&e.setNumber(t,6,i),We.isEmpty(e.get(6,t))&&e.setNumber(6,t,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Tt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,i){for(let s=0;s<8;++s){if(!We.isEmpty(i.get(e+s,t)))throw new Tt;i.setNumber(e+s,t,0)}}static embedVerticalSeparationPattern(e,t,i){for(let s=0;s<7;++s){if(!We.isEmpty(i.get(e,t+s)))throw new Tt;i.setNumber(e,t+s,0)}}static embedPositionAdjustmentPattern(e,t,i){for(let s=0;s<5;++s){const l=We.POSITION_ADJUSTMENT_PATTERN[s];for(let u=0;u<5;++u)i.setNumber(e+u,t+s,l[u])}}static embedPositionDetectionPattern(e,t,i){for(let s=0;s<7;++s){const l=We.POSITION_DETECTION_PATTERN[s];for(let u=0;u<7;++u)i.setNumber(e+u,t+s,l[u])}}static embedPositionDetectionPatternsAndSeparators(e){const t=We.POSITION_DETECTION_PATTERN[0].length;We.embedPositionDetectionPattern(0,0,e),We.embedPositionDetectionPattern(e.getWidth()-t,0,e),We.embedPositionDetectionPattern(0,e.getWidth()-t,e);const i=8;We.embedHorizontalSeparationPattern(0,i-1,e),We.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),We.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const s=7;We.embedVerticalSeparationPattern(s,0,e),We.embedVerticalSeparationPattern(e.getHeight()-s-1,0,e),We.embedVerticalSeparationPattern(s,e.getHeight()-s,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,s=We.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let l=0,u=s.length;l!==u;l++){const r=s[l];if(r>=0)for(let o=0;o!==u;o++){const f=s[o];f>=0&&We.isEmpty(t.get(f,r))&&We.embedPositionAdjustmentPattern(f-2,r-2,t)}}}}We.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),We.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),We.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),We.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),We.VERSION_INFO_POLY=7973,We.TYPE_INFO_POLY=1335,We.TYPE_INFO_MASK_PATTERN=21522;class Ms{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class yt{constructor(){}static calculateMaskPenalty(e){return Wt.applyMaskPenaltyRule1(e)+Wt.applyMaskPenaltyRule2(e)+Wt.applyMaskPenaltyRule3(e)+Wt.applyMaskPenaltyRule4(e)}static encode(e,t,i=null){let s=yt.DEFAULT_BYTE_MODE_ENCODING;const l=i!==null&&i.get(Gt.CHARACTER_SET)!==void 0;l&&(s=i.get(Gt.CHARACTER_SET).toString());const u=this.chooseMode(e,s),r=new J;if(u===Ge.BYTE&&(l||yt.DEFAULT_BYTE_MODE_ENCODING!==s)){const P=V.getCharacterSetECIByName(s);P!==void 0&&this.appendECI(P,r)}this.appendModeInfo(u,r);const o=new J;this.appendBytes(e,u,o,s);let f;if(i!==null&&i.get(Gt.QR_VERSION)!==void 0){const P=Number.parseInt(i.get(Gt.QR_VERSION).toString(),10);f=Ve.getVersionForNumber(P);const N=this.calculateBitsNeeded(u,r,o,f);if(!this.willFit(N,f,t))throw new Tt("Data too big for requested version")}else f=this.recommendVersion(t,u,r,o);const d=new J;d.appendBitArray(r);const x=u===Ge.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(x,f,u,d),d.appendBitArray(o);const m=f.getECBlocksForLevel(t),y=f.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(y,d);const C=this.interleaveWithECBytes(d,f.getTotalCodewords(),y,m.getNumBlocks()),I=new Dr;I.setECLevel(t),I.setMode(u),I.setVersion(f);const T=f.getDimensionForVersion(),O=new Yr(T,T),R=this.chooseMaskPattern(C,t,f,O);return I.setMaskPattern(R),We.buildMatrix(C,t,f,R,O),I.setMatrix(O),I}static recommendVersion(e,t,i,s){const l=this.calculateBitsNeeded(t,i,s,Ve.getVersionForNumber(1)),u=this.chooseVersion(l,e),r=this.calculateBitsNeeded(t,i,s,u);return this.chooseVersion(r,e)}static calculateBitsNeeded(e,t,i,s){return t.getSize()+e.getCharacterCountBits(s)+i.getSize()}static getAlphanumericCode(e){return e<yt.ALPHANUMERIC_TABLE.length?yt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(V.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ge.KANJI;let i=!1,s=!1;for(let l=0,u=e.length;l<u;++l){const r=e.charAt(l);if(yt.isDigit(r))i=!0;else if(this.getAlphanumericCode(r.charCodeAt(0))!==-1)s=!0;else return Ge.BYTE}return s?Ge.ALPHANUMERIC:i?Ge.NUMERIC:Ge.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=Ne.encode(e,V.SJIS)}catch{return!1}const i=t.length;if(i%2!==0)return!1;for(let s=0;s<i;s+=2){const l=t[s]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(e,t,i,s){let l=Number.MAX_SAFE_INTEGER,u=-1;for(let r=0;r<Dr.NUM_MASK_PATTERNS;r++){We.buildMatrix(e,t,i,r,s);let o=this.calculateMaskPenalty(s);o<l&&(l=o,u=r)}return u}static chooseVersion(e,t){for(let i=1;i<=40;i++){const s=Ve.getVersionForNumber(i);if(yt.willFit(e,s,t))return s}throw new Tt("Data too big")}static willFit(e,t,i){const s=t.getTotalCodewords(),u=t.getECBlocksForLevel(i).getTotalECCodewords(),r=s-u,o=(e+7)/8;return r>=o}static terminateBits(e,t){const i=e*8;if(t.getSize()>i)throw new Tt("data bits cannot fit in the QR Code"+t.getSize()+" > "+i);for(let u=0;u<4&&t.getSize()<i;++u)t.appendBit(!1);const s=t.getSize()&7;if(s>0)for(let u=s;u<8;u++)t.appendBit(!1);const l=e-t.getSizeInBytes();for(let u=0;u<l;++u)t.appendBits(u&1?17:236,8);if(t.getSize()!==i)throw new Tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,i,s,l,u){if(s>=i)throw new Tt("Block ID too large");const r=e%i,o=i-r,f=Math.floor(e/i),d=f+1,x=Math.floor(t/i),m=x+1,y=f-x,C=d-m;if(y!==C)throw new Tt("EC bytes mismatch");if(i!==o+r)throw new Tt("RS blocks mismatch");if(e!==(x+y)*o+(m+C)*r)throw new Tt("Total bytes mismatch");s<o?(l[0]=x,u[0]=y):(l[0]=m,u[0]=C)}static interleaveWithECBytes(e,t,i,s){if(e.getSizeInBytes()!==i)throw new Tt("Number of bits and data bytes does not match");let l=0,u=0,r=0;const o=new Array;for(let d=0;d<s;++d){const x=new Int32Array(1),m=new Int32Array(1);yt.getNumDataBytesAndNumECBytesForBlockID(t,i,s,d,x,m);const y=x[0],C=new Uint8Array(y);e.toBytes(8*l,C,0,y);const I=yt.generateECBytes(C,m[0]);o.push(new Ms(C,I)),u=Math.max(u,y),r=Math.max(r,I.length),l+=x[0]}if(i!==l)throw new Tt("Data bytes does not match offset");const f=new J;for(let d=0;d<u;++d)for(const x of o){const m=x.getDataBytes();d<m.length&&f.appendBits(m[d],8)}for(let d=0;d<r;++d)for(const x of o){const m=x.getErrorCorrectionBytes();d<m.length&&f.appendBits(m[d],8)}if(t!==f.getSizeInBytes())throw new Tt("Interleaving error: "+t+" and "+f.getSizeInBytes()+" differ.");return f}static generateECBytes(e,t){const i=e.length,s=new Int32Array(i+t);for(let u=0;u<i;u++)s[u]=e[u]&255;new zr(B.QR_CODE_FIELD_256).encode(s,t);const l=new Uint8Array(t);for(let u=0;u<t;u++)l[u]=s[i+u];return l}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,i,s){const l=i.getCharacterCountBits(t);if(e>=1<<l)throw new Tt(e+" is bigger than "+((1<<l)-1));s.appendBits(e,l)}static appendBytes(e,t,i,s){switch(t){case Ge.NUMERIC:yt.appendNumericBytes(e,i);break;case Ge.ALPHANUMERIC:yt.appendAlphanumericBytes(e,i);break;case Ge.BYTE:yt.append8BitBytes(e,i,s);break;case Ge.KANJI:yt.appendKanjiBytes(e,i);break;default:throw new Tt("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=yt.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const i=e.length;let s=0;for(;s<i;){const l=yt.getDigit(e.charAt(s));if(s+2<i){const u=yt.getDigit(e.charAt(s+1)),r=yt.getDigit(e.charAt(s+2));t.appendBits(l*100+u*10+r,10),s+=3}else if(s+1<i){const u=yt.getDigit(e.charAt(s+1));t.appendBits(l*10+u,7),s+=2}else t.appendBits(l,4),s++}}static appendAlphanumericBytes(e,t){const i=e.length;let s=0;for(;s<i;){const l=yt.getAlphanumericCode(e.charCodeAt(s));if(l===-1)throw new Tt;if(s+1<i){const u=yt.getAlphanumericCode(e.charCodeAt(s+1));if(u===-1)throw new Tt;t.appendBits(l*45+u,11),s+=2}else t.appendBits(l,6),s++}}static append8BitBytes(e,t,i){let s;try{s=Ne.encode(e,i)}catch(l){throw new Tt(l)}for(let l=0,u=s.length;l!==u;l++){const r=s[l];t.appendBits(r,8)}}static appendKanjiBytes(e,t){let i;try{i=Ne.encode(e,V.SJIS)}catch(l){throw new Tt(l)}const s=i.length;for(let l=0;l<s;l+=2){const u=i[l]&255,r=i[l+1]&255,o=u<<8&4294967295|r;let f=-1;if(o>=33088&&o<=40956?f=o-33088:o>=57408&&o<=60351&&(f=o-49472),f===-1)throw new Tt("Invalid byte sequence");const d=(f>>8)*192+(f&255);t.appendBits(d,13)}}static appendECI(e,t){t.appendBits(Ge.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}yt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),yt.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class br{write(e,t,i,s=null){if(e.length===0)throw new S("Found empty contents");if(t<0||i<0)throw new S("Requested dimensions are too small: "+t+"x"+i);let l=Et.L,u=br.QUIET_ZONE_SIZE;s!==null&&(s.get(Gt.ERROR_CORRECTION)!==void 0&&(l=Et.fromString(s.get(Gt.ERROR_CORRECTION).toString())),s.get(Gt.MARGIN)!==void 0&&(u=Number.parseInt(s.get(Gt.MARGIN).toString(),10)));const r=yt.encode(e,l,s);return this.renderResult(r,t,i,u)}writeToDom(e,t,i,s,l=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(t,i,s,l);e&&e.appendChild(u)}renderResult(e,t,i,s){const l=e.getMatrix();if(l===null)throw new re;const u=l.getWidth(),r=l.getHeight(),o=u+s*2,f=r+s*2,d=Math.max(t,o),x=Math.max(i,f),m=Math.min(Math.floor(d/o),Math.floor(x/f)),y=Math.floor((d-u*m)/2),C=Math.floor((x-r*m)/2),I=this.createSVGElement(d,x);for(let T=0,O=C;T<r;T++,O+=m)for(let R=0,P=y;R<u;R++,P+=m)if(l.get(R,T)===1){const N=this.createSvgRectElement(P,O,m,m);I.appendChild(N)}return I}createSVGElement(e,t){const i=document.createElementNS(br.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",t.toString()),i}createSvgRectElement(e,t,i,s){const l=document.createElementNS(br.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",t.toString()),l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l.setAttributeNS(null,"fill","#000000"),l}}br.QUIET_ZONE_SIZE=4,br.SVG_NS="http://www.w3.org/2000/svg";class Mr{encode(e,t,i,s,l){if(e.length===0)throw new S("Found empty contents");if(t!==Me.QR_CODE)throw new S("Can only encode QR_CODE, but got "+t);if(i<0||s<0)throw new S(`Requested dimensions are too small: ${i}x${s}`);let u=Et.L,r=Mr.QUIET_ZONE_SIZE;l!==null&&(l.get(Gt.ERROR_CORRECTION)!==void 0&&(u=Et.fromString(l.get(Gt.ERROR_CORRECTION).toString())),l.get(Gt.MARGIN)!==void 0&&(r=Number.parseInt(l.get(Gt.MARGIN).toString(),10)));const o=yt.encode(e,u,l);return Mr.renderResult(o,i,s,r)}static renderResult(e,t,i,s){const l=e.getMatrix();if(l===null)throw new re;const u=l.getWidth(),r=l.getHeight(),o=u+s*2,f=r+s*2,d=Math.max(t,o),x=Math.max(i,f),m=Math.min(Math.floor(d/o),Math.floor(x/f)),y=Math.floor((d-u*m)/2),C=Math.floor((x-r*m)/2),I=new Je(d,x);for(let T=0,O=C;T<r;T++,O+=m)for(let R=0,P=y;R<u;R++,P+=m)l.get(R,T)===1&&I.setRegion(P,O,m,m);return I}}Mr.QUIET_ZONE_SIZE=4;class ss{encode(e,t,i,s,l){let u;switch(t){case Me.QR_CODE:u=new Mr;break;default:throw new S("No encoder available for format "+t)}return u.encode(e,t,i,s,l)}}class Kn extends et{constructor(e,t,i,s,l,u,r,o){if(super(u,r),this.yuvData=e,this.dataWidth=t,this.dataHeight=i,this.left=s,this.top=l,s+u>t||l+r>i)throw new S("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(u,r)}getRow(e,t){if(e<0||e>=this.getHeight())throw new S("Requested row is outside the image: "+e);const i=this.getWidth();(t==null||t.length<i)&&(t=new Uint8ClampedArray(i));const s=(e+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.yuvData,s,t,0,i),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const i=e*t,s=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ee.arraycopy(this.yuvData,l,s,0,i),s;for(let u=0;u<t;u++){const r=u*e;ee.arraycopy(this.yuvData,l,s,r,e),l+=this.dataWidth}return s}isCropSupported(){return!0}crop(e,t,i,s){return new Kn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,i,s,!1)}renderThumbnail(){const e=this.getWidth()/Kn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Kn.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*t),s=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let u=0;u<t;u++){const r=u*e;for(let o=0;o<e;o++){const f=s[l+o*Kn.THUMBNAIL_SCALE_FACTOR]&255;i[r+o]=4278190080|f*65793}l+=this.dataWidth*Kn.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Kn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Kn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const i=this.yuvData;for(let s=0,l=this.top*this.dataWidth+this.left;s<t;s++,l+=this.dataWidth){const u=l+e/2;for(let r=l,o=l+e-1;r<u;r++,o--){const f=i[r];i[r]=i[o],i[o]=f}}}invert(){return new Ut(this)}}Kn.THUMBNAIL_SCALE_FACTOR=2;class os extends et{constructor(e,t,i,s,l,u,r){if(super(t,i),this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=r,e.BYTES_PER_ELEMENT===4){const o=t*i,f=new Uint8ClampedArray(o);for(let d=0;d<o;d++){const x=e[d],m=x>>16&255,y=x>>7&510,C=x&255;f[d]=(m+y+C)/4&255}this.luminances=f}else this.luminances=e;if(s===void 0&&(this.dataWidth=t),l===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),r===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+i>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new S("Requested row is outside the image: "+e);const i=this.getWidth();(t==null||t.length<i)&&(t=new Uint8ClampedArray(i));const s=(e+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.luminances,s,t,0,i),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const i=e*t,s=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ee.arraycopy(this.luminances,l,s,0,i),s;for(let u=0;u<t;u++){const r=u*e;ee.arraycopy(this.luminances,l,s,r,e),l+=this.dataWidth}return s}isCropSupported(){return!0}crop(e,t,i,s){return new os(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Ut(this)}}class wo extends V{static forName(e){return this.getCharacterSetECIByName(e)}}class Ri{}Ri.ISO_8859_1=V.ISO8859_1;class Ni{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class yo{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Ps{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Pr extends Ps{constructor(e,t,i){super(e),this.value=t,this.bitCount=i}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Pr(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Pr(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ae.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Bs extends Pr{constructor(e,t,i){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=i}appendTo(e,t){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+i],8)}addBinaryShift(e,t){return new Bs(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bo(v,e,t){return new Bs(v,e,t)}function Di(v,e,t){return new Pr(v,e,t)}const Ao=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ar=0,as=1,Bn=2,ls=3,$n=4,Eo=new Pr(null,0,0),ks=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ca(v){for(let e of v)fe.fill(e,-1);return v[Ar][$n]=0,v[as][$n]=0,v[as][Ar]=28,v[ls][$n]=0,v[Bn][$n]=0,v[Bn][Ar]=15,v}const Co=Ca(fe.createInt32Array(6,6));class kn{constructor(e,t,i,s){this.token=e,this.mode=t,this.binaryShiftByteCount=i,this.bitCount=s}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let i=this.bitCount,s=this.token;if(e!==this.mode){let u=ks[this.mode][e];s=Di(s,u&65535,u>>16),i+=u>>16}let l=e===Bn?4:5;return s=Di(s,t,l),new kn(s,e,0,i+l)}shiftAndAppend(e,t){let i=this.token,s=this.mode===Bn?4:5;return i=Di(i,Co[this.mode][e],s),i=Di(i,t,5),new kn(i,this.mode,0,this.bitCount+s+5)}addBinaryShiftChar(e){let t=this.token,i=this.mode,s=this.bitCount;if(this.mode===$n||this.mode===Bn){let r=ks[i][Ar];t=Di(t,r&65535,r>>16),s+=r>>16,i=Ar}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new kn(t,i,this.binaryShiftByteCount+1,s+l);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=bo(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new kn(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(ks[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=kn.calculateBinaryShiftCost(e)-kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())t.unshift(s);let i=new J;for(const s of t)s.appendTo(i,e);return i}toString(){return $.format("%s bits=%d bytes=%d",Ao[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}kn.INITIAL_STATE=new kn(Eo,Ar,0,0);function Er(v){const e=$.getCharCode(" "),t=$.getCharCode("."),i=$.getCharCode(",");v[Ar][e]=1;const s=$.getCharCode("Z"),l=$.getCharCode("A");for(let m=l;m<=s;m++)v[Ar][m]=m-l+2;v[as][e]=1;const u=$.getCharCode("z"),r=$.getCharCode("a");for(let m=r;m<=u;m++)v[as][m]=m-r+2;v[Bn][e]=1;const o=$.getCharCode("9"),f=$.getCharCode("0");for(let m=f;m<=o;m++)v[Bn][m]=m-f+2;v[Bn][i]=12,v[Bn][t]=13;const d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let m=0;m<d.length;m++)v[ls][$.getCharCode(d[m])]=m;const x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let m=0;m<x.length;m++)$.getCharCode(x[m])>0&&(v[$n][$.getCharCode(x[m])]=m);return v}const jt=Er(fe.createInt32Array(5,256));class Br{constructor(e){this.text=e}encode(){const e=$.getCharCode(" "),t=$.getCharCode(`
`);let i=yo.singletonList(kn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let u,r=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case $.getCharCode("\r"):u=r===t?2:0;break;case $.getCharCode("."):u=r===e?3:0;break;case $.getCharCode(","):u=r===e?4:0;break;case $.getCharCode(":"):u=r===e?5:0;break;default:u=0}u>0?(i=Br.updateStateListForPair(i,l,u),l++):i=this.updateStateListForChar(i,l)}return yo.min(i,(l,u)=>l.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const i=[];for(let s of e)this.updateStateForChar(s,t,i);return Br.simplifyStates(i)}updateStateForChar(e,t,i){let s=this.text[t]&255,l=jt[e.getMode()][s]>0,u=null;for(let r=0;r<=$n;r++){let o=jt[r][s];if(o>0){if(u==null&&(u=e.endBinaryShift(t)),!l||r===e.getMode()||r===Bn){const f=u.latchAndAppend(r,o);i.push(f)}if(!l&&Co[e.getMode()][r]>=0){const f=u.shiftAndAppend(r,o);i.push(f)}}}if(e.getBinaryShiftByteCount()>0||jt[e.getMode()][s]===0){let r=e.addBinaryShiftChar(t);i.push(r)}}static updateStateListForPair(e,t,i){const s=[];for(let l of e)this.updateStateForPair(l,t,i,s);return this.simplifyStates(s)}static updateStateForPair(e,t,i,s){let l=e.endBinaryShift(t);if(s.push(l.latchAndAppend($n,i)),e.getMode()!==$n&&s.push(l.shiftAndAppend($n,i)),i===3||i===4){let u=l.latchAndAppend(Bn,16-i).latchAndAppend(Bn,1);s.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);s.push(u)}}static simplifyStates(e){let t=[];for(const i of e){let s=!0;for(const l of t){if(l.isBetterThanOrEqualTo(i)){s=!1;break}i.isBetterThanOrEqualTo(l)&&(t=t.filter(u=>u!==l))}s&&t.push(i)}return t}}class Qe{constructor(){}static encodeBytes(e){return Qe.encode(e,Qe.DEFAULT_EC_PERCENT,Qe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,i){let s=new Br(e).encode(),l=ae.truncDivision(s.getSize()*t,100)+11,u=s.getSize()+l,r,o,f,d,x;if(i!==Qe.DEFAULT_AZTEC_LAYERS){if(r=i<0,o=Math.abs(i),o>(r?Qe.MAX_NB_BITS_COMPACT:Qe.MAX_NB_BITS))throw new S($.format("Illegal value %s for layers",i));f=Qe.totalBitsInLayer(o,r),d=Qe.WORD_SIZE[o];let N=f-f%d;if(x=Qe.stuffBits(s,d),x.getSize()+l>N)throw new S("Data to large for user specified layer");if(r&&x.getSize()>d*64)throw new S("Data to large for user specified layer")}else{d=0,x=null;for(let N=0;;N++){if(N>Qe.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(r=N<=3,o=r?N+1:N,f=Qe.totalBitsInLayer(o,r),u>f)continue;(x==null||d!==Qe.WORD_SIZE[o])&&(d=Qe.WORD_SIZE[o],x=Qe.stuffBits(s,d));let F=f-f%d;if(!(r&&x.getSize()>d*64)&&x.getSize()+l<=F)break}}let m=Qe.generateCheckWords(x,f,d),y=x.getSize()/d,C=Qe.generateModeMessage(r,o,y),I=(r?11:14)+o*4,T=new Int32Array(I),O;if(r){O=I;for(let N=0;N<T.length;N++)T[N]=N}else{O=I+1+2*ae.truncDivision(ae.truncDivision(I,2)-1,15);let N=ae.truncDivision(I,2),F=ae.truncDivision(O,2);for(let L=0;L<N;L++){let H=L+ae.truncDivision(L,15);T[N-L-1]=F-H-1,T[N+L]=F+H+1}}let R=new Je(O);for(let N=0,F=0;N<o;N++){let L=(o-N)*4+(r?9:12);for(let H=0;H<L;H++){let G=H*2;for(let X=0;X<2;X++)m.get(F+G+X)&&R.set(T[N*2+X],T[N*2+H]),m.get(F+L*2+G+X)&&R.set(T[N*2+H],T[I-1-N*2-X]),m.get(F+L*4+G+X)&&R.set(T[I-1-N*2-X],T[I-1-N*2-H]),m.get(F+L*6+G+X)&&R.set(T[I-1-N*2-H],T[N*2+X])}F+=L*8}if(Qe.drawModeMessage(R,r,O,C),r)Qe.drawBullsEye(R,ae.truncDivision(O,2),5);else{Qe.drawBullsEye(R,ae.truncDivision(O,2),7);for(let N=0,F=0;N<ae.truncDivision(I,2)-1;N+=15,F+=16)for(let L=ae.truncDivision(O,2)&1;L<O;L+=2)R.set(ae.truncDivision(O,2)-F,L),R.set(ae.truncDivision(O,2)+F,L),R.set(L,ae.truncDivision(O,2)-F),R.set(L,ae.truncDivision(O,2)+F)}let P=new Ni;return P.setCompact(r),P.setSize(O),P.setLayers(o),P.setCodeWords(y),P.setMatrix(R),P}static drawBullsEye(e,t,i){for(let s=0;s<i;s+=2)for(let l=t-s;l<=t+s;l++)e.set(l,t-s),e.set(l,t+s),e.set(t-s,l),e.set(t+s,l);e.set(t-i,t-i),e.set(t-i+1,t-i),e.set(t-i,t-i+1),e.set(t+i,t-i),e.set(t+i,t-i+1),e.set(t+i,t+i-1)}static generateModeMessage(e,t,i){let s=new J;return e?(s.appendBits(t-1,2),s.appendBits(i-1,6),s=Qe.generateCheckWords(s,28,4)):(s.appendBits(t-1,5),s.appendBits(i-1,11),s=Qe.generateCheckWords(s,40,4)),s}static drawModeMessage(e,t,i,s){let l=ae.truncDivision(i,2);if(t)for(let u=0;u<7;u++){let r=l-3+u;s.get(u)&&e.set(r,l-5),s.get(u+7)&&e.set(l+5,r),s.get(20-u)&&e.set(r,l+5),s.get(27-u)&&e.set(l-5,r)}else for(let u=0;u<10;u++){let r=l-5+u+ae.truncDivision(u,5);s.get(u)&&e.set(r,l-7),s.get(u+10)&&e.set(l+7,r),s.get(29-u)&&e.set(r,l+7),s.get(39-u)&&e.set(l-7,r)}}static generateCheckWords(e,t,i){let s=e.getSize()/i,l=new zr(Qe.getGF(i)),u=ae.truncDivision(t,i),r=Qe.bitsToWords(e,i,u);l.encode(r,u-s);let o=t%i,f=new J;f.appendBits(0,o);for(const d of Array.from(r))f.appendBits(d,i);return f}static bitsToWords(e,t,i){let s=new Int32Array(i),l,u;for(l=0,u=e.getSize()/t;l<u;l++){let r=0;for(let o=0;o<t;o++)r|=e.get(l*t+o)?1<<t-o-1:0;s[l]=r}return s}static getGF(e){switch(e){case 4:return B.AZTEC_PARAM;case 6:return B.AZTEC_DATA_6;case 8:return B.AZTEC_DATA_8;case 10:return B.AZTEC_DATA_10;case 12:return B.AZTEC_DATA_12;default:throw new S("Unsupported word size "+e)}}static stuffBits(e,t){let i=new J,s=e.getSize(),l=(1<<t)-2;for(let u=0;u<s;u+=t){let r=0;for(let o=0;o<t;o++)(u+o>=s||e.get(u+o))&&(r|=1<<t-1-o);(r&l)===l?(i.appendBits(r&l,t),u--):r&l?i.appendBits(r,t):(i.appendBits(r|1,t),u--)}return i}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Qe.DEFAULT_EC_PERCENT=33,Qe.DEFAULT_AZTEC_LAYERS=0,Qe.MAX_NB_BITS=32,Qe.MAX_NB_BITS_COMPACT=4,Qe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cs{encode(e,t,i,s){return this.encodeWithHints(e,t,i,s,null)}encodeWithHints(e,t,i,s,l){let u=Ri.ISO_8859_1,r=Qe.DEFAULT_EC_PERCENT,o=Qe.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Gt.CHARACTER_SET)&&(u=wo.forName(l.get(Gt.CHARACTER_SET).toString())),l.has(Gt.ERROR_CORRECTION)&&(r=ae.parseInt(l.get(Gt.ERROR_CORRECTION).toString())),l.has(Gt.AZTEC_LAYERS)&&(o=ae.parseInt(l.get(Gt.AZTEC_LAYERS).toString()))),cs.encodeLayers(e,t,i,s,u,r,o)}static encodeLayers(e,t,i,s,l,u,r){if(t!==Me.AZTEC)throw new S("Can only encode AZTEC, but got "+t);let o=Qe.encode($.getBytes(e,l),u,r);return cs.renderResult(o,i,s)}static renderResult(e,t,i){let s=e.getMatrix();if(s==null)throw new re;let l=s.getWidth(),u=s.getHeight(),r=Math.max(t,l),o=Math.max(i,u),f=Math.min(r/l,o/u),d=(r-l*f)/2,x=(o-u*f)/2,m=new Je(r,o);for(let y=0,C=x;y<u;y++,C+=f)for(let I=0,T=d;I<l;I++,T+=f)s.get(I,y)&&m.setRegion(T,C,f,f);return m}}c.AbstractExpandedDecoder=ar,c.ArgumentException=_,c.ArithmeticException=M,c.AztecCode=Ni,c.AztecCodeReader=ln,c.AztecCodeWriter=cs,c.AztecDecoder=de,c.AztecDetector=rn,c.AztecDetectorResult=Te,c.AztecEncoder=Qe,c.AztecHighLevelEncoder=Br,c.AztecPoint=dt,c.BarcodeFormat=Me,c.Binarizer=se,c.BinaryBitmap=k,c.BitArray=J,c.BitMatrix=Je,c.BitSource=$i,c.BrowserAztecCodeReader=cn,c.BrowserBarcodeReader=jr,c.BrowserCodeReader=nn,c.BrowserDatamatrixCodeReader=Dt,c.BrowserMultiFormatReader=Rs,c.BrowserPDF417Reader=Ns,c.BrowserQRCodeReader=Ds,c.BrowserQRCodeSvgWriter=br,c.CharacterSetECI=V,c.ChecksumException=U,c.Code128Reader=be,c.Code39Reader=st,c.DataMatrixDecodedBitStreamParser=Wn,c.DataMatrixReader=xr,c.DecodeHintType=ve,c.DecoderResult=ne,c.DefaultGridSampler=ht,c.DetectorResult=He,c.EAN13Reader=Sr,c.EncodeHintType=Gt,c.Exception=b,c.FormatException=K,c.GenericGF=B,c.GenericGFPoly=Xe,c.GlobalHistogramBinarizer=qe,c.GridSampler=je,c.GridSamplerInstance=it,c.HTMLCanvasElementLuminanceSource=Pt,c.HybridBinarizer=_e,c.ITFReader=xe,c.IllegalArgumentException=S,c.IllegalStateException=re,c.InvertedLuminanceSource=Ut,c.LuminanceSource=et,c.MathUtils=le,c.MultiFormatOneDReader=Or,c.MultiFormatReader=is,c.MultiFormatWriter=ss,c.NotFoundException=Z,c.OneDReader=It,c.PDF417DecodedBitStreamParser=q,c.PDF417DecoderErrorCorrection=es,c.PDF417Reader=gn,c.PDF417ResultMetadata=Si,c.PerspectiveTransform=ze,c.PlanarYUVLuminanceSource=Kn,c.QRCodeByteMatrix=Yr,c.QRCodeDataMask=An,c.QRCodeDecodedBitStreamParser=Ht,c.QRCodeDecoderErrorCorrectionLevel=Et,c.QRCodeDecoderFormatInformation=Zt,c.QRCodeEncoder=yt,c.QRCodeEncoderQRCode=Dr,c.QRCodeMaskUtil=Wt,c.QRCodeMatrixUtil=We,c.QRCodeMode=Ge,c.QRCodeReader=dn,c.QRCodeVersion=Ve,c.QRCodeWriter=Mr,c.RGBLuminanceSource=os,c.RSS14Reader=kt,c.RSSExpandedReader=ue,c.ReaderException=yr,c.ReedSolomonDecoder=ce,c.ReedSolomonEncoder=zr,c.ReedSolomonException=W,c.Result=Vt,c.ResultMetadataType=Ce,c.ResultPoint=j,c.StringUtils=$,c.UnsupportedOperationException=he,c.VideoInputDevice=yn,c.WhiteRectangleDetector=Le,c.WriterException=Tt,c.ZXingArrays=fe,c.ZXingCharset=wo,c.ZXingInteger=ae,c.ZXingStandardCharsets=Ri,c.ZXingStringBuilder=Oe,c.ZXingStringEncoding=Ne,c.ZXingSystem=ee,c.createAbstractExpandedDecoder=Tr,Object.defineProperty(c,"__esModule",{value:!0})})})(fl,fl.exports);var Kt=fl.exports;const yg=Gf(Kt),bg=zf({__proto__:null,default:yg},[Kt]);var Wc=function(){function n(a,c,h){if(this.formatMap=new Map([[ke.QR_CODE,Kt.BarcodeFormat.QR_CODE],[ke.AZTEC,Kt.BarcodeFormat.AZTEC],[ke.CODABAR,Kt.BarcodeFormat.CODABAR],[ke.CODE_39,Kt.BarcodeFormat.CODE_39],[ke.CODE_93,Kt.BarcodeFormat.CODE_93],[ke.CODE_128,Kt.BarcodeFormat.CODE_128],[ke.DATA_MATRIX,Kt.BarcodeFormat.DATA_MATRIX],[ke.MAXICODE,Kt.BarcodeFormat.MAXICODE],[ke.ITF,Kt.BarcodeFormat.ITF],[ke.EAN_13,Kt.BarcodeFormat.EAN_13],[ke.EAN_8,Kt.BarcodeFormat.EAN_8],[ke.PDF_417,Kt.BarcodeFormat.PDF_417],[ke.RSS_14,Kt.BarcodeFormat.RSS_14],[ke.RSS_EXPANDED,Kt.BarcodeFormat.RSS_EXPANDED],[ke.UPC_A,Kt.BarcodeFormat.UPC_A],[ke.UPC_E,Kt.BarcodeFormat.UPC_E],[ke.UPC_EAN_EXTENSION,Kt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!bg)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=h;var g=this.createZXingFormats(a),p=new Map;p.set(Kt.DecodeHintType.POSSIBLE_FORMATS,g),p.set(Kt.DecodeHintType.TRY_HARDER,!1),this.hints=p}return n.prototype.decodeAsync=function(a){var c=this;return new Promise(function(h,g){try{h(c.decode(a))}catch(p){g(p)}})},n.prototype.decode=function(a){var c=new Kt.MultiFormatReader(this.verbose,this.hints),h=new Kt.HTMLCanvasElementLuminanceSource(a),g=new Kt.BinaryBitmap(new Kt.HybridBinarizer(h)),p=c.decode(g);return{text:p.text,format:jf.create(this.toHtml5QrcodeSupportedFormats(p.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,h,g){a.set(c,h)}),a},n.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},n.prototype.createZXingFormats=function(a){for(var c=[],h=0,g=a;h<g.length;h++){var p=g[h];this.formatMap.has(p)?c.push(this.formatMap.get(p)):this.logger.logError("".concat(p," is not supported by")+"ZXingHtml5QrcodeShim")}return c},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),Ag=function(n,a,c,h){function g(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function A(_){try{b(h.next(_))}catch(S){w(S)}}function E(_){try{b(h.throw(_))}catch(S){w(S)}}function b(_){_.done?p(_.value):g(_.value).then(A,E)}b((h=h.apply(n,a||[])).next())})},Eg=function(n,a){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,g,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(b){return function(_){return E([b,_])}}function E(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(c=0)),c;)try{if(h=1,g&&(p=b[0]&2?g.return:b[0]?g.throw||((p=g.return)&&p.call(g),0):g.next)&&!(p=p.call(g,b[1])).done)return p;switch(g=0,p&&(b=[b[0]&2,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,g=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(b[0]===6||b[0]===2)){c=0;continue}if(b[0]===3&&(!p||b[1]>p[0]&&b[1]<p[3])){c.label=b[1];break}if(b[0]===6&&c.label<p[1]){c.label=p[1],p=b;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(b);break}p[2]&&c.ops.pop(),c.trys.pop();continue}b=a.call(n,c)}catch(_){b=[6,_],g=0}finally{h=p=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},jc=function(){function n(a,c,h){if(this.formatMap=new Map([[ke.QR_CODE,"qr_code"],[ke.AZTEC,"aztec"],[ke.CODABAR,"codabar"],[ke.CODE_39,"code_39"],[ke.CODE_93,"code_93"],[ke.CODE_128,"code_128"],[ke.DATA_MATRIX,"data_matrix"],[ke.ITF,"itf"],[ke.EAN_13,"ean_13"],[ke.EAN_8,"ean_8"],[ke.PDF_417,"pdf417"],[ke.UPC_A,"upc_a"],[ke.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=h;var g=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},n.prototype.decodeAsync=function(a){return Ag(this,void 0,void 0,function(){var c,h;return Eg(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(a)];case 1:if(c=g.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(c),[2,{text:h.rawValue,format:jf.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(a){for(var c=null,h=0,g=0,p=a;g<p.length;g++){var w=p[g],A=w.boundingBox.width*w.boundingBox.height;A>h&&(h=A,c=w)}if(!c)throw"No largest barcode found";return c},n.prototype.createBarcodeDetectorFormats=function(a){for(var c=[],h=0,g=a;h<g.length;h++){var p=g[h];this.formatMap.has(p)?c.push(this.formatMap.get(p)):this.logger.warn("".concat(p," is not supported by")+"BarcodeDetectorDelegate")}return{formats:c}},n.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},n.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,h,g){a.set(c,h)}),a},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),Kc=function(n,a,c,h){function g(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function A(_){try{b(h.next(_))}catch(S){w(S)}}function E(_){try{b(h.throw(_))}catch(S){w(S)}}function b(_){_.done?p(_.value):g(_.value).then(A,E)}b((h=h.apply(n,a||[])).next())})},Xc=function(n,a){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,g,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(b){return function(_){return E([b,_])}}function E(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(c=0)),c;)try{if(h=1,g&&(p=b[0]&2?g.return:b[0]?g.throw||((p=g.return)&&p.call(g),0):g.next)&&!(p=p.call(g,b[1])).done)return p;switch(g=0,p&&(b=[b[0]&2,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,g=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(b[0]===6||b[0]===2)){c=0;continue}if(b[0]===3&&(!p||b[1]>p[0]&&b[1]<p[3])){c.label=b[1];break}if(b[0]===6&&c.label<p[1]){c.label=p[1],p=b;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(b);break}p[2]&&c.ops.pop(),c.trys.pop();continue}b=a.call(n,c)}catch(_){b=[6,_],g=0}finally{h=p=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Cg=function(){function n(a,c,h,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,c&&jc.isSupported()?(this.primaryDecoder=new jc(a,h,g),this.secondaryDecoder=new Wc(a,h,g)):this.primaryDecoder=new Wc(a,h,g)}return n.prototype.decodeAsync=function(a){return Kc(this,void 0,void 0,function(){var c;return Xc(this,function(h){switch(h.label){case 0:c=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(a){return Kc(this,void 0,void 0,function(){var c,h;return Xc(this,function(g){switch(g.label){case 0:c=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,g.sent()];case 3:if(h=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw h;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(a){if(this.verbose){var c=performance.now()-a;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,c=0,h=this.executionResults;c<h.length;c++){var g=h[c];a+=g}var p=a/this.executionResults.length;console.log("".concat(p," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),Dl=function(){var n=function(a,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var p in g)Object.prototype.hasOwnProperty.call(g,p)&&(h[p]=g[p])},n(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");n(a,c);function h(){this.constructor=a}a.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),Zo=function(n,a,c,h){function g(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function A(_){try{b(h.next(_))}catch(S){w(S)}}function E(_){try{b(h.throw(_))}catch(S){w(S)}}function b(_){_.done?p(_.value):g(_.value).then(A,E)}b((h=h.apply(n,a||[])).next())})},Qo=function(n,a){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,g,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(b){return function(_){return E([b,_])}}function E(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(c=0)),c;)try{if(h=1,g&&(p=b[0]&2?g.return:b[0]?g.throw||((p=g.return)&&p.call(g),0):g.next)&&!(p=p.call(g,b[1])).done)return p;switch(g=0,p&&(b=[b[0]&2,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,g=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(b[0]===6||b[0]===2)){c=0;continue}if(b[0]===3&&(!p||b[1]>p[0]&&b[1]<p[3])){c.label=b[1];break}if(b[0]===6&&c.label<p[1]){c.label=p[1],p=b;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(b);break}p[2]&&c.ops.pop(),c.trys.pop();continue}b=a.call(n,c)}catch(_){b=[6,_],g=0}finally{h=p=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Xf=function(){function n(a,c){this.name=a,this.track=c}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(a){var c={};c[this.name]=a;var h={advanced:[c]};return this.track.applyConstraints(h)},n.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var c=a[this.name];return c}return null},n}(),vg=function(n){Dl(a,n);function a(c,h){return n.call(this,c,h)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(c){var h={};h[this.name]=c;var g={advanced:[h]};return this.track.applyConstraints(g)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),h=c[this.name];return{min:h.min,max:h.max,step:h.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(Xf),_g=function(n){Dl(a,n);function a(c){return n.call(this,"zoom",c)||this}return a}(vg),Ig=function(n){Dl(a,n);function a(c){return n.call(this,"torch",c)||this}return a}(Xf),Sg=function(){function n(a){this.track=a}return n.prototype.zoomFeature=function(){return new _g(this.track)},n.prototype.torchFeature=function(){return new Ig(this.track)},n}(),Tg=function(){function n(a,c,h){this.isClosed=!1,this.parentElement=a,this.mediaStream=c,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return n.prototype.createVideoElement=function(a){var c=document.createElement("video");return c.style.width="".concat(a,"px"),c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},n.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var h=a.surface.clientWidth,g=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(h,g),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(a,c,h,g){return Zo(this,void 0,void 0,function(){var p,w;return Qo(this,function(A){switch(A.label){case 0:return p=new n(a,c,g),h.aspectRatio?(w={aspectRatio:h.aspectRatio},[4,p.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:A.sent(),A.label=2;case 2:return p.setupSurface(),[2,p]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(a){this.failIfClosed();var c=this,h=function(){setTimeout(a,200),c.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(a){return Zo(this,void 0,void 0,function(){return Qo(this,function(c){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(c,h){var g=a.mediaStream.getVideoTracks(),p=g.length,w=0;a.mediaStream.getVideoTracks().forEach(function(A){a.mediaStream.removeTrack(A),A.stop(),++w,w>=p&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),c())})})},n.prototype.getCapabilities=function(){return new Sg(this.getFirstTrackOrFail())},n}(),Og=function(){function n(a){this.mediaStream=a}return n.prototype.render=function(a,c,h){return Zo(this,void 0,void 0,function(){return Qo(this,function(g){return[2,Tg.create(a,this.mediaStream,c,h)]})})},n.create=function(a){return Zo(this,void 0,void 0,function(){var c,h;return Qo(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return h=g.sent(),[2,new n(h)]}})})},n}(),zc=function(n,a,c,h){function g(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function A(_){try{b(h.next(_))}catch(S){w(S)}}function E(_){try{b(h.throw(_))}catch(S){w(S)}}function b(_){_.done?p(_.value):g(_.value).then(A,E)}b((h=h.apply(n,a||[])).next())})},Yc=function(n,a){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,g,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(b){return function(_){return E([b,_])}}function E(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(c=0)),c;)try{if(h=1,g&&(p=b[0]&2?g.return:b[0]?g.throw||((p=g.return)&&p.call(g),0):g.next)&&!(p=p.call(g,b[1])).done)return p;switch(g=0,p&&(b=[b[0]&2,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,g=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(b[0]===6||b[0]===2)){c=0;continue}if(b[0]===3&&(!p||b[1]>p[0]&&b[1]<p[3])){c.label=b[1];break}if(b[0]===6&&c.label<p[1]){c.label=p[1],p=b;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(b);break}p[2]&&c.ops.pop(),c.trys.pop();continue}b=a.call(n,c)}catch(_){b=[6,_],g=0}finally{h=p=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Rg=function(){function n(){}return n.failIfNotSupported=function(){return zc(this,void 0,void 0,function(){return Yc(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(a){return zc(this,void 0,void 0,function(){return Yc(this,function(c){return[2,Og.create(a)]})})},n}(),Ng=function(n,a,c,h){function g(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function A(_){try{b(h.next(_))}catch(S){w(S)}}function E(_){try{b(h.throw(_))}catch(S){w(S)}}function b(_){_.done?p(_.value):g(_.value).then(A,E)}b((h=h.apply(n,a||[])).next())})},Dg=function(n,a){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,g,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(b){return function(_){return E([b,_])}}function E(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(c=0)),c;)try{if(h=1,g&&(p=b[0]&2?g.return:b[0]?g.throw||((p=g.return)&&p.call(g),0):g.next)&&!(p=p.call(g,b[1])).done)return p;switch(g=0,p&&(b=[b[0]&2,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,g=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(b[0]===6||b[0]===2)){c=0;continue}if(b[0]===3&&(!p||b[1]>p[0]&&b[1]<p[3])){c.label=b[1];break}if(b[0]===6&&c.label<p[1]){c.label=p[1],p=b;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(b);break}p[2]&&c.ops.pop(),c.trys.pop();continue}b=a.call(n,c)}catch(_){b=[6,_],g=0}finally{h=p=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Mg=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var a=ps.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(a=ps.insecureContextCameraQueryError()),Promise.reject(a)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},n.getCamerasFromMediaDevices=function(){return Ng(this,void 0,void 0,function(){var a,c,h,g,p,w,A;return Dg(this,function(E){switch(E.label){case 0:return a=function(b){for(var _=b.getVideoTracks(),S=0,k=_;S<k.length;S++){var U=k[S];U.enabled=!1,U.stop(),b.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=E.sent(),g=[],p=0,w=h;p<w.length;p++)A=w[p],A.kind==="videoinput"&&g.push({id:A.deviceId,label:A.label});return a(c),[2,g]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,c){var h=function(p){for(var w=[],A=0,E=p;A<E.length;A++){var b=E[A];b.kind==="video"&&w.push({id:b.id,label:b.label})}a(w)},g=MediaStreamTrack;g.getSources(h)})},n}(),$t;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})($t||($t={}));var Pg=function(){function n(){this.state=$t.NOT_STARTED,this.onGoingTransactionNewState=$t.UNKNOWN}return n.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},n.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$t.UNKNOWN,this.directTransition(a)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$t.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$t.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(a){switch(this.state){case $t.UNKNOWN:throw"Transition from unknown is not allowed";case $t.NOT_STARTED:this.failIfNewStateIs(a,[$t.PAUSED]);break;case $t.SCANNING:break;case $t.PAUSED:break}},n.prototype.failIfNewStateIs=function(a,c){for(var h=0,g=c;h<g.length;h++){var p=g[h];if(a===p)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},n}(),Bg=function(){function n(a){this.stateManager=a}return n.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},n.prototype.directTransition=function(a){this.stateManager.directTransition(a)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===$t.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==$t.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$t.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===$t.PAUSED},n}(),kg=function(){function n(){}return n.create=function(){return new Bg(new Pg)},n}(),Lg=function(){var n=function(a,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var p in g)Object.prototype.hasOwnProperty.call(g,p)&&(h[p]=g[p])},n(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");n(a,c);function h(){this.constructor=a}a.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),nr=function(n){Lg(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(xg),Fg=function(){function n(a,c){this.logger=c,this.fps=nr.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=nr.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Kf.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Qr(this.qrbox)},n.create=function(a,c){return new n(a,c)},n}(),Ug=function(){function n(a,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var h;typeof c=="boolean"?this.verbose=c===!0:c&&(h=c,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new wg(this.verbose),this.qrcode=new Cg(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=kg.create()}return n.prototype.start=function(a,c,h,g){var p=this;if(!a)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;g?w=g:w=this.verbose?this.logger.log:function(){};var A=Fg.create(c,this.logger);this.clearElement();var E=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=E,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:nr.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var S=this,k=this.stateManagerProxy.startTransition($t.SCANNING);return new Promise(function(U,se){var ee=b?A.videoConstraints:S.createVideoConstraints(a);if(!ee){k.cancel(),se("videoConstraints should be defined");return}var me={};(!b||A.aspectRatio)&&(me.aspectRatio=A.aspectRatio);var ye={onRenderSurfaceReady:function(fe,ae){S.setupUi(fe,ae,A),S.isScanning=!0,S.foreverScan(A,h,w)}};Rg.failIfNotSupported().then(function(fe){fe.create(ee).then(function(ae){return ae.render(p.element,me,ye).then(function(J){S.renderedCamera=J,k.execute(),U(null)}).catch(function(J){k.cancel(),se(J)})}).catch(function(ae){k.cancel(),se(ps.errorGettingUserMedia(ae))})}).catch(function(fe){k.cancel(),se(ps.cameraStreamingNotSupported())})})},n.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($t.PAUSED),this.showPausedState(),(Qr(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,c=function(){a.stateManagerProxy.directTransition($t.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition($t.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(a.element){var p=document.getElementById(nr.SHADED_REGION_ELEMENT_ID);p&&a.element.removeChild(p)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),h(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),c.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(a,c){return this.scanFileV2(a,c).then(function(h){return h.decodedText})},n.prototype.scanFileV2=function(a,c){var h=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Qr(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,p){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(a);var w=new Image;w.onload=function(){var A=w.width,E=w.height,b=document.getElementById(h.elementId),_=b.clientWidth?b.clientWidth:nr.DEFAULT_WIDTH,S=Math.max(b.clientHeight?b.clientHeight:E,nr.FILE_SCAN_MIN_HEIGHT),k=h.computeCanvasDrawConfig(A,E,_,S);if(c){var U=h.createCanvasElement(_,S,"qr-canvas-visible");U.style.display="inline-block",b.appendChild(U);var se=U.getContext("2d");if(!se)throw"Unable to get 2d context from canvas";se.canvas.width=_,se.canvas.height=S,se.drawImage(w,0,0,A,E,k.x,k.y,k.width,k.height)}var ee=nr.FILE_SCAN_HIDDEN_CANVAS_PADDING,me=Math.max(w.width,k.width),ye=Math.max(w.height,k.height),fe=me+2*ee,ae=ye+2*ee,J=h.createCanvasElement(fe,ae);b.appendChild(J);var Fe=J.getContext("2d");if(!Fe)throw"Unable to get 2d context from canvas";Fe.canvas.width=fe,Fe.canvas.height=ae,Fe.drawImage(w,0,0,A,E,ee,ee,me,ye);try{h.qrcode.decodeRobustlyAsync(J).then(function(ve){g(Gc.createFromQrcodeResult(ve))}).catch(p)}catch(ve){p("QR code parse error, error = ".concat(ve))}},w.onerror=p,w.onabort=p,w.onstalled=p,w.onsuspend=p,w.src=URL.createObjectURL(a)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return Mg.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(a){if(a){if(!Kf.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(a){var c=[ke.QR_CODE,ke.AZTEC,ke.CODABAR,ke.CODE_39,ke.CODE_93,ke.CODE_128,ke.DATA_MATRIX,ke.MAXICODE,ke.ITF,ke.EAN_13,ke.EAN_8,ke.PDF_417,ke.RSS_14,ke.RSS_EXPANDED,ke.UPC_A,ke.UPC_E,ke.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return c;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],g=0,p=a.formatsToSupport;g<p.length;g++){var w=p[g];pg(w)?h.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},n.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Qr(a))return!0;if(!Qr(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Qr(a.experimentalFeatures))return!0;var c=a.experimentalFeatures;return Qr(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(a,c,h){var g=this,p=h.qrbox;this.validateQrboxConfig(p);var w=this.toQrdimensions(a,c,p),A=function(b){if(b<nr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(nr.MIN_QR_BOX_SIZE,"px.")},E=function(b){return b>a&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=a),b};A(w.width),A(w.height),w.width=E(w.width)},n.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(a,c,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(a,c)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return h},n.prototype.setupUi=function(a,c,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(a,c,h);var g=Qr(h.qrbox)?{width:a,height:c}:h.qrbox;this.validateQrboxConfig(g);var p=this.toQrdimensions(a,c,g);p.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=h.isShadedBoxEnabled()&&p.height<=c,A={x:0,y:0,width:a,height:c},E=w?this.getShadedRegionBounds(a,c,p):A,b=this.createCanvasElement(E.width,E.height),_={willReadFrequently:!0},S=b.getContext("2d",_);S.canvas.width=E.width,S.canvas.height=E.height,this.element.append(b),w&&this.possiblyInsertShadingElement(this.element,a,c,p),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=S,this.canvasElement=b},n.prototype.createScannerPausedUiElement=function(a){var c=document.createElement("div");c.innerText=ps.scannerPaused(),c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="rgba(9, 9, 9, 0.46)",c.style.color="#FFECEC",c.style.textAlign="center",c.style.width="100%",a.appendChild(c),this.scannerPausedUiElement=c},n.prototype.scanContext=function(a,c){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return a(g.text,Gc.createFromQrcodeResult(g)),h.possiblyUpdateShaders(!0),!0}).catch(function(g){h.possiblyUpdateShaders(!1);var p=ps.codeParseError(g);return c(p,mg.createFrom(p)),!1})},n.prototype.foreverScan=function(a,c,h){var g=this;if(this.shouldScan&&this.renderedCamera){var p=this.renderedCamera.getSurface(),w=p.videoWidth/p.clientWidth,A=p.videoHeight/p.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*w,b=this.qrRegion.height*A,_=this.qrRegion.x*w,S=this.qrRegion.y*A;this.context.drawImage(p,_,S,E,b,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(a,c,h)},g.getTimeoutFps(a.fps))};this.scanContext(c,h).then(function(U){!U&&a.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(c,h).finally(function(){k()})):k()}).catch(function(U){g.logger.logError("Error happend while scanning context",U),k()})}},n.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var c="facingMode",h="deviceId",g={user:!0,environment:!0},p="exact",w=function(se){if(se in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(se,"'")},A=Object.keys(a);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var E=Object.keys(a)[0];if(E!==c&&E!==h)throw"Only '".concat(c,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(E===c){var b=a.facingMode;if(typeof b=="string"){if(w(b))return{facingMode:b}}else if(typeof b=="object")if(p in b){if(w(b["".concat(p)]))return{facingMode:{exact:b["".concat(p)]}}}else throw"'facingMode' should be string or object with"+" ".concat(p," as key.");else{var _=typeof b;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var S=a.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(p in S)return{deviceId:{exact:S["".concat(p)]}};throw"'deviceId' should be string or object with"+" ".concat(p," as key.")}else{var k=typeof S;throw"Invalid type of 'deviceId' = ".concat(k)}}}var U=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},n.prototype.computeCanvasDrawConfig=function(a,c,h,g){if(a<=h&&c<=g){var p=(h-a)/2,w=(g-c)/2;return{x:p,y:w,width:a,height:c}}else{var A=a,E=c;return a>h&&(c=h/a*c,a=h),c>g&&(a=g/c*a,c=g),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(E)+" to ".concat(a,"X").concat(c,".")),this.computeCanvasDrawConfig(a,c,h,g)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},n.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=a?nr.BORDER_SHADER_MATCH_COLOR:nr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(a,c,h){var g=a,p=c,w=document.createElement("canvas");return w.style.width="".concat(g,"px"),w.style.height="".concat(p,"px"),w.style.display="none",w.id=Qr(h)?"qr-canvas":h,w},n.prototype.getShadedRegionBounds=function(a,c,h){if(h.width>a||h.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-h.width)/2,y:(c-h.height)/2,width:h.width,height:h.height}},n.prototype.possiblyInsertShadingElement=function(a,c,h,g){if(!(c-g.width<1||h-g.height<1)){var p=document.createElement("div");p.style.position="absolute";var w=(c-g.width)/2,A=(h-g.height)/2;if(p.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),p.style.boxSizing="border-box",p.style.top="0px",p.style.bottom="0px",p.style.left="0px",p.style.right="0px",p.id="".concat(nr.SHADED_REGION_ELEMENT_ID),c-g.width<11||h-g.height<11)this.hasBorderShaders=!1;else{var E=5,b=40;this.insertShaderBorders(p,b,E,-E,null,0,!0),this.insertShaderBorders(p,b,E,-E,null,0,!1),this.insertShaderBorders(p,b,E,null,-E,0,!0),this.insertShaderBorders(p,b,E,null,-E,0,!1),this.insertShaderBorders(p,E,b+E,-E,null,-E,!0),this.insertShaderBorders(p,E,b+E,null,-E,-E,!0),this.insertShaderBorders(p,E,b+E,-E,null,-E,!1),this.insertShaderBorders(p,E,b+E,null,-E,-E,!1),this.hasBorderShaders=!0}a.append(p)}},n.prototype.insertShaderBorders=function(a,c,h,g,p,w,A){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=nr.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(c,"px"),E.style.height="".concat(h,"px"),g!==null&&(E.style.top="".concat(g,"px")),p!==null&&(E.style.bottom="".concat(p,"px")),A?E.style.left="".concat(w,"px"):E.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),a.appendChild(E)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(a){return 1e3/a},n}(),qc;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(qc||(qc={}));const Vg={class:"min-h-screen flex items-center justify-center p-6"},Hg={class:"w-full max-w-sm"},Gg={key:0,class:"space-y-3"},Wg={key:1,class:"card p-6"},jg={class:"space-y-3"},Kg=["disabled"],Xg={key:0,class:"text-red-400 text-sm mt-4"},zg={key:2,class:"card p-6"},Yg={key:0,class:"text-red-400 text-sm mb-4"},qg={class:"space-y-3"},Zg=["disabled"],Qg={key:3,class:"card p-6"},Jg={key:0,class:"text-red-400 text-sm mb-4"},$g={__name:"OnboardingView",emits:["complete"],setup(n,{emit:a}){const c=a,{createWorkspace:h,joinWorkspace:g}=gs(),p=Nt(null),w=Nt(""),A=Nt(!1),E=Nt(null);let b=null;const _=Nt(!1);async function S(){p.value="scan",_.value=!0,E.value=null,await new Promise(ee=>setTimeout(ee,100));try{b=new Ug("qr-reader"),await b.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},async ee=>{await k(),w.value=ee,alert('Scanned: "'+ee+'"'),se()},()=>{})}catch{E.value="Could not access camera",_.value=!1,p.value=null}}async function k(){if(_.value=!1,b){try{await b.stop(),b.clear()}catch{}b=null}}co(()=>{k()});async function U(){A.value=!0,E.value=null;try{await h(),c("complete")}catch{E.value="Failed to create workspace"}finally{A.value=!1}}async function se(){if(w.value.length!==8){E.value="Code must be 8 characters";return}A.value=!0,E.value=null;try{await g(w.value),c("complete")}catch{E.value="Workspace not found"}finally{A.value=!1}}return(ee,me)=>(xt(),_t("div",Vg,[Pe("div",Hg,[me[13]||(me[13]=hf('<div class="text-center mb-8"><div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-accent flex items-center justify-center"><svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div><h1 class="font-display font-bold text-2xl text-surface-100">Voice Notes</h1><p class="text-surface-400 mt-1">Sync across all your devices</p></div>',1)),p.value?p.value==="create"?(xt(),_t("div",Wg,[me[7]||(me[7]=Pe("h2",{class:"font-display font-semibold text-lg text-surface-100 mb-2"}," Create Workspace ",-1)),me[8]||(me[8]=Pe("p",{class:"text-surface-400 text-sm mb-6"}," Start fresh with a new workspace. You can invite other devices later. ",-1)),Pe("div",jg,[Pe("button",{onClick:U,disabled:A.value,class:"btn-primary w-full"},Yn(A.value?"Creating...":"Create Workspace"),9,Kg),Pe("button",{onClick:me[2]||(me[2]=ye=>p.value=null),class:"btn-ghost w-full"}," Back ")]),E.value?(xt(),_t("p",Xg,Yn(E.value),1)):fr("",!0)])):p.value==="join"?(xt(),_t("div",zg,[me[9]||(me[9]=Pe("h2",{class:"font-display font-semibold text-lg text-surface-100 mb-2"}," Join Workspace ",-1)),me[10]||(me[10]=Pe("p",{class:"text-surface-400 text-sm mb-4"}," Enter the 8-character code from another device. ",-1)),Ou(Pe("input",{"onUpdate:modelValue":me[3]||(me[3]=ye=>w.value=ye),type:"text",placeholder:"ABCD1234",maxlength:"8",class:"input text-center text-xl tracking-widest uppercase mb-4",onKeyup:Eh(se,["enter"])},null,544),[[tl,w.value]]),E.value?(xt(),_t("p",Yg,Yn(E.value),1)):fr("",!0),Pe("div",qg,[Pe("button",{onClick:se,disabled:A.value||w.value.length!==8,class:"btn-primary w-full"},Yn(A.value?"Joining...":"Join Workspace"),9,Zg),Pe("button",{onClick:me[4]||(me[4]=ye=>{p.value=null,w.value="",E.value=null}),class:"btn-ghost w-full"}," Back ")])])):p.value==="scan"?(xt(),_t("div",Qg,[me[11]||(me[11]=Pe("h2",{class:"font-display font-semibold text-lg text-surface-100 mb-4"}," Scan QR Code ",-1)),me[12]||(me[12]=Pe("div",{id:"qr-reader",class:"rounded-lg overflow-hidden mb-4"},null,-1)),E.value?(xt(),_t("p",Jg,Yn(E.value),1)):fr("",!0),Pe("button",{onClick:me[5]||(me[5]=ye=>{k(),p.value=null}),class:"btn-ghost w-full"}," Cancel ")])):fr("",!0):(xt(),_t("div",Gg,[Pe("button",{onClick:me[0]||(me[0]=ye=>p.value="create"),class:"btn-primary w-full py-4"}," Create New Workspace "),Pe("button",{onClick:me[1]||(me[1]=ye=>p.value="join"),class:"btn-secondary w-full py-4"}," Enter Code Manually "),Pe("button",{onClick:S,class:"btn-secondary w-full py-4"},[...me[6]||(me[6]=[Pe("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),Sl(" Scan QR Code ",-1)])])]))])]))}},e2={key:1,class:"min-h-screen flex flex-col"},t2={class:"lg:hidden flex items-center justify-between px-4 py-3 bg-surface-900/80 backdrop-blur-lg border-b border-surface-800 sticky top-0 z-40 safe-top"},n2={class:"font-display font-semibold text-lg"},r2={class:"flex-1 flex overflow-hidden"},i2={class:"flex-1 overflow-y-auto pb-24 lg:pb-8"},s2={class:"lg:hidden fixed bottom-6 right-6 z-30 safe-bottom"},o2={key:0,class:"fixed inset-0 bg-surface-900/95 backdrop-blur-xl z-50 flex items-center justify-center"},a2={key:0,class:"fixed inset-0 bg-surface-900/95 backdrop-blur-xl z-50 flex items-center justify-center p-4"},l2={class:"card p-6 w-full max-w-md animate-scale-in"},c2={class:"text-surface-300 mb-4 p-3 bg-surface-900 rounded-lg"},u2=["value"],f2={class:"flex gap-3"},h2={__name:"App",setup(n){const a=Vf(),c=Hf(),h=wa(),{categorize:g}=gg(),{workspace:p,init:w,sync:A,onSyncComplete:E}=gs(),b=Nt(!1),_=Nt(!1),S=Nt(null),k=Nt(5);let U=null;ua(async()=>{E.value=()=>h.initialize(),await w(),await h.initialize(),p.value&&A()});function se(){U&&(clearInterval(U),U=null)}co(()=>{se()});async function ee(){await h.initialize()}ys(()=>c.path,()=>{b.value=!1});async function me(ae){if(!ae){_.value=!1;return}_.value=!1;const J=await g(ae);S.value={text:J.text,listId:J.listId},k.value=5,se(),U=setInterval(()=>{k.value--,k.value<=0&&ye()},1e3)}async function ye(){se(),S.value&&(await h.addItem(S.value.listId,S.value.text),a.push(`/list/${S.value.listId}`),S.value=null)}function fe(){se(),S.value=null}return(ae,J)=>{var ve;const Fe=Gu("router-view");return qn(p)?(xt(),_t("div",e2,[Pe("header",t2,[Pe("button",{onClick:J[0]||(J[0]=K=>b.value=!0),class:"btn-ghost p-2 -ml-2"},[...J[8]||(J[8]=[Pe("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),Pe("h1",n2,Yn(((ve=qn(h).currentList)==null?void 0:ve.name)||"Voice Notes"),1),Pe("button",{onClick:J[1]||(J[1]=K=>qn(a).push("/settings")),class:"btn-ghost p-2 -mr-2"},[...J[9]||(J[9]=[Pe("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])]),Pe("div",r2,[qt(Oo,{name:"fade"},{default:Fi(()=>[b.value?(xt(),_t("div",{key:0,onClick:J[2]||(J[2]=K=>b.value=!1),class:"lg:hidden fixed inset-0 bg-black/60 z-40"})):fr("",!0)]),_:1}),qt($d,{open:b.value,onClose:J[3]||(J[3]=K=>b.value=!1),class:"fixed lg:relative z-50 lg:z-auto"},null,8,["open"]),Pe("main",i2,[qt(Fe,null,{default:Fi(({Component:K})=>[qt(Oo,{name:"fade",mode:"out-in"},{default:Fi(()=>[(xt(),Qa($1(K)))]),_:2},1024)]),_:1})])]),Pe("div",s2,[Pe("button",{onClick:J[4]||(J[4]=K=>_.value=!0),class:"w-16 h-16 rounded-full bg-accent text-white shadow-lg shadow-accent/30 flex items-center justify-center transition-transform active:scale-95 hover:bg-accent-dark focus:outline-none focus:ring-4 focus:ring-accent/30"},[...J[10]||(J[10]=[Pe("svg",{class:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Pe("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1)])])]),qt(Oo,{name:"fade"},{default:Fi(()=>[_.value?(xt(),_t("div",o2,[qt(dg,{onResult:me,onCancel:J[5]||(J[5]=K=>_.value=!1),"auto-start":!0})])):fr("",!0)]),_:1}),qt(Oo,{name:"fade"},{default:Fi(()=>[S.value?(xt(),_t("div",a2,[Pe("div",l2,[J[11]||(J[11]=Pe("h3",{class:"font-display font-semibold text-lg text-surface-100 mb-4"}," Add to list ",-1)),Pe("p",c2,' "'+Yn(S.value.text)+'" ',1),J[12]||(J[12]=Pe("label",{class:"block text-surface-400 text-sm mb-2"},"Category:",-1)),Ou(Pe("select",{"onUpdate:modelValue":J[6]||(J[6]=K=>S.value.listId=K),class:"input mb-6",onChange:J[7]||(J[7]=K=>k.value=5)},[(xt(!0),_t(zn,null,Ku(qn(h).lists,K=>(xt(),_t("option",{key:K.id,value:K.id},Yn(K.name),9,u2))),128))],544),[[Ef,S.value.listId]]),Pe("div",f2,[Pe("button",{onClick:fe,class:"btn-secondary flex-1"}," Cancel "),Pe("button",{onClick:ye,class:"btn-primary flex-1"}," Add ("+Yn(k.value)+"s) ",1)])])])):fr("",!0)]),_:1})])):(xt(),Qa($g,{key:0,onComplete:ee}))}}},d2=Vd({history:wd("/notes/"),routes:[{path:"/",redirect:"/list/inbox"},{path:"/list/:listId",name:"list",component:()=>_a(()=>import("./ListView-HCl9xz1G.js"),__vite__mapDeps([0,1]))},{path:"/quick-add",name:"quick-add",component:()=>_a(()=>import("./QuickAdd-CuME53Jp.js"),[])},{path:"/settings",name:"settings",component:()=>_a(()=>import("./SettingsView-BlTRRzbZ.js"),[])}]}),Ml=_h(h2);Ml.use(Th());Ml.use(d2);Ml.mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/notes/sw.js").catch(()=>{})});export{Sl as A,gs as B,_a as C,S2 as D,zn as F,Oo as T,dg as _,_t as a,Pe as b,En as c,fr as d,qn as e,Eh as f,Ku as g,aa as h,ys as i,qt as j,Fi as k,g2 as l,hf as m,Ai as n,xt as o,Hf as p,Qa as q,Nt as r,Ef as s,Yn as t,wa as u,tl as v,Ou as w,Vf as x,ua as y,p2 as z};
